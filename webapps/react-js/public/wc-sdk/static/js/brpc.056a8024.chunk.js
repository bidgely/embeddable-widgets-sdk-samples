"use strict";(self.webpackChunkmeraki=self.webpackChunkmeraki||[]).push([[210],{73309:function(e,a,s){s.r(a),s.d(a,{default:function(){return q}});var n=s(15671),t=s(43144),i=s(97326),r=s(60136),l=s(98557),c=s(47313),o=s(1084),d=s(70501),h=s(93433),p=s(1413),u=s(4942),g=s(44021),x=s(26915),m=s(90575),v=s(98492),b=s(41872),j=s(16404),C=s(88291),f=s(21911),N=s(21629),y=s(76720),w=s(46417);function S(e){var a=(0,y.WS)().rc,s=(0,c.useRef)(null),n=e.item.resources,t={minHeight:e.isMobView?"10px":68*e.candidateStyle+"px"},i={minHeight:e.isMobView?"auto":e.maxBlockHeight+"px"},r=(0,f.k6)(),l=(0,f.TH)(),o=e.widgetStrings.learnMore,d=e.widgetStrings.planFaq,h=e.tabIndex,p=e.widgetConfigs.ratePlanVersion===j.zZZ.V2,u=function(s,n){a.analytics.trackEvent(j.FiA.INSIGHTS_RATE_PLAN,{clicked:j.gPB,widget:j.wY4.INSIGHTS.RATE_PLANS},e),(0,C.K2)(n)?window.open(n):(0,C.m3)(N.Z$.RATE_PLAN_COMPARISON,r,l,s,n)};return(0,c.useEffect)((function(){(0,e.sendBlockHeightCb)(s.current.offsetHeight)}),[]),(0,w.jsxs)("div",{className:"rate-plan-card-bottom ".concat(p?"v2":""),children:[n.description?(0,w.jsx)("div",{className:"plan-description-block",ref:s,style:i,children:(0,w.jsxs)("div",{className:"works",children:[(0,w.jsx)("div",{className:"heading",role:"heading","aria-level":"4",children:d}),(0,w.jsxs)("div",{className:"detail",children:[" ",n.description," "]}),(0,w.jsxs)("span",{tabIndex:h,role:"link","aria-label":"".concat(o,", ").concat(n.planName),className:"learn-link",onClick:function(e){return u(e,n.learnMoreCtaUrl)},onKeyDown:function(e){return function(e,a){13==e.keyCode&&u(e,a)}(e,n.learnMoreCtaUrl)},children:[" ",o]})]})}):"",n.graphImageUrl?(0,w.jsx)("div",{className:"plan-image-block",children:(0,w.jsx)("img",{className:"bill-cycle-img",src:n.graphImageUrl,alt:""})}):"",n.rateCandidateRequirements&&n.rateCandidateRequirements.length?(0,w.jsxs)("div",{className:"candidate-block",style:t,children:[(0,w.jsx)("div",{className:"heading ".concat(p?"no-color-heading":""),role:"heading","aria-level":"4",children:(0,w.jsx)("span",{tabIndex:h,children:e.widgetStrings.goodPlan})}),n.rateCandidateRequirements.map((function(e,a){return(0,w.jsxs)("div",{className:"detail ".concat(e.type===j.mi8.POSITIVE?"good-candidate":"bad-candidate"),children:[e.type===j.mi8.POSITIVE?(0,w.jsx)("span",{tabIndex:h,"aria-label":e.type,className:"bidgely-icon-positive-tick ".concat(p?"icon":"")}):(0,w.jsx)("span",{tabIndex:h,"aria-label":e.type,className:"bidgely-icon-negative-tick ".concat(p?"icon":"")}),(0,w.jsx)("span",{className:"text-block",children:(0,w.jsx)("span",{tabIndex:h,children:e.description})})]},a)}))]}):""]})}var P=s(14427),T=s(56955),R=function(e){var a=e.item,s=e.tabIndex,n=e.index,t=e.widgetStrings,i=e.widgetConfigs,r=e.showRateRecommendation,l=e.savingsPerText,c=e.translations,o=e.isSavingsMonthly,d=e.bestMatchSaveValue,h=e.diffThreshold,p=e.getRatePlanTitle,u=(0,T.Z7)(t.savesYou,{savedValue:(0,T.xB)({cost:d,showCurrency:!0})});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{id:"header-".concat(n),className:"card-top-header-v2",role:"heading","aria-level":3,tabIndex:s,"aria-label":"".concat(p(a,r,l,i,c,t),"\n                        ").concat(a.resources.planName),children:[(0,w.jsxs)("div",{"aria-hidden":"true",className:"card-tag ".concat(a.isCurrentRate&&a.isHighestSavings||!a.isCurrentRate&&a.isPositiveSaving?"active":""),children:[a.isCurrentRate&&!a.isHighestSavings&&d>=h&&(0,w.jsx)("div",{className:"plan-title",children:t.currentPlan}),a.isHighestSavings||d<h?(0,w.jsx)("div",{className:"plan-title",children:t.bestMatch}):""]}),(0,w.jsxs)("div",{"aria-hidden":"true",className:"plan-name",children:[" ",a.resources.planName," "]})]}),(0,w.jsxs)("div",{className:"card-container-v2",tabIndex:s,children:[(0,w.jsxs)("div",{className:"plan-price",children:[(0,w.jsxs)("span",{className:"currency value",children:[i.currencyUnit,o?Math.round(a.avgCost):Math.round(a.totalCost)]}),d>=1&&a.isHighestSavings&&!a.isCurrentRate?(0,w.jsx)("span",{className:"saving",children:u}):""]}),(0,w.jsx)("div",{className:"plan-your-approximate",children:t.avgSavings})]})]})},k=function(e){(0,r.Z)(s,e);var a=(0,l.Z)(s);function s(e){var t;return(0,n.Z)(this,s),(t=a.call(this,e)).handleDisableClick=function(e){(0,T.IR)()&&(9===e.keyCode||9===e.keyCode&&e.shiftKey||37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode||e.preventDefault())},t.handleSliderRendering=function(e){if(!e)return!1;e.querySelectorAll(".slick-slide").forEach((function(e){e&&e.hasAttribute("tabindex")&&e.removeAttribute("tabindex")})),e.querySelectorAll(".rate-plan-card").forEach((function(e){e&&e.hasAttribute("tabindex")&&e.removeAttribute("tabindex")}))},t.state={isExpand:!1,expanded:"",maxBlockHeight:0,bestMatchSaveValue:0},t.blocks=[],t.diffThreshold=1,t.handleChange=t.handleChange.bind((0,i.Z)(t)),t.handlePlanBtnClick=t.handlePlanBtnClick.bind((0,i.Z)(t)),t.calculateMaxHeightForPlanDescBlock=t.calculateMaxHeightForPlanDescBlock.bind((0,i.Z)(t)),t}return(0,t.Z)(s,[{key:"handleChange",value:function(e){this.setState({isExpand:e!==this.state.expanded||!this.state.isExpand,expanded:e})}},{key:"handlePlanBtnClick",value:function(e,a){if(!a.isCurrentRate){var s=a.resources.switchPlanCtaUrl;this.context.rc.analytics.trackEvent(j.FiA.INSIGHTS_RATE_PLAN,{clicked:"View this plan",widget:j.wY4.INSIGHTS.RATE_PLANS},this.props),(0,C.K2)(s)?window.open(s):(0,C.m3)(N.Z$.RATE_PLAN_COMPARISON,this.props.history,this.props.location,e,s)}}},{key:"calculateMaxHeightForPlanDescBlock",value:function(e){this.blocks.push(e);var a=this.getRatePlanList();this.blocks.length===a.length&&this.setState((0,p.Z)((0,p.Z)({},this.state),{},{maxBlockHeight:Math.max.apply(Math,(0,h.Z)(this.blocks))}))}},{key:"getRatePlanList",value:function(){var e=this.props.maxCardsToShow,a=this.props.isVersionV2,s=this.props.ratePlansData.rateplansList;if(a){s=s.filter((function(e){return e.isCurrentRate||e.isHighestSavings}));for(var n=0,t=0;t<s.length;t++){var i=parseFloat(s[t].avgCost);n=t%2===0?n+=i:n-=i}0===this.state.bestMatchSaveValue&&(n>=this.diffThreshold?this.setState({bestMatchSaveValue:n}):s=s.filter((function(e){return e.isCurrentRate})))}else s=s&&this.props.ratePlansData.rateplansList.length>e?this.props.ratePlansData.rateplansList.slice(0,e):s;return s}},{key:"getRatePlanTitle",value:function(e,a,s,n,t,i){if((e.isCurrentRate||e.isHighestSavings&&a)&&t[e.planTitle])return t[e.planTitle];if(e.isCurrentRate&&e.isHighestSavings){if(a)return i.bestPlanDisclaimer}else{if(e.isPositiveSaving)return"".concat(i.saveUpto," ").concat(n.currencyUnit).concat(e.savingCost," ").concat(s);if(!e.isCurrentRate)return 0===e.savingCost?i.similarSavings:"".concat(i.costs," ").concat(n.currencyUnit).concat(e.savingCost," ").concat(i.more," ").concat(s);if(a)return i.switchPrompt}return""}},{key:"handleKeyPress",value:function(e,a){!e||32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),this.setState({isExpand:a!==this.state.expanded||!this.state.isExpand,expanded:a}))}},{key:"render",value:function(){var e=this,a=this.props.ratePlansData,s=this.getRatePlanList(),n=this.props.widgetConfigs,t=this.props.widgetStrings,i=this.props.translations,r=this.props.isVersionV2,l=this.props.isMobileView,c={slidesToShow:s?s.length:0,slidesToScroll:s?s.length:0,centerMode:r&&!l&&1===s.length,centerPadding:r&&!l&&1===s.length?"33%":""},o=this.props.savingsDisplayMode===j.S4q.MONTHLY,d=o?t.perMonth:t.perYear,h=o?"":t.byYear,x=o?t.avgSavings:t.billPerYear,C=n.showRateRecommendation,f=n.verticalAlign,N=t.demandCharge,y=n.normaliseHighestSaveBtn,k=n.hideRateplanctaBtn,I=!1;s&&s.length&&(I=s.find((function(e){return e.costBreakdown.averageDemandCharges>0})));var M=a.isMissingData?-1:0;return(0,w.jsxs)(w.Fragment,{children:[" ",a.isLoading?(0,w.jsxs)("div",{className:"loading-wrapper",children:[" ",(0,w.jsx)(P.Z,{}),"  "]}):(0,w.jsx)(w.Fragment,{children:s&&s.length?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"insights-rate-plans-wrapper ".concat(2===s.length?"center-align-rate-plan":""," ").concat(a.isMissingData?"missing-data":""," ").concat(f?"vertically-centered":""," ").concat(r?"tag-card":""),ref:function(a){return e.handleSliderRendering(a)},children:[(0,w.jsx)("div",{"aria-hidden":a.isMissingData,children:(0,w.jsx)(g.Z,(0,p.Z)((0,p.Z)({},c),{},{children:s.map((function(s,l){return(0,w.jsxs)("div",{className:"rate-plan-card","aria-hidden":a.isMissingData,children:[(0,w.jsxs)("div",{className:"rate-plan-card-top ".concat(C?"":"no-recommendation"),children:[r?(0,w.jsx)(R,{item:s,tabIndex:M,index:l,widgetStrings:t,widgetConfigs:n,showRateRecommendation:C,savingsPerText:d,translations:i,isSavingsMonthly:o,getRatePlanTitle:e.getRatePlanTitle,bestMatchSaveValue:e.state.bestMatchSaveValue,diffThreshold:e.diffThreshold}):(0,w.jsxs)("div",{id:"header-".concat(l),className:"rate-plan-card-top-header",role:"heading","aria-level":"3",tabIndex:M,"aria-label":"".concat(e.getRatePlanTitle(s,C,d,n,i,t)," ").concat(s.resources.planName),children:[(0,w.jsxs)("div",{"aria-hidden":"true",className:"card-header ".concat(s.isCurrentRate&&s.isHighestSavings||!s.isCurrentRate&&s.isPositiveSaving?"active":""),children:[(s.isCurrentRate||s.isHighestSavings&&C)&&(0,w.jsxs)("div",{className:"plan-title",children:[" ",i[s.planTitle]," "]}),(0,w.jsxs)("div",{className:"plan-subtitle",children:[s.isHighestSavings&&C?(0,w.jsx)("span",{className:"rate-plan-star",children:"\u2605"}):"",s.isCurrentRate&&s.isHighestSavings?(0,w.jsx)(w.Fragment,{children:C?t.bestPlanDisclaimer:""}):(0,w.jsxs)(w.Fragment,{children:[s.isPositiveSaving?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("span",{className:"saving-cost",children:[t.saveUpto,n.currencyUnit,s.savingCost]}),"\xa0",d]}):"",s.isPositiveSaving||s.isCurrentRate?(0,w.jsx)("span",{className:"current",children:C?t.switchPrompt:""}):(0,w.jsx)(w.Fragment,{children:0===s.savingCost?(0,w.jsx)("span",{className:"saving-cost",children:t.similarSavings}):(0,w.jsxs)(w.Fragment,{children:[t.costs,(0,w.jsxs)("span",{className:"saving-cost",children:[n.currencyUnit,s.savingCost,"\xa0",t.more]}),d]})})]})]})]}),(0,w.jsxs)("div",{"aria-hidden":"true",className:"plan-name",children:[" ",s.resources.planName," "]})]}),r?"":(0,w.jsxs)("div",{className:"card-container",tabIndex:M,children:[(0,w.jsxs)("div",{className:"plan-your-approximate",children:[" ",x," "]}),(0,w.jsxs)("div",{className:"plan-price",children:[(0,w.jsx)("span",{className:"currency type",children:(0,w.jsx)("sup",{children:n.currencyUnit})}),(0,w.jsx)("span",{className:"currency value",children:o?s.avgCost:s.totalCost}),(0,w.jsxs)("span",{className:"currency time",children:[" ",(0,w.jsxs)("sub",{children:[" ",h," "]})," "]})]}),I?(0,w.jsx)("div",{className:"demand-charge",children:s.costBreakdown.averageDemandCharges?(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,T.Z7)(N,(0,u.Z)({},"demand_charge_value",(0,T.xB)({cost:s.costBreakdown.averageDemandCharges,round:!0,showCurrency:!0})))}}):""}):""]}),(0,w.jsx)("div",{onKeyDown:function(a){return s.isCurrentRate&&e.handleDisableClick(a)},className:"plan-btn-wrapper ".concat(r?"plan-btn-full-width":""),onClick:function(a){return e.handlePlanBtnClick(a,s)},children:k?"":(0,w.jsx)("button",{tabIndex:M,"aria-describedby":"header-".concat(l),"aria-disabled":s.isCurrentRate,"aria-label":"".concat(s.isCurrentRate?t.currentPlan:t.switchPlan,", ").concat(s.resources.planName),className:"plan-btn ".concat(s.isCurrentRate?"btnDisable":"".concat(s.isHighestSavings&&C&&!y?"highest-btn":"switch-btn")),children:s.isCurrentRate?(0,w.jsxs)(w.Fragment,{children:[" ",t.currentPlan," "]}):(0,w.jsxs)(w.Fragment,{children:[" ",t.switchPlan]})})})]}),e.props.isMobileView||e.props.isTabletView?(0,w.jsx)("div",{className:"accordion-wrapper",children:(0,w.jsxs)(m.Z,{expanded:e.state.expanded==="panel".concat(l)&&e.state.isExpand,onChange:function(){return e.handleChange("panel".concat(l))},onKeyDown:function(a){return e.handleKeyPress(a,"panel".concat(l))},children:[(0,w.jsx)(v.Z,{children:e.state.isExpand&&e.state.expanded==="panel".concat(l)?(0,w.jsxs)("div",{className:"rate-plan-expansion",children:[(0,w.jsx)("span",{className:"bidgely-icon-arrow-down"})," ",t.hideDetails]}):(0,w.jsxs)("div",{className:"rate-plan-expansion",children:[(0,w.jsx)("span",{className:"bidgely-icon-arrow-right"})," ",t.showDetails]})}),(0,w.jsx)(b.Z,{"aria-hidden":!(e.state.expanded==="panel".concat(l)&&e.state.isExpand),children:(0,w.jsx)(S,{location:e.props.location,userId:e.props.userId,itemIndex:l,tabIndex:M,sendBlockHeightCb:e.calculateMaxHeightForPlanDescBlock,maxBlockHeight:e.state.maxBlockHeight,item:s,candidateStyle:a.candidateStyle,widgetStrings:t,isMobView:e.props.isMobileView,widgetConfigs:n})})]})}):(0,w.jsx)(S,{location:e.props.location,userId:e.props.userId,tabIndex:M,itemIndex:l,sendBlockHeightCb:e.calculateMaxHeightForPlanDescBlock,maxBlockHeight:e.state.maxBlockHeight,item:s,candidateStyle:a.candidateStyle,widgetStrings:t,widgetConfigs:n})]},l)}))}))}),a.isMissingData?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"rate-plans-api-error-wrapper",children:(0,w.jsx)("div",{className:"api-error-data",children:(0,w.jsx)("div",{className:"api-error-text",tabIndex:0,children:this.props.widgetStrings.apiError})})}),(0,w.jsx)("div",{className:"rate-plans-overlay",children:" "})]}):""]})}):""})," "]})}}]),s}(c.Component);k.contextType=y.zO;var I=(0,x.D2)(k,(function(e){return{"@global":{".MuiAccordionSummary-root":{minHeight:0,padding:"0 12px"},".MuiAccordionDetails-root":{padding:0},".MuiPaper-elevation1":{boxShadow:"none"},".MuiAccordionSummary-root.Mui-expanded":{minHeight:0},".MuiAccordionSummary-content.Mui-expanded":{margin:"12px 0"},".MuiAccordionSummary-content":{fontSize:"12px",lineHeight:"15px"},".MuiTooltip-popper":(0,u.Z)({},e.breakpoints.up("lg"),{left:"-90px !important"}),".MuiTooltip-popperArrow .MuiTooltip-arrow":(0,u.Z)({},e.breakpoints.up("lg"),{left:"305px !important"}),".MuiTooltip-arrow":{overflow:"unset"},".MuiCollapse-hidden":{display:"none"}}}})),M=s(19615),Z=s(11221),A=s(82574);var D=s(74813),_=s(66835),H=s(57861),V=s(67478),F=s(51629),L=s(23477),E=s(24076),B=s(69140),U="demand_charge_value",O=function(e){(0,r.Z)(s,e);var a=(0,l.Z)(s);function s(){return(0,n.Z)(this,s),a.apply(this,arguments)}return(0,t.Z)(s,[{key:"componentDidMount",value:function(){this.props.closeRef&&((0,T.IR)()&&this.props.closeRef&&this.props.closeRef.current.focus(),window.scrollTo(0,100))}},{key:"render",value:function(){var e=this,a=this.props.ratePlansData,s=this.props.ratePlansData.rateplansList,n=this.props.widgetConfigs,t=this.props.widgetStrings,i=this.props.translations,r=n.ratePlanVersion===j.zZZ.V2,l=M.V.getColors().colors,c=this.props.savingsDisplayMode===j.S4q.MONTHLY,o=c?t.perMonth:t.perYear,h=c?t.avgMonthlyCost:t.totalCost,p=this.props.responsiveness.isMobileView,g=n.hideRateplanctaBtn,x=function(a,s){if(e.context.rc.analytics.trackEvent(j.FiA.INSIGHTS_RATE_PLAN,{clicked:"View this plan",widget:j.wY4.INSIGHTS.RATE_PLANS},e.props),!s.isCurrentRate){var n=s.resources.switchPlanCtaUrl;(0,C.K2)(n)?window.open(n):(0,C.m3)(N.Z$.RATE_PLAN_COMPARISON,e.props.history,e.props.location,a,n)}},m=function(a,s){e.context.rc.analytics.trackEvent(j.FiA.INSIGHTS_RATE_PLAN,{clicked:j.gPB,widget:j.wY4.INSIGHTS.RATE_PLANS},e.props),(0,C.K2)(s)?window.open(s):(0,C.m3)(N.Z$.RATE_PLAN_COMPARISON,e.props.history,e.props.location,a,s)},v=function(e,a){13==e.keyCode&&m(e,a)},b=n.showRateRecommendation,f=t.demandCharge;return(0,w.jsx)(w.Fragment,{children:!a.isLoading&&(0,w.jsx)(w.Fragment,{children:s&&s.length&&(0,w.jsxs)(w.Fragment,{children:[!p&&(0,w.jsx)(F.Z,{component:d.Z,className:"rate-plans-table-container ".concat(r?"v2":""),children:(0,w.jsxs)(_.Z,{"aria-label":t.heading,className:"rate-plans-table",children:[(0,w.jsx)(L.Z,{className:"rate-plans-table-header",children:(0,w.jsxs)(E.Z,{children:[(0,w.jsx)(V.Z,{children:t.planStatus}),(0,w.jsx)(V.Z,{children:t.planName}),(0,w.jsx)(V.Z,{children:h}),(0,w.jsx)(V.Z,{children:t.switchPlans}),(0,w.jsx)(V.Z,{children:t.planFaq})]})}),(0,w.jsx)(H.Z,{className:"rate-plans-table-body",children:s.map((function(e,a){return(0,w.jsxs)(E.Z,{className:"rate-plans-table-row"+(a%2===0?" odd":""),children:[(0,w.jsx)(V.Z,{children:(0,w.jsxs)("div",{children:[(e.isCurrentRate||e.isHighestSavings&&b)&&(0,w.jsx)("div",{className:"current-or-highest",children:i[e.planTitle]}),(0,w.jsx)("div",{className:"plan-subtitle",id:"plan-desc-".concat(a),children:e.isCurrentRate&&e.isHighestSavings?(0,w.jsxs)(w.Fragment,{children:[" ",b?t.bestPlanDisclaimer:""," "]}):(0,w.jsxs)(w.Fragment,{children:[e.isPositiveSaving&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("span",{className:"saving-cost",children:[t.saveUpto,n.currencyUnit,e.savingCost]}),"\xa0",o]}),e.isPositiveSaving||e.isCurrentRate?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("span",{className:"current",children:b?t.switchPrompt:""})}):(0,w.jsx)(w.Fragment,{children:0===e.savingCost?(0,w.jsx)("span",{className:"saving-cost",children:t.similarSavings}):(0,w.jsxs)(w.Fragment,{children:[t.costs,(0,w.jsxs)("span",{className:"saving-cost",children:[n.currencyUnit,e.savingCost,"\xa0",t.more]}),o]})})]})})]})}),(0,w.jsx)(V.Z,{children:e.resources.planName}),(0,w.jsxs)(V.Z,{children:[(0,w.jsxs)("div",{className:"plan-price",children:[(0,w.jsx)("span",{className:"currency type",children:n.currencyUnit}),(0,w.jsx)("span",{className:"currency value",children:c?r?Math.round(e.avgCost):e.avgCost:r?Math.round(e.totalCost):e.totalCost})]}),e.costBreakdown.averageDemandCharges?(0,w.jsx)("div",{className:"demand-charge-text",dangerouslySetInnerHTML:{__html:"(".concat((0,T.Z7)(f,(0,u.Z)({},U,(0,T.xB)({cost:e.costBreakdown.averageDemandCharges,round:!0,showCurrency:!0}))),")")}}):""]}),(0,w.jsx)(V.Z,{children:g?"":(0,w.jsx)(B.Z,{btnVariant:"outlined",btnText:e.isCurrentRate?t.currentPlan:t.switchPlan,disableRipple:!0,btnBackground:"rgb(".concat(l["--background_300"],")"),borderColor:"rgb(".concat(l["--primary_500"],")"),textColor:"rgb(".concat(l["--primary_500"],")"),hoverColor:"rgb(".concat(l["--primary_500"],")"),hoverTextColor:"rgb(".concat(l["--foreground_300"],")"),btnTextTransform:"none",btnWidth:"95%",ariaDisabled:e.isCurrentRate,onKeyDown:function(a){return e.isCurrentRate&&function(e){(0,T.IR)()&&(9===e.keyCode||9===e.keyCode&&e.shiftKey||37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode||e.preventDefault())}(a)},onClick:function(a){return x(a,e)},btnTextSize:"12px",ariaLabel:"".concat(e.isCurrentRate?t.currentPlan:t.switchPlan,", ").concat(e.resources.planName),ariaDescribedby:"plan-desc-".concat(a),cssClassName:e.isCurrentRate?"disableBtn":""})}),(0,w.jsxs)(V.Z,{className:"description",children:[e.resources.description,(0,w.jsx)("br",{}),e.resources&&e.resources.learnMoreCtaUrl&&(0,w.jsxs)("span",{tabIndex:"0",role:"link","aria-label":"".concat(t.learnMore,", ").concat(e.resources.planName),className:"learn-link-table",onClick:function(a){return m(a,e.resources.learnMoreCtaUrl)},onKeyDown:function(a){return v(a,e.resources.learnMoreCtaUrl)},children:[" ",t.learnMore]})]})]},a)}))})]})}),p&&(0,w.jsx)(F.Z,{component:d.Z,className:"rate-plans-table-container",children:(0,w.jsx)(_.Z,{"aria-label":t.heading,className:"rate-plans-table",children:(0,w.jsx)(H.Z,{className:"rate-plans-table-body",children:s.map((function(e,a){return(0,w.jsxs)("div",{children:[(0,w.jsxs)(E.Z,{className:"rate-plans-table-row",children:[(0,w.jsx)(V.Z,{children:t.planStatus}),(0,w.jsx)(V.Z,{className:a%2===0?" odd":"",children:(0,w.jsxs)("div",{children:[(e.isCurrentRate||e.isHighestSavings&&b)&&(0,w.jsx)("div",{className:"current-or-highest",children:i[e.planTitle]}),(0,w.jsx)("div",{className:"plan-subtitle",id:"plan-desc-".concat(a),children:e.isCurrentRate&&e.isHighestSavings?(0,w.jsx)(w.Fragment,{children:b?t.bestPlanDisclaimer:""}):(0,w.jsx)(w.Fragment,{children:e.isPositiveSaving?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("span",{className:"saving-cost",children:[t.saveUpto,n.currencyUnit,e.savingCost]}),"\xa0",o]}):(0,w.jsx)(w.Fragment,{children:e.isCurrentRate?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("span",{className:"current",children:t.switchPrompt})}):(0,w.jsx)(w.Fragment,{children:0===e.savingCost?(0,w.jsx)("span",{className:"saving-cost",children:t.similarSavings}):(0,w.jsxs)(w.Fragment,{children:[t.costs,(0,w.jsxs)("span",{className:"saving-cost",children:[n.currencyUnit,e.savingCost,"\xa0",t.more]}),o]})})})})})]})})]}),(0,w.jsxs)(E.Z,{className:"rate-plans-table-row",children:[(0,w.jsx)(V.Z,{children:t.planName}),(0,w.jsx)(V.Z,{className:a%2===0?" odd":"",children:e.resources.planName})]}),(0,w.jsxs)(E.Z,{className:"rate-plans-table-row",children:[(0,w.jsx)(V.Z,{children:h}),(0,w.jsxs)(V.Z,{className:a%2===0?" odd":"",children:[(0,w.jsxs)("div",{className:"plan-price",children:[(0,w.jsx)("span",{className:"currency type",children:n.currencyUnit}),(0,w.jsx)("span",{className:"currency value",children:c?e.avgCost:e.totalCost})]}),e.costBreakdown.averageDemandCharges?(0,w.jsx)("div",{className:"demand-charge-text",dangerouslySetInnerHTML:{__html:"(".concat((0,T.Z7)(f,(0,u.Z)({},U,(0,T.xB)({cost:e.costBreakdown.averageDemandCharges,round:!0,showCurrency:!0}))),")")}}):(0,w.jsx)(w.Fragment,{})]})]}),(0,w.jsxs)(E.Z,{className:"rate-plans-table-row",children:[(0,w.jsx)(V.Z,{children:t.switchPlans}),(0,w.jsx)(V.Z,{className:a%2===0?" odd":"",children:g?"":(0,w.jsx)(B.Z,{btnVariant:"outlined",btnText:e.isCurrentRate?t.currentPlan:t.switchPlan,disableRipple:!0,btnBackground:"rgb(".concat(l["--background_300"],")"),borderColor:"rgb(".concat(l["--primary_500"],")"),textColor:"rgb(".concat(l["--primary_500"],")"),hoverColor:"rgb(".concat(l["--primary_500"],")"),hoverTextColor:"rgb(".concat(l["--foreground_300"],")"),btnTextTransform:"none",btnWidth:"95%",onClick:function(a){return x(a,e.resources.switchPlanCtaUrl)},btnTextSize:"12px",disabled:e.isCurrentRate,ariaLabel:"".concat(e.isCurrentRate?t.currentPlan:t.switchPlan,", ").concat(e.resources.planName),ariaDescribedby:"plan-desc-".concat(a)})})]}),(0,w.jsxs)(E.Z,{className:"rate-plans-table-row last",children:[(0,w.jsx)(V.Z,{children:t.planFaq}),(0,w.jsxs)(V.Z,{className:"description"+(a%2===0?" odd":""),children:[e.resources.description,(0,w.jsx)("br",{}),e.resources&&e.resources.learnMoreCtaUrl&&(0,w.jsx)("a",{tabIndex:"0",className:"learn-link-table",role:"link","aria-label":"".concat(t.learnMore,", ").concat(e.resources.description),onClick:function(a){return m(a,e.resources.learnMoreCtaUrl)},onKeyDown:function(a){return v(a,e.resources.learnMoreCtaUrl)},children:t.learnMore})]})]})]},a)}))})})})]})})})}}]),s}(c.Component);O.contextType=y.zO;var K=s(11198),Y=s(61939),G=function(e){(0,r.Z)(s,e);var a=(0,l.Z)(s);function s(e){var t;return(0,n.Z)(this,s),(t=a.call(this,e)).configColors=M.V.getColors().colors,t.state={isTabularView:!1},t.toggleTabularView=t.toggleTabularView.bind((0,i.Z)(t)),t.closeRatePlanTableRef=c.createRef(),t.showAllPlansRef=c.createRef(),t}return(0,t.Z)(s,[{key:"componentDidMount",value:function(){this.widgetTrackingInfo=this.context.rc.analytics.createWidgetInfo(j.xDZ.INSIGHTS_RATE_PLAN);var e={"measurement-type":(0,T.nY)(this.props.session.userProfile.fuelType),locale:this.props.configs.locale,"scale-values":this.props.widgetConfigs.savingsMode!==j.S4q.MONTHLY};(0,D.JF)()&&(e.templateName="".concat(j.wY4.INSIGHTS.RATE_PLANS,".FETCH_RATE_PLANS")),this.props.fetchingRatePlansData(),this.props.fetchRatePlansData(this.context.rc,this.props.userId,e,this.props.widgetConfigs.rateDataPointsThreshold),this.context.rc.analytics.trackEvent(j.FiA.INSIGHTS_RATE_PLAN,{viewed:!0,shown:j.Q2X.RATE_PLANS},this.props)}},{key:"componentDidUpdate",value:function(e){if(this.widgetTrackingInfo&&e.ratePlansData&&e.ratePlansData.isLoading&&!this.props.ratePlansData.isLoading){var a=this.props.ratePlansData.error?j.WW8.ERROR:this.props.ratePlansData.dataNotAvailable?j.WW8.DATA_NOT_AVAILABLE:j.WW8.SUCCESS,s=this.props.ratePlansData.errorInfo;this.context.rc.analytics.logWidgetInfo(this.widgetTrackingInfo,a,s),this.widgetTrackingInfo=null}}},{key:"toggleTabularView",value:function(){var e=this;this.setState({isTabularView:!this.state.isTabularView},(function(){e.showAllPlansRef&&e.showAllPlansRef.current&&e.showAllPlansRef.current.focus()})),this.context.rc.analytics.trackEvent(j.FiA.INSIGHTS_RATE_PLAN,{clicked:"Show all price plans",widget:j.wY4.INSIGHTS.RATE_PLANS},this.props)}},{key:"handleKeyPress",value:function(e){!e||32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),this.toggleTabularView())}},{key:"render",value:function(){var e=this,a=this.props,s=a.widgetStrings,n=a.ratePlansData,t=a.widgetConfigs,i=a.responsiveness,r=a.translations,l=i.isMobileView,c=i.isTabletView,o=this.state.isTabularView,h=t.savingsMode,p=t.maxRateCards,u=t.hideHeader,g=n&&n.rateplansList&&n.rateplansList.length>p,x=n&&n.descriptionText,m=this.context.runMode===j.K8z,v=t.ratePlanVersion===j.zZZ.V2;return(0,w.jsxs)(d.Z,{className:"insights-rate-plans-container",role:"region","aria-labelledby":"rate-plan-heading",children:[o?(0,w.jsxs)("div",{id:"rate-plan-heading","aria-label":s.heading,children:[(0,w.jsx)("button",{"aria-label":s.closePlans,tabIndex:"0",className:"close-icon-btn",onKeyDown:function(a){return 32===a.keyCode&&e.toggleTabularView()},ref:this.closeRatePlanTableRef,onClick:function(){return e.toggleTabularView()},children:(0,w.jsx)(K.Z,{classes:{root:"close-icon"},"aria-hidden":"true"})}),(0,w.jsx)(O,{ratePlansData:n,widgetConfigs:t,widgetStrings:s,translations:r,isMobileView:l,userId:this.props.userId,location:this.props.location,isTabletView:c,savingsDisplayMode:h,responsiveness:this.props.responsiveness,closeRef:this.closeRatePlanTableRef})]}):(0,w.jsxs)(w.Fragment,{children:[!u&&(0,w.jsx)("div",{id:"rate-plan-heading",role:"heading","aria-level":"2",tabIndex:0,className:m?"widget-header-cont ".concat((0,T.jP)()?"no-bg":""):"insights-rate-plans-title",dangerouslySetInnerHTML:{__html:s.title}}),x&&!v&&(0,w.jsx)("div",{className:"insights-rate-plans-subtitle",dangerouslySetInnerHTML:{__html:x}}),v?"":(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"insights-rate-plans-subtitle",dangerouslySetInnerHTML:{__html:s.subTitle}}),(0,w.jsx)("div",{className:"insights-rate-plans-subtitle1",children:(0,w.jsx)("div",{className:"insight-rate-plans-subtitle-mobile",dangerouslySetInnerHTML:{__html:s.desc}})}),(0,w.jsx)("div",{className:"insights-rate-plans-desc",dangerouslySetInnerHTML:{__html:s.desc2}})]}),(0,w.jsx)(I,{ratePlansData:n,widgetConfigs:t,widgetStrings:s,translations:r,isMobileView:l,isTabletView:c,userId:this.props.userId,savingsDisplayMode:h,maxCardsToShow:p,location:this.props.location,history:this.props.history,isVersionV2:v}),g&&!v&&(0,w.jsx)("div",{ref:this.showAllPlansRef,onKeyDown:function(a){return e.handleKeyPress(a)},className:"insights-rate-plans-show-all ".concat((0,T.IR)()?"ada-focus":""),onClick:function(){return e.toggleTabularView()},tabIndex:"0","aria-label":s.showAllPlans,role:"link",children:s.showAllPlans})]}),v&&!n.isLoading&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"disclaimer",children:[s.subTitle&&(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:s.subTitle}}),s.desc&&(0,w.jsx)("div",{className:s.subTitle?"info":"",dangerouslySetInnerHTML:{__html:s.desc}}),s.desc2&&(0,w.jsx)("div",{className:s.desc?"info":"",dangerouslySetInnerHTML:{__html:s.desc2}})]}),(0,w.jsx)("div",{className:"table-heading",children:s.allRatePlansTitle}),(0,w.jsx)(O,{ratePlansData:n,widgetConfigs:t,widgetStrings:s,translations:r,isMobileView:l,userId:this.props.userId,location:this.props.location,isTabletView:c,savingsDisplayMode:h,responsiveness:this.props.responsiveness})]})]})}}]),s}(c.Component);G.contextType=y.zO;var q=(0,Y.$)(N.Z$.RATE_PLAN_COMPARISON,(0,f.EN)((0,o.$j)((function(e){return{session:e.session,userId:e.session.userProfile.userId,ratePlansData:e.ratePlansData,configs:e.configs,translations:e.translationsData.data,queryParams:e.queryParams,responsiveness:e.responsiveness}}),(function(e){return{fetchRatePlansData:function(a,s,n,t){return e(function(e,a,s,n){return function(t){var i=A.WV.getEndpoint(a);e.apiClient.get(i,{params:s}).then((function(e){e.error?t({type:Z.o.FETCH_FAILED,payload:e.error}):t({type:Z.o.FETCH_SUCCESS,payload:{apiResponse:e.data||[],dataPointsThreshold:n,scaleValues:s["scale-values"]}})}))}}(a,s,n,t))},fetchingRatePlansData:function(){return e((function(e){e({type:Z.o.FETCHING_DATA})}))}}}))(G)))}}]);