"use strict";(self.webpackChunkmeraki=self.webpackChunkmeraki||[]).push([[368],{2749:function(e,t,r){r.r(t),r.d(t,{default:function(){return ve}});var s=r(93433),n=r(1413),a=r(15671),o=r(43144),i=r(60136),c=r(98557),u=r(47313),l=r(1084),d=r(57805),p="RESET_DATA",h=r(56808),v=r(41130),g="USAGE_RESET_DATA";var f=r(63773),y=r(29458),m=r(56955),x=r(88291),w=r(96151),b=r(16404),S=r(83450),D=r(73428),A=r(61113),C=r(70501),E=r(24537),j=r(69140),k=r(14427),I=r(11198),N=r(26915),V=r(1168),_=r(46417),T=(0,N.ZL)()((function(e,t){return{root:{backgroundColor:t.bannerbgColor}}}));function R(e){var t=T(e).classes,r=u.useRef("focusOnElement");return u.useEffect((function(){(0,m.IR)()&&void 0!==r&&r.current&&V.findDOMNode(r.current.firstChild).focus()})),(0,_.jsx)("div",{className:"container","data-widget-name":e.widgetName,"data-bg-color":"primary_400",role:"alert",children:(0,_.jsxs)(D.Z,{classes:{root:"".concat(t.root," banner-component ").concat(e.cssClassName)},children:[(0,_.jsxs)("div",{className:"info-container",children:[(0,_.jsx)("div",{className:"info-item",children:(0,_.jsx)("span",{className:"".concat(e.iconClassName," icon")})}),(0,_.jsx)("div",{className:"info-item",children:(0,_.jsx)("p",{"data-text-color":"foreground_300",dangerouslySetInnerHTML:{__html:e.message}})})]}),(0,_.jsx)("div",{className:"banner-close-btn",ref:r,children:(0,_.jsx)("button",{"data-widget-name":e.widgetName,"aria-label":e.translations["DASHBOARD.LABEL.CLOSE"],"data-icon-color":"foreground_500","data-border-color":"foreground_500",onClick:function(){return e.handleBannnerClose()},"aria-pressed":function(){return e.handleBannnerClose()},className:"close-btn",children:(0,_.jsx)(I.Z,{classes:{root:"close-icon"},"aria-hidden":"true"})})})]})})}var Q=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"checkIfSelectedAnswer",value:function(e){return null!==e&&this.props.surveyData.currentAnswer&&this.props.surveyData.currentAnswer.find((function(t){return t===e}))}},{key:"onSelectAnswer",value:function(e,t){if(!(0,m.BC)(t)){var r=this.props.surveyData.currentAnswer;r&&r.length>0&&e===r[0]?this.props.setSurveyAnswer(null):this.props.setSurveyAnswer([e])}}},{key:"componentDidMount",value:function(){(0,m.IR)()&&void 0!==this.props.currentQuestionIndex&&0!==this.props.currentQuestionIndex&&this.refs&&this.refs.surveyQuesOptions&&this.refs.surveyQuesOptions.firstChild&&V.findDOMNode(this.refs.surveyQuesOptions.firstChild).focus()}},{key:"componentDidUpdate",value:function(e){(0,m.IR)()&&void 0!==this.props.currentQuestionIndex&&0!==this.props.currentQuestionIndex&&this.refs&&this.refs.surveyQuesOptions&&this.refs.surveyQuesOptions.firstChild&&e.surveyData.currentQuestionObject.choices!==this.props.surveyData.currentQuestionObject.choices&&V.findDOMNode(this.refs.surveyQuesOptions.firstChild).focus()}},{key:"render",value:function(){var e=this,t=this.props.surveyData.currentQuestionObject.text,r=this.props.translations["SURVEY.OPTIONS_SINGLE_HEADING"];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(A.Z,{classes:{root:"survey-instructions"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_400",id:"selection-text",children:r}),(0,_.jsx)("div",{className:"survey-options-container",ref:"surveyQuesOptions","aria-label":t+" "+r,role:"group",children:this.props.surveyData.currentQuestionObject.choices&&this.props.surveyData.currentQuestionObject.choices.map((function(t){return(0,_.jsxs)(C.Z,{role:"checkbox",tabIndex:"0",classes:{root:"survey-options-wrapper"},"aria-checked":e.checkIfSelectedAnswer(t.value)===t.value,order:t.order,value:t.value.toString(),className:e.checkIfSelectedAnswer(t.value)?"selected-answer ".concat((0,m.wG)()?" selected-answer-color-accessible":""):"",onClick:function(){return e.onSelectAnswer(t.value)},onKeyPress:function(r){return e.onSelectAnswer(t.value,r)},children:[(0,_.jsx)("span",{className:"checkmark","aria-hidden":"true",children:"\u2713"}),(0,_.jsx)(A.Z,{classes:{root:"survey-options-text"},children:t.text})]},t.order)}))})]})}}]),r}(u.Component),Z=(0,l.$j)((function(e){return{surveyData:e.surveyData,translations:e.translationsData.data,configs:e.configs}}),(function(e){return{setSurveyAnswer:function(t){e((0,y.S1)(t))}}}))(Q),M=r(1550),U=r(54299),Y=r(83929),O=r(74268),L=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"onSelectAnswer",value:function(e){if("change"===e.type){var t=this.props.isWebComponent?e.path[0].value:e.target.value,r=this.props.surveyData.currentAnswer;r&&r.length>0&&t===r[0]?this.props.setSurveyAnswer(null):this.props.setSurveyAnswer([t])}}},{key:"render",value:function(){var e=this,t=this.props,r=t.translations,s=t.surveyData,n=s.currentQuestionIndex,a=s.currentAnswer,o=s.currentQuestionObject.choices,i=b.wY4.SURVEY,c=a&&a.length>0&&o.find((function(e){return e.value===a[0]})),u=this.props.surveyData.currentQuestionObject.text,l=r["SURVEY.CHOOSE_ONE"];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"survey-dropdown-header"+(a&&a.length>0?"":" choose-one"),"data-widget-name":i,"data-bg-color":"background_300","data-text-color":"foreground_500","data-border-color":"background_500","aria-hidden":"true",children:a&&c?c.text:r["SURVEY.CHOOSE_ONE"]}),(0,_.jsx)("div",{className:"survey-options-dropdown","data-widget-name":i,"data-bg-color":"background_300","data-border-color":"background_500",children:(0,_.jsx)(M.Z,{component:"fieldset",children:(0,_.jsx)(U.Z,{role:"group","aria-label":u+" "+l,name:"options",value:a&&a.length>0?a[0]:null,onChange:function(t){return e.onSelectAnswer(t)},children:o.map((function(t,r){return(0,_.jsx)(Y.Z,{value:t.value,disableRipple:!0,color:"default","data-widget-name":i,"data-text-color":"foreground_500",label:(0,_.jsx)("span",{"aria-hidden":"true",children:t.text}),control:(0,_.jsx)(O.Z,{classes:{root:"radio ".concat((0,m.IR)()?"ada-focus":""," "),checked:"selected"},"data-widget-name":i,"data-text-color":"foreground_400","data-active-color":"primary_500",autoFocus:0===r&&void 0!==e.props.currentQuestionIndex&&0!==e.props.currentQuestionIndex,inputProps:{"aria-label":t.text,tabIndex:"0"}}),classes:{root:"form-control-root",label:"label"}},t.value+" "+n)}))})})})]})}}]),r}(u.Component),B=(0,l.$j)((function(e){return{surveyData:e.surveyData,translations:e.translationsData.data}}),(function(e){return{setSurveyAnswer:function(t){e((0,y.S1)(t))}}}))(L),F=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"checkIfSelectedAnswer",value:function(e){return null!==e&&this.props.surveyData.currentAnswer?this.props.surveyData.currentAnswer.findIndex((function(t){return t===e})):-1}},{key:"componentDidMount",value:function(){(0,m.IR)()&&void 0!==this.props.currentQuestionIndex&&0!==this.props.currentQuestionIndex&&this.refs&&this.refs.surveyQuesOptions&&this.refs.surveyQuesOptions.firstChild&&V.findDOMNode(this.refs.surveyQuesOptions.firstChild).focus()}},{key:"componentDidUpdate",value:function(e){(0,m.IR)()&&void 0!==this.props.currentQuestionIndex&&0!==this.props.currentQuestionIndex&&this.refs&&this.refs.surveyQuesOptions&&this.refs.surveyQuesOptions.firstChild&&e.surveyData.currentQuestionObject.choices!==this.props.surveyData.currentQuestionObject.choices&&V.findDOMNode(this.refs.surveyQuesOptions.firstChild).focus()}},{key:"onSelectAnswer",value:function(e,t){if(!(0,m.BC)(t)){var r="none",n=this.props.surveyData.currentAnswer,a=n?(0,s.Z)(n):[];if(e===r)a=n&&n[0]===r?[]:[r];else if(1===a.length&&a[0]===r)a=[e];else{var o=this.checkIfSelectedAnswer(e);o>-1?a.splice(o,1):a.push(e)}a=a&&0===a.length?null:a,this.props.setSurveyAnswer(a)}}},{key:"render",value:function(){var e=this,t=this.props.surveyData.currentQuestionObject.text,r=this.props.translations["SURVEY.OPTIONS_MCQ_HEADING"];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(A.Z,{classes:{root:"survey-instructions"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_400",children:r}),(0,_.jsx)("div",{className:"survey-options-container",ref:"surveyQuesOptions","aria-label":t+" "+r,role:"group",children:this.props.surveyData.currentQuestionObject.choices.map((function(t){return(0,_.jsxs)(C.Z,{role:"checkbox",tabIndex:"0",classes:{root:"survey-options-wrapper"},order:t.order,value:t.value.toString(),className:-1!==e.checkIfSelectedAnswer(t.value)?"selected-answer ".concat((0,m.wG)()?" selected-answer-color-accessible":""):"","aria-checked":-1!==e.checkIfSelectedAnswer(t.value),onClick:function(){return e.onSelectAnswer(t.value)},onKeyPress:function(r){return e.onSelectAnswer(t.value,r)},"aria-label":t.text,children:[(0,_.jsx)("span",{className:"checkmark","aria-hidden":"true",children:"\u2713"}),(0,_.jsx)(A.Z,{classes:{root:"survey-options-text"},children:t.text})]},t.order)}))})]})}}]),r}(u.Component),P=(0,l.$j)((function(e){return{surveyData:e.surveyData,translations:e.translationsData.data,configs:e.configs}}),(function(e){return{setSurveyAnswer:function(t){e((0,y.S1)(t))}}}))(F),q=r(16429),W=r(44758),G=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"checkIfSelectedAnswer",value:function(e){return null!==e&&this.props.surveyData.currentAnswer?this.props.surveyData.currentAnswer.findIndex((function(t){return t===e})):-1}},{key:"onChecked",value:function(e){if("change"===e.type){var t=e.target.value;this.onSelectAnswer(t)}}},{key:"onSelectAnswer",value:function(e){var t="none",r=this.props.surveyData.currentAnswer,n=r?(0,s.Z)(r):[];if(e===t)n=r&&r[0]===t?[]:[t];else if(1===n.length&&n[0]===t)n=[e];else{var a=this.checkIfSelectedAnswer(e);a>-1?n.splice(a,1):n.push(e)}n=n&&0===n.length?null:n,this.props.setSurveyAnswer(n)}},{key:"render",value:function(){var e=this,t=this.props,r=t.translations,s=t.surveyData,n=s.currentQuestionIndex,a=s.currentAnswer,o=s.currentQuestionObject.choices,i=b.wY4.SURVEY,c=this.props.surveyData.currentQuestionObject.text,u=r["SURVEY.CHECK_ALL"],l=function(e){return o.find((function(t){return t.value===e})).text};return(0,_.jsxs)(_.Fragment,{children:[a&&a.length>0&&(0,_.jsx)("div",{className:"survey-multiple-answer-list","aria-label":r["DASHBOARD.SURVEY.DROPDOWN_LIST_LABEL"],role:"group",children:a.map((function(t){return(0,_.jsxs)("div",{className:"survey-multiple-answer",children:[(0,_.jsx)("span",{className:"answer","aria-hidden":"true",children:l(t)}),(0,_.jsx)("button",{className:"cross",onClick:function(){return e.onSelectAnswer(t)},"aria-label":r["DASHBOARD.SURVEY.REMOVE_BTN_LABEL"]+l(t),children:"x"})]},t+" "+n)}))}),(0,_.jsx)("div",{className:"survey-dropdown-header multiple","data-widget-name":i,"data-bg-color":"background_300","data-text-color":"foreground_500","data-border-color":"background_500",children:u}),(0,_.jsx)("div",{className:"survey-options-dropdown multiple","data-widget-name":i,"data-bg-color":"background_300","data-border-color":"background_500",children:(0,_.jsx)(M.Z,{component:"fieldset",role:"group","aria-label":c+" "+u,children:(0,_.jsx)(q.Z,{children:o.map((function(t,r){return(0,_.jsx)(Y.Z,{"data-widget-name":i,"data-text-color":"foreground_500",classes:{root:"form-control-root multiple",label:"label"},label:(0,_.jsx)("span",{"aria-hidden":"true",children:t.text}),control:(0,_.jsx)(W.Z,{classes:{root:"checkbox ".concat((0,m.IR)()?"ada-focus":""),checked:"selected"},checked:a&&-1!==a.findIndex((function(e){return e===t.value})),value:t.value,inputProps:{"aria-label":t.value},onChange:function(t){return e.onChecked(t)},name:t.value,"data-widget-name":i,"data-text-color":"foreground_400","data-active-color":"primary_500",autoFocus:0===r&&void 0!==e.props.currentQuestionIndex&&0!==e.props.currentQuestionIndex})},r+" "+n)}))})})})]})}}]),r}(u.Component),H=(0,l.$j)((function(e){return{surveyData:e.surveyData,translations:e.translationsData.data}}),(function(e){return{setSurveyAnswer:function(t){e((0,y.S1)(t))}}}))(G),z=r(42461),K=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"isNumberQues",value:function(){return"NUMBER"===this.props.surveyData.currentQuestionObject.type}},{key:"onAnswerChange",value:function(e){var t=e.target.value;if(this.isNumberQues()){if(!t)return void this.props.setSurveyAnswer([""]);if(t&&t.indexOf(".")!=t.length-1&&!this.isNumericVal(t))return void(e.target.value=t.length>1?this.props.surveyData.currentAnswer:"");!isNaN(t)&&this.props.setSurveyAnswer([t.trim()])}else this.props.setSurveyAnswer([t])}},{key:"isNumericVal",value:function(e){return/^-{0,1}\d*\.{0,1}\d+$/.test(e)}},{key:"render",value:function(){var e=this,t=this.props.translations["DASHBOARD.PLACEHOLDER.ENTER"],r=this.props.surveyData.currentAnswer,s=this.props.surveyData.currentQuestionObject.text;return(0,_.jsx)("div",{className:"survey-options-container","data-widget-name":b.wY4.SURVEY,"data-border-color":"primary_500","data-bg-color":"background_300","data-text-color":"3",children:(0,_.jsx)(M.Z,{classes:{root:"survey-answer-input-wrapper"},children:(0,_.jsx)(z.Z,{ref:"surveyInputQuestion",autoFocus:(0,m.IR)()?"true":" false",value:r&&r.length?r[0]:"",onChange:function(t){return e.onAnswerChange(t)},inputProps:{maxLength:this.isNumberQues()?7:"auto","aria-label":s},placeholder:t,classes:{input:"survey-answer-input",root:"survey-answer-input-outline",underline:"survey-answer-input-underline"}})})})}}]),r}(u.Component),J=(0,l.$j)((function(e){return{surveyData:e.surveyData,translations:e.translationsData.data}}),(function(e){return{setSurveyAnswer:function(t){e((0,y.S1)(t))}}}))(K),$=r(34862),X=r(29439),ee=r(31685),te=r(22548);function re(e){var t=u.useState(!1),r=(0,X.Z)(t,2),s=r[0],n=r[1];return(0,_.jsx)(ee.Z,{onClickAway:function(){n(!1)},children:(0,_.jsx)(M.Z,{variant:"outlined",className:"survey-dropdown",disabled:!e.selected,children:(0,_.jsx)(te.Z,{native:!0,classes:{select:"survey-dropdown-select",icon:"survey-dropdown-select-icon"},inputProps:{"aria-label":e.ariaLabel},value:e.subchoice.selected,onChange:function(t){return e.onDropdownValueChange(t,e.choiceOrder,e.subchoice.order,e.subchoice.value)},onClick:function(){n(!s)},open:s,children:e.subchoice.allowedValuesMap.map((function(t,r){return(0,_.jsx)("option",{value:t.value,disabled:!(r>=e.subchoice.minAllowedIndex&&r<=e.subchoice.maxAllowedIndex),children:t.text},t.value)}))})})})}var se=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(e){var s;return(0,a.Z)(this,r),(s=t.call(this,e)).state={choices:[]},s}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){this.fetchOptionsForQuestions(this.props.surveyData.currentQuestionObject)}},{key:"componentWillUnmount",value:function(){var e=(0,s.Z)(this.props.surveyData.currentAnswer),t=Object.assign(this.props.surveyData.currentAnswerMap,{}),r=this.props.surveyData.currentQuestionObject.id;this.state.choices.forEach((function(r){if(!r.selected){var s=r.subchoices.map((function(r){return r.selected=null,e[r.order-1]=null,t[r.value]=null,r}));r.subchoices=s}})),this.props.changeAnswerWithId({id:r,answers:e,answersMap:t})}},{key:"fetchOptionsForQuestions",value:function(e){var t=this,r=[],s=0;e.choices.forEach((function(t){if(null===t.parent)r.push({order:t.order,text:t.text,value:t.value,subchoices:[],selected:e.valueSelectionMap[t.value]===t.value,subchoiceValidationType:t.subChoiceValidationType}),s=0;else{var n=r.findIndex((function(e){return e.value===t.parent.parentValue})),a=t.allowedValues.map((function(e){return{value:e,text:t.allowedValuesMap[e],disabled:!1}})),o=e.valueSelectionMap[t.value]||(r[n].subchoiceValidationType===b.Pzc.ASC_ALLOWED_VALUES?t.allowedValues[s]:t.allowedValues[0]);r[n].subchoices.push({order:t.order,allowedValuesMap:a,value:t.value,selectiontype:t.selectionType,selectedIndex:a.findIndex((function(e){return e.value===o})),selected:o,minAllowedIndex:0,maxAllowedIndex:a.length-1}),s++}})),r.map((function(e){return t.setDropdownDisabledValues(e)})),this.setState({choices:r})}},{key:"setDropdownDisabledValues",value:function(e){var t=e.subchoices;e.subchoiceValidationType===b.Pzc.ASC_ALLOWED_VALUES&&(t[0].maxAllowedIndex=t[0].allowedValuesMap.length-2,"12:00 AM"===t[0].selected?t[1].minAllowedIndex=t[0].selectedIndex:(t[0].selectedIndex>=t[1].selectedIndex&&(t[1].selectedIndex=t[0].selectedIndex+1,t[1].selected=t[1].allowedValuesMap[t[1].selectedIndex].value),t[1].minAllowedIndex=t[0].selectedIndex+1))}},{key:"onDropdownValueChange",value:function(e,t,r){var s=e.target.value,n=this.state.choices,a=n.findIndex((function(e){return e.order===t})),o=n[a].subchoices,i=o.findIndex((function(e){return e.order===r}));o[i].selected=s,o[i].selectedIndex=o[i].allowedValuesMap.findIndex((function(e){return e.value===s})),this.setDropdownDisabledValues(n[a]),this.setState({choices:n});for(var c=0;c<o.length;c++)this.setAnswer(o[c].selected,o[c].order,o[c].value)}},{key:"onCheckboxValueChange",value:function(e,t){if("change"===e.type){var r=this.state.choices.findIndex((function(e){return e.order===t})),s=this.state.choices,n=s[r].subchoices;if(s[r].selected=!s[r].selected,s[r].selected&&n&&n.length>0){for(var a=0;a<n.length;a++)if(null===this.props.surveyData.currentAnswerMap[n[a].value]){var o=s[r].subchoiceValidationType===b.Pzc.ASC_ALLOWED_VALUES?a:0;n[a].selected=n[a].allowedValuesMap[o].value,n[a].selectedIndex=o,this.setAnswer(n[a].selected,n[a].order,n[a].value)}}else if(!s[r].selected&&n&&n.length>0)for(var i=0;i<n.length;i++)this.setAnswer(null,n[i].order,n[i].value);this.setDropdownDisabledValues(s[r]),this.setState({choices:s}),this.setAnswer(s[r].selected?s[r].value:null,t,s[r].value)}}},{key:"setAnswer",value:function(e,t,r){var s=this.props.surveyData.currentAnswer;s[t-1]=e;var n=this.props.surveyData.currentAnswerMap;n[r]=e,this.props.setSurveyAnswersWithMap({currentAnswer:s,currentAnswerMap:n})}},{key:"render",value:function(){var e=this,t=this.state.choices,r=this.props.surveyData.currentQuestionObject.text;return(0,_.jsx)("div",{className:"survey-options-container","aria-label":r,role:"group",children:t.map((function(t,r){return(0,_.jsxs)(C.Z,{classes:{root:"survey-options-wrapper survey-options-dropdowns-wrapper ".concat($.w1?"ie":"")},children:[(0,_.jsx)(Y.Z,{control:(0,_.jsx)(W.Z,{value:t.value,color:"primary",name:t.value,classes:{root:"survey-checkbox ".concat((0,m.IR)()?"ada-focus":""),colorPrimary:"filter-checkboxes",checked:"checked"},onChange:function(r){return e.onCheckboxValueChange(r,t.order)},checked:t.selected,autoFocus:0===r,inputProps:{"aria-label":t.value}}),label:(0,_.jsx)("span",{"aria-hidden":"true",children:t.text}),classes:{root:"survey-checkbox-label ".concat($.w1?"ie":""),label:"survey-checkbox-label-span"}}),t.subchoices.length>0&&(0,_.jsx)("div",{className:"survey-dropdown-container ".concat($.w1?"ie":""),children:t.subchoices.map((function(r,s){return(0,_.jsxs)(u.Fragment,{children:[s>0&&(0,_.jsx)("span",{className:"survey-checkbox-text-separator"+(t.selected?" selected":""),"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_700",children:e.props.translations["SURVEY.SUBCHOICES.SEPARATOR"]}),r.selectionType===b.gqn.LIST,(0,_.jsx)(re,{selected:t.selected,choiceOrder:t.order,subchoice:r,ariaLabel:r.value,onDropdownValueChange:function(s){return e.onDropdownValueChange(s,t.order,r.order,r.value)}})]},s)}))})]},t.order)}))})}}]),r}(u.Component),ne=(0,l.$j)((function(e){return{translations:e.translationsData.data,surveyData:e.surveyData}}),(function(e){return{setSurveyAnswersWithMap:function(t){e((0,y.nd)(t))},changeAnswerWithId:function(t){e((0,y.DB)(t))}}}))(se),ae=r(19615);function oe(e){var t=e.configs.data["SURVEY.SHOW_DASHBOARD_LINK"],r=e.surveyData,s=r.surveyQuestionsData,n=r.currentQuestionIndex,a=r.currentQuestionObject,o=r.surveyFinished,i=r.surveyDisaggStatus,c=r.isSurveyLoading,u=r.sliderValue,l=r.surveyAnswers,d=r.isDisaggRunning,p=r.totalAvailableQuestions,h=a&&p&&a.id===p[p.length-1].id,v=ae.V.getColors().colors,g=e.isMobileView,f=e.isWebComponent,y=(0,m.Z7)(e.widgetStrings.surveyProgressLabel,{percent:u}),x=e.widgetStrings.header,w=null!==e.bannerDisaggStatus&&e.bannerDisaggStatus!==b.Sxd.SUCCESS,S=w?e.widgetStrings.apiTimeout:e.widgetStrings.apiSuccess;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(D.Z,{classes:{root:"survey-outer-container"},role:"region","aria-label":x,children:[(0,_.jsxs)(A.Z,{classes:{root:"survey-page-title"},"data-widget-name":b.wY4.SURVEY,"data-border-color":"background_300",children:[(0,_.jsx)("span",{className:"title","data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500",children:x}),(a||o)&&!e.isDisaggLoading&&t&&!f&&(0,_.jsx)("button",{"data-widget-name":b.wY4.SURVEY,"aria-label":e.translations["DASHBOARD.LABEL.CLOSE"],"data-icon-color":"foreground_500","data-border-color":"foreground_500",onClick:function(t){return e.triggerDisagg(t,"Close")},"aria-pressed":function(t){return e.triggerDisagg(t,"Close")},className:"survey-close",children:(0,_.jsx)(I.Z,{classes:{root:"close-icon"},"aria-hidden":"true"})})]}),e.showAlertBanner?(0,_.jsx)(R,{widgetName:b.wY4.SURVEY,translations:e.translations,bannerbgColor:"rgb(".concat(w?v["--bgl_red_500"]:v["--bgl_green_500"],")"),iconClassName:w?"survey-failed-icon":"survey-success-icon",cssClassName:w?"survey-failed":"survey-success",message:S,handleBannnerClose:e.handleBannnerClose}):"",s.length>0&&(0,_.jsxs)(C.Z,{classes:{root:"survey-container",elevation1:"survey-container"},"data-widget-name":b.wY4.SURVEY,"data-bg-color":"background_300",children:[a&&!o&&(0,_.jsxs)(_.Fragment,{children:[a.text&&(0,_.jsx)(A.Z,{classes:{root:"survey-question"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500",children:(0,_.jsx)("span",{className:"subheading",children:a.text})}),(0,_.jsxs)("div",{role:"group",children:[a.type===b.bMh.MULTIPLE_WITH_SUB_CHOICES&&a.questionTemplate===b.BMs.SUB_CHOICE_DROP_DOWN&&(0,_.jsx)(ne,{isWebComponent:f,currentQuestionIndex:n}),a.type===b.bMh.SINGLE&&!a.questionTemplate&&(0,_.jsx)(Z,{isWebComponent:f,currentQuestionIndex:n,surveyCompletedText:y}),a.type===b.bMh.SINGLE&&a.questionTemplate===b.BMs.DROP_DOWN&&(0,_.jsx)(B,{currentQuestionIndex:n}),a.type===b.bMh.MULTIPLE&&!a.questionTemplate&&(0,_.jsx)(P,{currentQuestionIndex:n,surveyCompletedText:y}),a.type===b.bMh.MULTIPLE&&a.questionTemplate===b.BMs.DROP_DOWN&&(0,_.jsx)(H,{currentQuestionIndex:n,isWebComponent:f},a.id),(a.type===b.bMh.NUMBER||"TEXT"===a.type)&&(0,_.jsx)(J,{})]}),(0,_.jsxs)("div",{className:"survey-buttons",children:[(0,_.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_300","data-hover-color":"primary_500","data-hover-text-color":"foreground_300","data-bg-color":"primary_500","data-disabled-bg-color":"background_600","data-disabled-text-color":"foreground_300",children:(0,_.jsx)(j.Z,{btnText:e.widgetStrings.btnPrevious,textColor:"rgb(".concat(v["--foreground_300"],")"),hoverColor:"rgb(".concat(v["--primary_500"],")"),hoverTextColor:"rgb(".concat(v["--foreground_300"],")"),btnBackground:"rgb(".concat(v["--primary_500"],")"),borderColor:"transparent",cssClassName:"btn-previous".concat(g&&" mobile"," ").concat((0,m.wG)()?0===l.length?" color-accessible-disabled":" color-accessible":""),onClick:function(){return e.onClickPrev()},disabled:0===l.length,btnTextTransform:"none"})}),(0,_.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_300","data-hover-color":"primary_500","data-hover-text-color":"foreground_300","data-bg-color":"primary_500",children:(0,_.jsx)(j.Z,{btnText:h?e.widgetStrings.btnFinish:e.widgetStrings.btnNext,btnBackground:"rgb(".concat(v["--primary_500"],")"),textColor:"rgb(".concat(v["--foreground_300"],")"),hoverTextColor:"rgb(".concat(v["--foreground_300"],")"),hoverColor:"rgb(".concat(v["--primary_500"],")"),borderColor:"transparent",cssClassName:"btn-next".concat(g&&" mobile"," ").concat((0,m.wG)()?" color-accessible":""),onClick:function(){return e.onClickNext()},btnTextTransform:"none"})})]}),(a||o)&&!i&&!c&&(0,_.jsxs)("div",{className:"survey-progress",children:[(0,_.jsx)("span",{className:"survey-progress-slider-title","aria-label":(0,m.Z7)(e.translations.SURVEY_COMPLETION_PERCENT,{percent:u}),style:{left:u+"%"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"primary_600",children:u+"%"}),(0,_.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-icon-color":"primary_300",children:(0,_.jsx)(E.ZP,{size:"small",disabled:!!m.IR,value:u,classes:{root:"survey-progress-slider",thumb:"survey-progress-slider-thumb",track:"".concat((0,m.wG)()?"survey-progress-slider-track-accessible":"survey-progress-slider-track"),rail:"survey-progress-slider-rail"}})})]})]}),(0,_.jsxs)("div",{"aria-live":"polite",children:[!i&&o&&!c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(A.Z,{classes:{root:"survey-end-text-header"},"data-widget-name":b.wY4.SURVEY,"data-bg-color":"background_500",children:e.widgetStrings.finishHeader}),(0,_.jsx)(A.Z,{classes:{root:"survey-end-text-content"},"data-widget-name":b.wY4.SURVEY,"data-bg-color":"background_500",children:e.widgetStrings.finishMessage})]}),i===b.Sxd.FAILURE||i===b.Sxd.TIMEOUT?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(A.Z,{classes:{root:"disagg-failed"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500","data-bg-color":"background_300",children:(0,_.jsx)("span",{children:e.widgetStrings.disaggTimeout})})}):c&&(0,_.jsxs)("div",{className:"disagg-running-container",children:[(0,_.jsxs)(A.Z,{classes:{root:"disagg-running"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500",children:[e.widgetStrings.progressHeader,(0,_.jsx)("br",{}),e.widgetStrings.progressFooter]}),(0,_.jsx)("div",{className:"disagg-running-loader",children:(0,_.jsx)(k.Z,{})}),(0,_.jsx)(A.Z,{classes:{root:"disagg-running text-bottom"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500",children:e.widgetStrings.progressDisclaimer})]}),o&&!i&&!c&&(0,_.jsxs)("div",{className:"survey-progress",children:[(0,_.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-icon-color":"primary_400",children:(0,_.jsx)(E.ZP,{size:"small",disabled:!!m.IR,value:u,classes:{root:"survey-progress-slider",thumb:"survey-progress-slider-thumb",track:"".concat((0,m.wG)()?"survey-progress-slider-track-accessible":"survey-progress-slider-track"),rail:"survey-progress-slider-rail"}})}),(0,_.jsx)("span",{className:"survey-progress-slider-title","aria-hidden":"true",style:{left:u+"%"},"data-widget-name":b.wY4.SURVEY,"data-text-color":"primary_600",children:u+"%"}),(0,_.jsx)("span",{className:"percent-completed",children:y})]}),o&&!i&&t&&!c&&(0,_.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-bg-color":"primary_500","data-text-color":"foreground_300","data-disabled-bg-color":"background_400","data-disabled-text-color":"foreground_300",children:(0,_.jsx)(j.Z,{btnText:e.widgetStrings.btnDashboardLink,btnBackground:"rgb(".concat(v["--primary_500"],")"),textColor:"rgb(".concat(v["--foreground_300"],")"),hoverTextColor:"rgb(".concat(v["--foreground_300"],")"),hoverColor:"rgb(".concat(v["--primary_500"],")"),borderColor:"transparent",cssClassName:"btn-go-to-dashboard ".concat((0,m.wG)()?" color-accessible":""),onClick:function(t){return e.triggerDisagg(t,"Return to Insights")},btnTextTransform:"none"})})]})]})]}),f||!t||o&&(!o||d)||i===b.Sxd.TIMEOUT||i===b.Sxd.FAILURE?"":(0,_.jsx)("div",{className:"survey-navbar-block","data-widget-name":b.wY4.SURVEY,"data-bg-color":"background_300"})]})}var ie=r(74813),ce=r(76720),ue=r(62791),le=r(61939),de=r(21629),pe=r(21911),he=function(e){(0,i.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).intervalFunc=null,e.startTime=null,e.endTime=null,e.state={isDisaggLoading:!1,lastLocation:S.$d,isNextCliked:!1,showAlertBanner:!1,bannerDisaggStatus:null},e.isWebComponent=e.context.runMode===b.K8z,e.handleBannnerClose=function(){e.setState({showAlertBanner:!1,bannerDisaggStatus:null})},e}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){var e=(0,m.Y$)(this.props.session,this.props.configs.data),t=S.nQ[e[0]].to;if((0,m.Iw)("SURVEY_PAGE.TITLE",this.props.translations.data,this.props.configs.data),this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{viewed:!0,shown:"Survey Page"},this.props),!this.isWebComponent){var r=this.context.rc.analytics.getLastLocation();this.setState({lastLocation:r.pathname===S.ce?t:r.pathname})}this.init()}},{key:"init",value:function(){this.props.clearSurveyData(),this.props.fetchSurveyData(this.context.rc,this.props.session.userProfile.userId,this.props.configs.locale,(0,ie.JF)()&&"".concat(b.wY4.SURVEY,".FETCH_SURVEY_DATA"))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.surveyData&&this.props.surveyData.surveyQuestionsData.length&&!e.surveyData.currentQuestionObject&&!this.props.surveyData.surveyFinished){var r=(0,x.xu)(this.props.location),s=this.getQuestionIndexFromQueId(r.questionId),a=[];this.props.surveyData.surveyQuestionsData.forEach((function(e,t){t<s&&a.push({questionId:e.id,value:e.answers,valueMap:e.valueSelectionMap})})),this.props.updateSurveyCurrentQuestion({currentQuestionObject:this.props.surveyData.surveyQuestionsData[s],currentQuestionIndex:s,currentAnswer:this.props.surveyData.surveyQuestionsData[s].answers,currentAnswerMap:this.props.surveyData.surveyQuestionsData[s].valueSelectionMap,surveyAnswers:a})}if(this.props.surveyData.currentQuestionIndex&&this.props.surveyData.currentQuestionIndex!==e.surveyData.currentQuestionIndex||!this.props.surveyData.currentQuestionIndex&&this.props.surveyData.surveyFinished&&e.surveyData.currentQuestionIndex){var o=this.props.surveyData.surveyAnswers,i=e.surveyData,c=(0,n.Z)((0,n.Z)({},i.surveyAnswers[i.surveyAnswers.length-1]),{},{value:i.currentAnswer,questionId:i.currentQuestionObject.id,valueSelectionMap:i.currentAnswerMap}),u=this.state.isNextCliked?o[o.length-1]:c;this.submitAnswer(u,e.surveyData.currentQuestionObject)}this.props.surveyData.surveySubmissionTimestamp&&this.props.surveyData.surveySubmissionTimestamp!==e.surveyData.surveySubmissionTimestamp&&(this.startTime=(new Date).getTime(),this.intervalFunc=setInterval((function(){return t.checkIfDisaggFinished()}),2e3)),this.props.surveyData.surveyDisaggStatus&&this.props.surveyData.surveyDisaggStatus!==b.Sxd.PENDING&&this.props.surveyData.surveyDisaggStatus!==e.surveyData.surveyDisaggStatus&&(this.endTime=(new Date).getTime(),clearInterval(this.intervalFunc),this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{type:"hybridDisaggRunTime",startTime:this.startTime,endTime:this.endTime,duration:(this.endTime-this.startTime)/1e3,timedOut:this.props.surveyData.surveyDisaggStatus===b.Sxd.TIMEOUT,success:this.props.surveyData.surveyDisaggStatus===b.Sxd.SUCCESS,widget:b.wY4.SURVEY}),this.isWebComponent&&this.setState({showAlertBanner:!0,bannerDisaggStatus:this.props.surveyData.surveyDisaggStatus}),this.props.surveyData.surveyDisaggStatus!==b.Sxd.SUCCESS&&this.props.surveyData.surveyDisaggStatus!==b.Sxd.TIMEOUT||!this.props.widgetConfigs.showLinkToDashboard||this.props.surveyData.surveyDisaggStatus===b.Sxd.SUCCESS&&(this.props.resetData(),setTimeout((function(){t.isWebComponent&&ue.bs.broadcast(ue.FP.RELOAD_WIDGET),t.goToPreviousPage(t.props,t.state.lastLocation)}),100))),this.isWebComponent&&e.surveyData.isDisaggRunning&&!this.props.surveyData.isDisaggRunning&&this.init()}},{key:"componentWillUnmount",value:function(){this.intervalFunc&&clearInterval(this.intervalFunc),this.props.clearSurveyData()}},{key:"triggerFileUpload",value:function(){this.props.saveSurveyData(this.context.rc,[],this.props.session.userProfile.userId,(0,ie.JF)()&&b.wY4.SURVEY,!0)}},{key:"submitAnswer",value:function(e,t){var r=e.length>1?e[e.length-1]:e,s=t.answers;if((0,w.Yk)(r,s,t))return null;if(this.props.changeOriginalAns(t.order),this.props.widgetConfigs.canDeselectAnswer){var n=!1;s&&s.forEach((function(e){r.value&&r.value.includes(e)||(n=!0)})),r.deselect=n}r.value=r.value||[],this.props.saveSurveyData(this.context.rc,[r],this.props.session.userProfile.userId,(0,ie.JF)()&&"".concat(b.wY4.SURVEY,".SAVE_SURVEY_ANSWER"))}},{key:"onClickNext",value:function(){var e=this.props.surveyData.currentQuestionObject;(this.setState({isNextCliked:!0}),this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{clicked:e.type===b.bMh.MULTIPLE?"Save and Continue":"Next",questionId:e.id,questionType:e.type,questionGroup:e.group,questionStateOriginal:e.state,timestamp:(new Date).getTime(),answers:JSON.stringify(e.answers),confirmed:e.type===b.bMh.SINGLE,questionStateNew:e.answers?"ANSWERED"===e.state?"updated":"answered":"unanswered",widget:b.wY4.SURVEY}),this.context.rc.analytics.trackGtmEvent("action-click",{pageName:b.FiA.SURVEY,click:"next",questionId:e.id}),this.props.surveyData.currentQuestionIndex===this.props.surveyData.surveyQuestionsData.length)&&(this.setState({isDisaggLoading:!0}),this.props.surveyData.surveyAnswers.filter((function(e){return null===e.value})).length>0?this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{isSurveyViewed:!0,widget:b.wY4.SURVEY}):(this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{isSurveyCompleted:!0,widget:b.wY4.SURVEY}),this.context.rc.analytics.trackGtmEvent("action-survey-complete",{pageName:b.FiA.SURVEY,isSurveyCompleted:!0})));this.isWebComponent&&this.state.showAlertBanner&&this.handleBannnerClose(),this.props.nextSurveyQuestion()}},{key:"checkIfDisaggFinished",value:function(){this.props.surveyData.surveySubmissionTimestamp?this.props.checkIfDisaggFinished(this.context.rc,this.props.session.userProfile.userId,this.props.surveyData.surveySubmissionTimestamp,(0,m.nY)(this.props.session.userProfile.fuelType),(0,ie.JF)()&&"".concat(b.wY4.SURVEY,".CHECK_DISAGG_STATUS")):clearInterval(this.intervalFunc)}},{key:"goToPreviousPage",value:function(e,t,r){if(this.isWebComponent){var s=e.widgetConfigs.dashboardNavUrl;(0,x.K2)(s)?window.open(s):(0,x.m3)(de.Z$.SURVEY,this.props.history,this.props.location,r,s)}else{var n=(0,x.yC)(window.location.search,["question-id","focus-on-element"]),a=t||(n?"?"+n:"");e.history.push(a)}}},{key:"onClickPrev",value:function(){if(0!==this.props.surveyData.surveyAnswers.length){var e=this.props.surveyData.currentQuestionObject;this.setState({isNextCliked:!1}),this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{clicked:"Previous",questionId:e.id,questionType:e.type,questionGroup:e.group,questionStateOriginal:e.state,timestamp:(new Date).getTime(),answers:JSON.stringify(e.answers),confirmed:e.type===b.bMh.SINGLE,widget:b.wY4.SURVEY}),this.context.rc.analytics.trackGtmEvent("action-click",{pageName:b.FiA.SURVEY,click:"previous",questionId:e.id}),this.props.prevSurveyQuestion()}}},{key:"triggerDisagg",value:function(e,t){var r=this.props.surveyData;if(this.setState({isDisaggLoading:!0}),this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{clicked:t,widget:b.wY4.SURVEY}),0===r.currentQuestionIndex&&!r.surveyFinished&&this.props.widgetConfigs.showLinkToDashboard)this.goToPreviousPage(this.props,this.state.lastLocation,e);else if(r.currentQuestionObject){var n=(0,s.Z)(r.surveyAnswers);n.push({questionId:r.currentQuestionObject.id,value:r.currentAnswer,valueSelectionMap:r.currentAnswerMap}),this.submitAnswer(n,r.currentQuestionObject)}if(this.props.configs.data.triggerSurveyFileUpload&&this.triggerFileUpload(),!r.hasUpdatedSurvey)return this.goToPreviousPage(this.props,this.state.lastLocation,e),void(this.isWebComponent&&this.init());this.props.callDisaggApi(this.context.rc,this.props.session.userProfile.userId,(0,ie.JF)()&&"".concat(b.wY4.SURVEY,".CALL_DISAGG"))}},{key:"getQuestionIndexFromQueId",value:function(e){var t=this.props.surveyData.surveyQuestionsData,r=t.findIndex((function(t){return t.id===e}));return t[r]&&t[r].parent&&t[r].parent.id&&this.checkIfParentQuestionIsUnanswered(t[r].parent.id)&&(r=this.getQuestionIndexFromQueId(t[r].parent.id)),r>0?r:0}},{key:"checkIfParentQuestionIsUnanswered",value:function(e){return this.props.surveyData.surveyQuestionsData.filter((function(t){return t.id===e}))[0].state===b.$qr.UNANSWERED}},{key:"render",value:function(){var e=this,t=this.props,r=t.configs,s=t.responsiveness,n=t.surveyData,a=t.translations,o=t.widgetStrings,i=t.widgetConfigs;return(0,_.jsxs)("div",{className:"survey-page-main ".concat(this.isWebComponent?"web-component":""),children:[this.isWebComponent&&o.title&&(0,_.jsx)("div",{"aria-level":"2",className:"widget-header-cont ".concat((0,m.jP)()?"no-bg":""),children:(0,_.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500",children:o.title})}),(0,_.jsx)("div",{className:"survey-main-container\n            ".concat(this.isWebComponent&&s.isMobileView?"web-component-mobile":""),children:(0,_.jsx)(oe,{widgetConfigs:i,widgetStrings:o,surveyData:n,onClickNext:function(){return e.onClickNext()},onClickPrev:function(){return e.onClickPrev()},triggerDisagg:function(t,r){return e.triggerDisagg(t,r)},translations:a.data,configs:r,handleBannnerClose:function(){return e.handleBannnerClose()},showAlertBanner:this.state.showAlertBanner,bannerDisaggStatus:this.state.bannerDisaggStatus,isMobileView:s.isMobileView,isDisaggLoading:this.state.isDisaggLoading,isWebComponent:this.isWebComponent})})]})}}]),r}(u.Component);he.contextType=ce.zO;var ve=(0,le.$)(de.Z$.SURVEY,(0,pe.EN)((0,l.$j)((function(e){return{session:e.session,surveyData:e.surveyData,translations:e.translationsData,configs:e.configs,queryParams:e.queryParams,responsiveness:e.responsiveness}}),(function(e){return{fetchSurveyData:function(t,r,s,n){return e((0,d.r7)(t,r,s,n))},nextSurveyQuestion:function(){return e((0,y.B2)())},prevSurveyQuestion:function(){return e((0,y.Sq)())},saveSurveyData:function(t,r,s,n,a){return e((0,d.pP)(t,r,s,n,a))},callDisaggApi:function(t,r,s){return e((0,d.zl)(t,r,s))},checkIfDisaggFinished:function(t,r,s,n,a){return e((0,d.kF)(t,r,s,n,a))},clearSurveyData:function(){return e((0,y.Jc)())},resetData:function(){return e(function(){var e=[{type:p},{type:v.x2},{type:g},{type:f.Pr.RESET_DATA},{type:h.j_.RESET_DATA}];return function(t){e.forEach((function(e){t(e)}))}}())},updateSurveyCurrentQuestion:function(t){return e((0,y.on)(t))},changeOriginalAns:function(t){return e((0,y.$r)(t))}}}))(he)))},9581:function(e,t,r){r.r(t),r.d(t,{default:function(){return ee}});var s=r(15671),n=r(43144),a=r(97326),o=r(60136),i=r(98557),c=r(47313),u=r(1084),l=r(29439),d=r(4942),p=(0,r(26915).ZL)()((function(e){return{headerTitle:{fontSize:"20px",fontWeight:"700"},headerSubTitle:{color:"rgba(var(--foreground_400), 1)",fontSize:"14px",fontWeight:"400",lineHeight:"17px",paddingTop:"8px"},modalButton:(0,d.Z)({borderRadius:"3px",fontSize:"16px",fontWeight:"400",height:"40px",maxWidth:"180px",width:"100%","&:disabled":{color:"rgba(var(--foreground_300), 1)",opacity:"0.7"}},e.breakpoints.down("sm"),{minWidth:"120px"}),incompleteButton:(0,d.Z)({borderRadius:"3px",fontSize:"16px",fontWeight:"400",height:"40px",maxWidth:"220px",width:"100%","&:disabled":{color:"rgba(var(--foreground_300), 1)",opacity:"0.7"}},e.breakpoints.down("sm"),{maxWidth:"100%",width:"100%"}),questionTitle:(0,d.Z)({alignContent:"center",color:"rgba(var(--foreground_600), 1)",display:"flex",fontWeight:600,fontSize:"16px",justifyContent:"center",lineHeight:"20px",marginBottom:"15px",textAlign:"center",width:"75%"},e.breakpoints.down("sm"),{width:"100%"}),input:{paddingRight:"20px"},singleChoiceText:(0,d.Z)({alignItems:"center",border:"1px solid rgba(var(--background_400), 1)",cursor:"pointer",display:"flex",flexDirection:"column",height:"100px",justifyContent:"center",margin:"15px 10px",padding:"8px",width:"180px"},e.breakpoints.down("sm"),{margin:"15px 15px 0 0","&:nth-of-type(2n)":{margin:"15px 0 0 0"}}),multipleChoiceAnsOptions:(0,d.Z)({alignItems:"center",border:"1px solid rgba(var(--background_400), 1)",cursor:"pointer",display:"flex",flexDirection:"column",height:"140px",justifyContent:"center",margin:"15px 10px 0 10px",padding:"8px",width:"180px"},e.breakpoints.down("sm"),{margin:"0 15px 15px 0","&:nth-of-type(2n)":{margin:"0 0 15px 0"}}),closeBtn:{position:"absolute",right:"0",top:"12px"},closeBtnModal:(0,d.Z)({position:"absolute",right:"-26px",top:0},e.breakpoints.down("md"),{right:"4px",top:"12px"}),closeIcon:{border:"1px solid rgba(var(--foreground_600), 1)",borderRadius:"50%",color:"rgba(var(--foreground_600),1)",cursor:"pointer",height:"18px",width:"18px"},closeIconModal:(0,d.Z)({border:"1px solid rgba(var(--background_300), 1)",borderRadius:"50%",color:"rgba(var(--background_300),1)",cursor:"pointer",height:"18px",width:"18px"},e.breakpoints.down("md"),{border:"1px solid rgba(var(--foreground_600), 1)",color:"rgba(var(--foreground_600),1)"})}})),h=r(17592),v=r(61113),g=r(94149),f=r(66598),y=r(11198),m=r(96151),x=r(56955),w=r(76720),b=r(16404),S=r(46417),D=(0,h.ZP)(g.Z)((function(){var e;return e={height:8},(0,d.Z)(e,"&.".concat(f.Z.colorPrimary),{backgroundColor:"rgba(var(--primary_400), 1)"}),(0,d.Z)(e,"& .".concat(f.Z.bar),{backgroundColor:"rgba(var(--primary_500), 1)"}),e})),A=(0,h.ZP)(g.Z)((function(){var e;return e={height:17,padding:2,borderRadius:5},(0,d.Z)(e,"&.".concat(f.Z.colorPrimary),{backgroundColor:"rgba(var(--background_500), 1)"}),(0,d.Z)(e,"& .".concat(f.Z.bar),{backgroundColor:"rgba(var(--bgl_green_500), 1)",borderRadius:"4px 0px 0px 4px"}),e})),C=function(e){var t=e.widgetStrings,r=e.progressBarCount,s=e.displayQuestions,n=e.closeSurveyModal,a=e.isModalView,o=p().classes,i=(0,w.WS)(),c=(0,m.GE)(s,t),u=(0,x.Z7)(t.pgBarValue,{pgbValue:parseFloat(c.progressBarPercent.toString())?c.progressBarPercent:0}),l=i.runMode===b.K8z;return(0,S.jsxs)("div",{className:"header ".concat(a||l?"survey-header":""),children:[(0,S.jsx)(D,{variant:"determinate",value:r}),!l&&(0,S.jsx)("div",{className:o.closeBtnModal,children:(0,S.jsx)(y.Z,{classes:{root:"".concat(a?o.closeIconModal:o.closeIcon)},onClick:function(){return n()},role:"button"})}),(0,S.jsxs)("div",{className:"header-wrapper header-modal",children:[(0,S.jsxs)("div",{className:"detail",children:[(0,S.jsx)(v.Z,{className:o.headerTitle,children:t.headerLabel}),(0,S.jsx)(v.Z,{className:o.headerSubTitle,children:t.subHeaderLabel})]}),(0,S.jsxs)("div",{className:"progress-bar",children:[(0,S.jsxs)("div",{className:"information",children:[(0,S.jsx)(v.Z,{className:o.headerSubTitle,dangerouslySetInnerHTML:{__html:u}}),(0,S.jsx)(v.Z,{className:o.headerSubTitle,children:c.progressBarString})]}),(0,S.jsx)(A,{variant:"determinate",value:c.progressBarPercent})]})]})]})},E=r(69140),j=function(e){var t=e.tipText,s=r(1075);return(0,S.jsx)("div",{className:"insights-tips",children:(0,S.jsxs)("div",{className:"detail-wrapper",children:[(0,S.jsx)("div",{className:"icon",children:(0,S.jsx)("img",{src:s,alt:"icon"})}),(0,S.jsx)("div",{className:"content",children:(0,S.jsx)("div",{className:"description",children:t})})]})})},k=function(e){var t=e.configColors,r=e.isSurveyComplete,s=e.widgetStrings,n=e.widgetConfigs,a=e.isModalView,o=e.surveyModalStatus,i=e.goToQuestionView,c=e.finishLater,u=p().classes,l=n.completeImage,d=n.inCompleteImage;return(0,S.jsx)(S.Fragment,{children:s&&(0,S.jsxs)("div",{className:"status-container",children:[r?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"image-wrapper",children:(0,S.jsx)("img",{className:"image",src:l,alt:"complete"})}),(0,S.jsx)("div",{className:"status-text",children:s.statusTextComplete}),(0,S.jsx)("div",{className:"text",children:(0,S.jsx)("div",{dangerouslySetInnerHTML:{__html:s.completeTxt}})}),(0,S.jsxs)("span",{className:"text",children:[s.completeUpdateLink,(0,S.jsx)("span",{className:"link",onClick:function(){return i()},children:s.completeUpdateClickHere}),s.completeUpdateClickMsg]}),a?(0,S.jsx)("div",{className:"btn-container",children:(0,S.jsx)(E.Z,{className:u.modalButton,btnText:"".concat(s.completeBtn),btnWidth:"180px",onClick:function(e){return o("".concat(s.completeBtn))},btnBackground:"rgb(".concat(t["--primary_500"],")"),borderColor:"rgb(".concat(t["--primary_500"],")"),textColor:"rgb(".concat(t["--foreground_300"],")"),btnTextTransform:"none",hoverColor:"rgb(".concat(t["--primary_500"],")"),hoverTextColor:"rgb(".concat(t["--foreground_300"],")")})}):""]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"image-wrapper",children:(0,S.jsx)("img",{className:"image",src:d,alt:"incomplete"})}),(0,S.jsx)("div",{className:"status-text",children:s.statusTextInComplete}),(0,S.jsx)("div",{className:"text",children:s.inCompleteTxt}),(0,S.jsx)("div",{className:"btn-container",children:(0,S.jsx)(E.Z,{className:u.incompleteButton,btnText:"".concat(s.inCompleteBtn),btnWidth:r?"180px":"220px",onClick:function(e){return o("".concat(s.inCompleteBtn))},btnBackground:"rgb(".concat(t["--primary_500"],")"),borderColor:"rgb(".concat(t["--primary_500"],")"),textColor:"rgb(".concat(t["--foreground_300"],")"),btnTextTransform:"none",hoverColor:"rgb(".concat(t["--primary_500"],")"),hoverTextColor:"rgb(".concat(t["--foreground_300"],")")})}),(0,S.jsx)("div",{className:"text",children:(0,S.jsx)("span",{className:"link",onClick:function(){return c()},children:s.finishLater})})]}),(0,S.jsx)("div",{className:"tips-container",children:(0,S.jsx)(j,{tipText:s.statusMessage})})]})})},I=r(70501),N=function(e){var t=e.surveyQuestion,r=e.widgetStrings,s=e.widgetConfigs,n=e.questionIndex,a=e.mobileOptionsWidth,o=e.isMobileView,i=e.isRunModeSdk,u=e.scrollToItem,d=e.saveSurveyAnswers,h=e.unSetErrorForQuestion,g=p().classes,f=(0,c.useState)(),y=(0,l.Z)(f,2),m=y[0],w=y[1];(0,c.useEffect)((function(){w(t.answers)}),[t]);var b=function(e,r,n){if(!(0,x.BC)(n)){var a=[e];if(t.error&&h(t),s.canDeselectAnswer){var o=m;o&&o.length>0&&e===o[0]&&(a=[]),a.length||u(r,!0)}w(a),d(t,a,a.length?r:r-1)}};return(0,S.jsxs)("div",{className:"question ".concat(i?"question-in-sdk":""),ref:e.addQuestionRefs,"data-scroll":n,children:[(0,S.jsx)(v.Z,{className:g.questionTitle,children:t.text}),(0,S.jsx)("div",{className:"single-choice",children:t.choices.map((function(e,t){return(0,S.jsx)(I.Z,{classes:{root:g.singleChoiceText},style:{width:o?a/2:""},className:(r=e.value,null!==r&&m==r?"selected-answer":""),onClick:function(t){return b(e.value,n,t)},onKeyPress:function(t){return b(e.value,n,t)},children:(0,S.jsx)("div",{className:"text",children:e.text})},"".concat(e.id,"-choice-").concat(t));var r}))}),!t.answers&&!t.error||m&&!m.length?(0,S.jsx)("div",{className:"answer-later-wrapper",children:(0,S.jsx)("div",{className:"answer-later",onClick:function(e){return u(n)},children:r.answerLater})}):"",t.error&&(0,S.jsx)("div",{className:"error",children:r.errorMsg})]})},V=r(1550),_=r(42461),T=function(e){var t=e.configColors,r=e.surveyQuestion,s=e.widgetStrings,n=e.widgetConfigs,a=e.questionIndex,o=e.isRunModeSdk,i=e.scrollToItem,u=e.saveSurveyAnswers,d=e.unSetErrorForQuestion,h=p().classes,g=(0,c.useState)(r.answers),f=(0,l.Z)(g,2),y=f[0],m=f[1];(0,c.useEffect)((function(){m(r.answers)}),[r]);return(0,S.jsxs)("div",{className:"question ".concat(o?"question-in-sdk":""),ref:e.addQuestionRefs,"data-scroll":a,children:[(0,S.jsx)(v.Z,{className:h.questionTitle,children:r.text}),(0,S.jsxs)("div",{className:"single-input",children:[(0,S.jsx)(V.Z,{classes:{root:"input-wrapper"},children:(0,S.jsx)(_.Z,{classes:{input:"answer-input",root:"outline",underline:"underline"},value:y,onChange:function(e){return function(e){var t=e.target.value;r.error&&d(r),!t||t.indexOf(".")==t.length-1||(0,x.D$)(t)?isNaN(t)||m(t.trim()):e.target.value=t.length>1?m(t):""}(e)}})}),(0,S.jsx)(E.Z,{className:h.modalButton,btnText:s.saveBtn,btnWidth:"110px",onClick:function(){return function(e){n.canDeselectAnswer||y||m(r.originalAnswer),u(r,y,y?e:e-1),y||i(e,!0)}(a)},btnBackground:"rgb(".concat(t["--primary_500"],")"),borderColor:"rgb(".concat(t["--primary_500"],")"),textColor:"rgb(".concat(t["--foreground_300"],")"),btnTextTransform:"none",hoverColor:"rgb(".concat(t["--primary_500"],")"),hoverTextColor:"rgb(".concat(t["--foreground_300"],")")})]}),r&&(!r.answers||r.answers&&!r.answers.filter((function(e){return e})).length&&y&&!r.error)?(0,S.jsx)("div",{className:"answer-later-wrapper",children:(0,S.jsx)("div",{className:"answer-later",onClick:function(e){return i(a)},children:s.answerLater})}):"",r.error&&(0,S.jsx)("div",{className:"error",children:s.errorMsg})]})},R=r(93433),Q=function(e){var t=e.configColors,r=e.surveyQuestion,s=e.widgetStrings,n=e.isRunModeSdk,a=e.scrollToItem,o=e.questionIndex,i=e.mobileOptionsWidth,u=e.isMobileView,d=e.widgetConfigs,h=e.saveSurveyAnswers,g=e.unSetErrorForQuestion,f=p().classes,y=(0,c.useState)([]),m=(0,l.Z)(y,2),w=m[0],b=m[1];(0,c.useEffect)((function(){b(r.answers)}),[r]);var D=d.checkBox,A=function(e){return null!==e&&w&&w.length?w.findIndex((function(t){return t===e})):-1},C=function(e,t){if(!(0,x.BC)(t)){var s="none",n=w;r.error&&g(r);var a=n?(0,R.Z)(n):[];if(e===s)a=n&&n[0]===s?[]:[s];else if(1===a.length&&a[0]===s)a=[e];else{var o=A(e);o>-1?a.splice(o,1):a.push(e)}var i=a&&0===a.length?null:a;b(i)}};return(0,S.jsxs)("div",{className:"question ".concat(n?"question-in-sdk":""),ref:e.addQuestionRefs,"data-scroll":o,children:[(0,S.jsx)(v.Z,{className:f.questionTitle,children:r.text}),(0,S.jsx)("div",{className:"multiple-choice",children:r.choices.map((function(e,t){return(0,S.jsxs)(I.Z,{classes:{root:f.multipleChoiceAnsOptions},style:{width:u?i/2:""},className:-1!==A(e.value)?"selected-answer":"",onClick:function(t){return C(e.value,t)},onKeyPress:function(t){return C(e.value,t)},children:[(0,S.jsx)("div",{children:-1!==A(e.value)?(0,S.jsx)("span",{className:"checkmark","aria-hidden":"true",children:(0,S.jsx)("img",{src:D,alt:"checkBox"})}):""}),(0,S.jsx)("div",{className:"text",children:e.text})]},"".concat(e.id,"-choice-").concat(t))}))}),(0,S.jsxs)("div",{className:"multiple-answer-wrapper",children:[r.answers||r.error?"":(0,S.jsx)("div",{className:"later",children:(0,S.jsx)("div",{className:"text-link",onClick:function(e){return a(o)},children:s.answerLater})}),(0,S.jsx)(E.Z,{className:f.modalButton,btnText:s.nextBtn,btnWidth:"120px",onClick:function(){return function(e){var t=w;w||(t=[]),h(r,t,e)}(o)},btnBackground:"rgb(".concat(t["--primary_500"],")"),borderColor:"rgb(".concat(t["--primary_500"],")"),textColor:"rgb(".concat(t["--foreground_300"],")"),btnTextTransform:"none",hoverColor:"rgb(".concat(t["--primary_500"],")"),hoverTextColor:"rgb(".concat(t["--foreground_300"],")")})]}),r.error&&(0,S.jsx)("div",{className:"error",children:s.errorMsg})]})},Z=r(14427),M=r(34582);function U(e,t,r,s){var n={};return s&&(n.templateName=s),function(s){s({type:M.Yg.SAVING_SURVEY_V2_DATA}),e.apiClient.put("/v2.0/users/"+r+"/homes/1/survey",t,{params:n}).then((function(e){e.error?s({type:M.Yg.FAILED_SAVE_SURVEY_V2_DATA,payload:t}):s({type:M.Yg.SAVED_SURVEY_V2_DATA,payload:t})}))}}var Y=r(74813),O=r(62426),L=r(88291),B="QUESTION",F="IN_COMPLETE",P="COMPLETE",q=function(e){var t=(0,w.WS)(),r=t.rc,s=t.runMode,n=e.isModalView,a=e.translations,o=e.configColors,i=e.configs,d=e.surveyV2Data,p=e.displayQuestions,h=e.previousSurveyQuestions,v=e.handleSuveryV2Close,g=e.session,f=e.isMobileView,y=(0,u.I0)(),D=c.useState(),A=(0,l.Z)(D,2),E=A[0],j=A[1],I=c.useState(),V=(0,l.Z)(I,2),_=V[0],R=V[1],q=(0,c.useState)(0),W=(0,l.Z)(q,2),G=W[0],H=W[1],z=(0,c.useState)(0),K=(0,l.Z)(z,2),J=K[0],$=K[1],X=(0,c.useState)(!1),ee=(0,l.Z)(X,2),te=ee[0],re=ee[1],se=(0,c.useState)(""),ne=(0,l.Z)(se,2),ae=ne[0],oe=ne[1],ie=(0,c.useState)(!1),ce=(0,l.Z)(ie,2),ue=ce[0],le=ce[1],de=(0,c.useState)(!1),pe=(0,l.Z)(de,2),he=pe[0],ve=pe[1],ge=(0,c.useState)(0),fe=(0,l.Z)(ge,2),ye=fe[0],me=fe[1],xe=(0,c.useState)(!1),we=(0,l.Z)(xe,2),be=we[0],Se=we[1],De=(0,c.useState)(!1),Ae=(0,l.Z)(De,2),Ce=Ae[0],Ee=Ae[1],je=(0,c.useRef)([]),ke=s===b.K8z,Ie=(0,c.useRef)(null),Ne=function(e){e&&!je.current.includes(e)&&je.current.push(e)};(0,c.useEffect)((function(){E||j((0,x.mn)(O.SY,a)),_||R((0,x.xW)(O.Fq,i.data))}),[]);var Ve=function(e){var t=(0,c.useRef)();return(0,c.useEffect)((function(){t.current=e}),[e]),t.current}(ae),_e=function(){for(var e=0,t=0;t<p.length;t++)null!==p[t].answers&&p[t].answers.filter((function(e){return e})).length&&e++;return e},Te=function(){y((0,M.r_)()),v(),y((0,M.bz)()),_.triggerFileUpload&&y(U(r,[],g.userProfile.userId,(0,Y.JF)()&&"SURVEY.SAVE_SURVEY_ANSWER")),d.hasUpdatedSurvey&&y(function(e,t,r){var s={};return r&&(s.templateName=r),function(r){e.apiClient.post("/v2.0/submit-survey/users/"+t,{params:s}).then((function(e){r({type:M.Yg.CALL_DISAGG_API,payload:e.data})}))}}(r,g.userProfile.userId,(0,Y.JF)()&&"SURVEY.CALL_DISAGG"))},Re=function(e,t){var s=_e(),a=p&&p.length?p.length:0;a===(h&&h.length?h.length:0)?he&&!t||(ve(!0),Ee(!1),s===a?(re(!0),oe(P),Se(!1)):ue&&!t||ae==F||(re(!1),oe(F))):s===a&&ae!=P&&ae!=B&&(re(!0),oe(P)),E&&(e===E.inCompleteBtn?(oe(B),le(!0),r.analytics.trackEvent(b.FiA.SURVEY,{clicked:E.inCompleteBtn,version:"v2"})):e===E.completeBtn&&n&&(r.analytics.trackEvent(b.FiA.SURVEY,{clicked:E.completeBtn,version:"v2"}),Te()))},Qe=function(e,t,s){var n=Array.isArray(t)?t:[t],a=n,o=e.answers;if((0,m.xG)(a,o))return y((0,M.Ne)(e,n,s)),null;n=n||[];var i={questionId:e.id,value:n};if(_.canDeselectAnswer){var c=!1;o&&o.forEach((function(e){t&&t.includes(e)||(c=!0)})),i.deselect=c}y(U(r,[i],g.userProfile.userId,(0,Y.JF)()&&"SURVEY.SAVE_SURVEY_ANSWER")),y((0,M.Ne)(e,n,s)),r.analytics.trackEvent(b.FiA.SURVEY,{clicked:e.type===b.bMh.MULTIPLE?"Save and Continue":"Next",questionId:e.id,questionType:e.type,questionGroup:e.group,questionStateOriginal:e.state,timestamp:(new Date).getTime(),answers:JSON.stringify(e.answers),confirmed:e.type===b.bMh.SINGLE,questionStateNew:e.answers?"ANSWERED"===e.state?"updated":"answered":"unanswered",version:"v2"})},Ze=function(){var e=setTimeout((function(){for(var t=je.current,r=0,s=0;s<t.length;s++){var a=t[s].getBoundingClientRect();if(n){var o=document.getElementById("survey-v2-main").getBoundingClientRect();a.top>=o.top&&a.bottom<=o.bottom&&(r=s+2)}else a.top>=0&&a.bottom<=window.innerHeight&&(r=s+2)}if(0!==r){var i=r/p.length*100;i=Math.min(100,i),$(i)}e&&clearTimeout(e)}),200)},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>2?arguments[2]:void 0,r=e,s=d&&p?p:[];if(!(arguments.length>1?arguments[1]:void 0)&&!t)for(var a=(arguments.length>3?arguments[3]:void 0)?e+1:e;a<s.length;a++){var o=s[a].answers?s[a].answers.filter((function(e){return e})):null;if(null===o||Array.isArray(o)&&0===o.length){r=a;break}}var i=0===s.filter((function(e){return e.answers&&e.answers.length&&e.answers[0]&&e.answers[0].length})).length,c=s.filter((function(e){return e.answers&&e.answers.length&&e.answers[0]&&e.answers[0].length})).length===s.length;i&&e!==s.length||t||!(r>0)||(e!==r||!c||be)&&e!==s.length?(oe(B),H(e)):(ve(!1),H(e),Re("",!0)),function(e){var t,r,s;if(n&&(t=document.getElementById("survey-v2-main")),ke?(s=f?190:130,r=(t=Ie.current).querySelector('[data-scroll="'.concat(e,'"]'))):(s=f?250:190,r=document.querySelector('[data-scroll="'.concat(e,'"]'))),t&&!ke){if(r=t.querySelector('[data-scroll="'.concat(e,'"]'))){var a,o=document.getElementsByClassName("survey-header")[0];o&&(a=r.offsetTop-o.offsetHeight),t.scrollTo({top:a,behavior:"smooth"})}}else if(r){var i=r.offsetTop-s;window.scrollTo({top:i,behavior:"smooth"})}e===p.length&&(y((0,M.qK)()),le(!1))}(r)},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;y((0,M.qK)()),t||r.analytics.trackEvent(b.FiA.SURVEY,{clicked:E.answerLater,version:"v2"}),Me(e===p.length-1?e+1:e,t,!1,!t)},Ye=function(e){y((0,M.bz)(e))},Oe=function(){var e=window.innerWidth-45;me(e)};return window.addEventListener("resize",(function(){f&&Oe()})),(0,c.useEffect)((function(){f&&Oe()}),[f]),(0,c.useEffect)((function(){return function(){n||(y((0,M.r_)()),v())}}),[]),(0,c.useEffect)((function(){d.currentQuesIndex>=0&&d.isSurveySave&&((0,m.uk)(Me,d.currentQuesIndex+1),y((0,M.kN)()))}),[d.currentQuesIndex,d.isSurveySave]),(0,c.useEffect)((function(){if(!n)return window.addEventListener("scroll",Ze,{passive:!0}),function(){window.removeEventListener("scroll",Ze)};var e=document.getElementById("survey-v2-main");if(e)return e.addEventListener("scroll",Ze,{passive:!0}),function(){e.removeEventListener("scroll",Ze)};if(ae!=B)if(n){var t=document.getElementById("survey-v2-main");t&&t.removeEventListener("scroll",Ze)}else window.removeEventListener("scroll",Ze)}),[p,ae]),(0,c.useEffect)((function(){var e=_e();if(p.length>0)if(p.length===e||Ce)Re();else if(p.length&&!h.length||Ve===F&&ae===B){var t,r=(0,L.O5)(window.location.search);r&&r["question-id"]?window.scrolledToQues||(t=p.findIndex((function(e){return e.id===r["question-id"]}))):window.scrolledToQues=!0,Me(-1!==t?t:0,!1,!window.scrolledToQues),Ze()}}),[p,h,ae,Ce]),(0,c.useEffect)((function(){(h.length&&h.length===G||ae===B&&G===p.length)&&Re()}),[h,G,p,ae]),(0,c.useEffect)((function(){var e,t;ue||ae===B||(n?(e=document.getElementById("survey-v2-main"))&&e.scrollTo({top:0,behavior:"smooth"}):ke?(t=Ie.current)&&t.scrollIntoView({block:"start",behavior:"smooth"}):window.scroll({top:0,left:0,behavior:"smooth"}))}),[ae,ue,n,ke]),(0,S.jsxs)("div",{className:"survey-v2-container ".concat(n?"survey-modal":""),id:"survey-v2-main",ref:Ie,children:[(0,S.jsx)("div",{className:"survey-v2","aria-labelledby":"survey-v2",children:(0,S.jsxs)("div",{className:"wrapper",children:[E&&(0,S.jsx)(C,{widgetStrings:E,closeSurveyModal:function(){return ae===B&&(Ee(!0),y((0,M.bz)()),y((0,M.qK)()),ve(!1),le(!1)),Re(),window.scrolledToQues=!0,void(ae!==F&&ae!==P||(r.analytics.trackEvent(b.FiA.SURVEY,{clicked:"Close",version:"v2"}),Te()))},progressBarCount:ae===F||ae===P?100:J,displayQuestions:p,isModalView:n}),ae==F&&p.length===h.length||ae==P?(0,S.jsx)(k,{configColors:o,isSurveyComplete:te,widgetStrings:E,widgetConfigs:_,surveyModalStatus:function(e){return Re(e)},goToQuestionView:function(){return y((0,M.kN)()),oe(B),ve(!0),Se(!0),void r.analytics.trackEvent(b.FiA.SURVEY,{clicked:E.completeUpdateClickHere,version:"v2"})},finishLater:function(){return Te(),void r.analytics.trackEvent(b.FiA.SURVEY,{clicked:"Finish later",version:"v2"})},isModalView:n}):(0,S.jsx)(S.Fragment,{children:E&&d&&p&&p.length>0&&ae===B?(0,S.jsx)(S.Fragment,{children:p.map((function(e,t){return(0,S.jsxs)(c.Fragment,{children:[e.type===b.bMh.SINGLE&&e.enableQuestion&&(0,S.jsx)(N,{surveyQuestion:e,scrollToItem:function(e,t){return Ue(e,t)},questionIndex:t,widgetStrings:E,mobileOptionsWidth:ye,isMobileView:f,widgetConfigs:_,saveSurveyAnswers:function(e,t,r){return Qe(e,t,r)},unSetErrorForQuestion:function(e){return Ye(e)},addQuestionRefs:function(e){return Ne(e)},isRunModeSdk:ke}),e.type===b.bMh.NUMBER&&e.enableQuestion&&(0,S.jsx)(T,{configColors:o,surveyQuestion:e,scrollToItem:function(e,t){return Ue(e,t)},questionIndex:t,widgetStrings:E,widgetConfigs:_,saveSurveyAnswers:function(e,t,r){return Qe(e,t,r)},unSetErrorForQuestion:function(e){return Ye(e)},addQuestionRefs:function(e){return Ne(e)},isRunModeSdk:ke}),e.type===b.bMh.MULTIPLE&&e.enableQuestion&&(0,S.jsx)(Q,{configColors:o,surveyQuestion:e,scrollToItem:function(e){return Ue(e)},questionIndex:t,widgetStrings:E,mobileOptionsWidth:ye,isMobileView:f,widgetConfigs:_,saveSurveyAnswers:function(e,t,r){return Qe(e,t,r)},unSetErrorForQuestion:function(e){return Ye(e)},addQuestionRefs:function(e){return Ne(e)},isRunModeSdk:ke})]},t)}))}):(0,S.jsx)("div",{className:"survey-v2-loading",children:(0,S.jsx)(Z.Z,{})})})]})}),!n&&!ke&&(0,S.jsx)("div",{className:"survey-navbar-block"})]})},W=r(25673),G=function(e){var t=e.modalOpen,r=e.translations,s=e.configColors,n=e.configs,a=e.surveyV2Data,o=e.displayQuestions,i=e.previousSurveyQuestions,c=e.session,u=e.isMobileView,l=e.handleSuveryV2Close;return(0,S.jsx)(W.Z,{open:t,children:(0,S.jsx)(q,{translations:r,configColors:s,configs:n,handleSuveryV2Close:l,session:c,surveyV2Data:a,displayQuestions:o,previousSurveyQuestions:i,isModalView:!0,isMobileView:u})})},H=r(19615),z=r(83450),K=r(61939),J=r(21629),$=r(21911),X=function(e){(0,o.Z)(r,e);var t=(0,i.Z)(r);function r(e){var n;return(0,s.Z)(this,r),(n=t.call(this,e)).fetchSurveyV2Api=function(){n.props.session&&n.props.configs&&n.props.fetchSurveyV2Data(n.context.rc,n.props.session.userProfile.userId,n.props.configs.locale)},n.closeSurveyV2Modal=function(){n.setState({openSurveyV2Modal:!1}),n.props.surveyV2Modal.isSurveyV2Modal?n.props.setSurveyV2Modal():n.context.runMode!==b.K8z&&n.goToPreviousPage()},n.state={loading:!0,openSurveyV2Modal:!1},n.goToPreviousPage=n.goToPreviousPage.bind((0,a.Z)(n)),n.closeSurveyV2Modal=n.closeSurveyV2Modal.bind((0,a.Z)(n)),n}return(0,n.Z)(r,[{key:"componentDidMount",value:function(){this.setState({openSurveyV2Modal:!0}),this.fetchSurveyV2Api(),this.context.rc.analytics.trackEvent(b.FiA.SURVEY,{viewed:!0,shown:"Survey Page",version:"v2"})}},{key:"goToPreviousPage",value:function(){var e=this.context.rc.analytics.getLastLocation(),t=e.pathname==z.ce?z.$d:e.pathname,r=(0,L.yC)(window.location.search,["question-id","focus-on-element"]),s=(t||"")+(r?"?"+r:"");this.props.history.push(s)}},{key:"render",value:function(){var e=this,t=H.V.getColors().colors,r=this.props.responsiveness.isMobileView,s=this.props,n=s.translations,a=s.surveyV2Data,o=s.configs,i=s.surveyV2Modal,c=this.context.runMode===b.K8z;return(0,S.jsxs)(S.Fragment,{children:[c&&n["SURVEY.HEADER"]&&(0,S.jsx)("div",{className:"widget-header-cont ".concat((0,x.jP)()?"no-bg":""),children:(0,S.jsx)("span",{"data-widget-name":b.wY4.SURVEY,"data-text-color":"foreground_500",children:n["SURVEY.HEADER"]})}),i.isSurveyV2Modal&&!c?(0,S.jsx)(G,{modalOpen:this.state.openSurveyV2Modal,translations:n,configColors:t,configs:o,handleSuveryV2Close:function(){return e.closeSurveyV2Modal()},session:this.props.session,surveyV2Data:a,displayQuestions:a.displayQuestions,previousSurveyQuestions:a.previousSurveyQuestions,isMobileView:r}):(0,S.jsx)(q,{translations:n,configColors:t,configs:o,handleSuveryV2Close:function(){return e.closeSurveyV2Modal()},session:this.props.session,surveyV2Data:a,displayQuestions:a.displayQuestions,previousSurveyQuestions:a.previousSurveyQuestions,isModalView:!1,isMobileView:r})]})}}]),r}(c.Component);X.contextType=w.zO;var ee=(0,K.$)(J.Z$.SURVEY,(0,$.EN)((0,u.$j)((function(e){return{session:e.session,configs:e.configs,translations:e.translationsData.data,queryParams:e.queryParams,responsiveness:e.responsiveness,surveyV2Data:e.surveyV2Data,surveyV2Modal:e.surveyV2Modal}}),(function(e){return{fetchSurveyV2Data:function(t,r,s){return e(function(e,t,r){var s={locale:r};return function(r){e.apiClient.get("/v2.0/users/"+t+"/homes/1/survey",{params:s}).then((function(e){r({type:M.Yg.FETCH_SURVEY_V2_DATA,payload:e.data})}))}}(t,r,s))},setSurveyV2Modal:function(){return e((0,M._t)())}}}))(X)))},1075:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHlSURBVHgBjVTdTWpBEP5mL7mI1+RiB9iBJRwqUB5MFB/EEqxArUCtQH0Row9iBWIFagWeDjgm/oDCjjMLqwsser4ETnZn5pv/BXLgrY49/eXRLeRRAqNiSP5zwISH3gZWo3yEjBlPMdnzGpZ5FeUpwds6Kt06dXp1s4ucUF21UVt/R2Pe6lguMF0x83bpHG0XnXh/LyGxjEyOqdynev8i2fwBHfSJawtnuI8SegJqIVOvRHQsGkkoJ9CJtXZfib3uuDwCR2boRttgwUfEaInmnjjYGqmkbLnqow1hYoTGSB2FTFKvkjREIxUHK4FKxelEEI1QCs3CtiOdvXeRxg2zv6+8NJlyQYwf1aMeiuBK1w6dDCQtY8brF0ISKGMe/zsNoPQhHOxGJyUtbHduOEdaE1Eol96pI7TZyLI8i7T4you+gUHkkZQ3XUMS/ATm9lwT1cnraFP6Uj/5ZJgN3ZztmCBKqIMqY1HDDFDfDX76K+Fo/e7km7hNoeG2hLCWr4sXaOmmaEPD+o0R+mGW2Xv4WrsBn05FBxlywb8mWsx062yCx+GrKdrdYg+N+SYOJ6JOwrN3Fsgb8mn7EkS77OEeAKKr8G7AXNPoZtkY/ADD053mfrwZuQhdesMRGrHxzsLl91MVwyfJ/taH/9xaJQAAAABJRU5ErkJggg=="}}]);