"use strict";(self.webpackChunkmeraki=self.webpackChunkmeraki||[]).push([[276],{39714:function(a,e,t){t.r(e),t.d(e,{default:function(){return he}});var n=t(15671),r=t(43144),i=t(60136),s=t(98557),o=t(47313),l=t(1084),c=t(69099),d=t(91009),u=t(56955),g=t(88291),p=t(45764),h=t(16404),m=t(93433),f=t(1413),x=t(29439),b=t(19860),v=t(57829),D=t(61113),y=t(24813),j=t(70937),w=t.n(j),S=t(48310),Z=t(20527),C=t(83213),A=t(6306),T=t(93714),k=t(89790),I=t(54045),N=t(4942),B=t(26915),_=(0,B.ZL)()((function(a){return{root:(0,N.Z)({flexDirection:"column",padding:"0 15px 0",alignItems:"flex-start"},a.breakpoints.up("sm"),{flexDirection:"row",padding:0}),rootAda:(0,N.Z)({flexDirection:"column",padding:"0 0 15px"},a.breakpoints.up("sm"),{flexDirection:"column",padding:0}),label:(0,N.Z)({marginBottom:15,color:"rgba(var(--foreground_400), 1)",fontWeight:500,fontSize:18},a.breakpoints.up("sm"),{marginBottom:0}),selectorContainer:(0,N.Z)({minWidth:280,position:"relative"},a.breakpoints.down("sm"),{minWidth:200}),selector:{height:32,paddingLeft:10,paddingRight:5,border:"1px solid rgba(var(--primary_500), 1)",color:"rgb(var(--primary_500))",borderRadius:3,display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"rgb(var(--background_300))",cursor:"pointer"},selectedRange:(0,N.Z)({fontSize:16},a.breakpoints.down("sm"),{fontSize:14}),selectorDropdown:{position:"absolute",bottom:"-2px",transform:"translateY(100%)",display:"none",width:"100%",border:"1px solid rgba(var(--primary_500), 1)",borderRadius:3,background:"rgb(var(--background_300))",zIndex:10,"&.show":{display:"block"}},dropdownList:{padding:0,"& .MuiListItem-button":{height:28,textAlign:"center",color:"rgb(var(--primary_500))","&:hover":{backgroundColor:"rgb(var(--primary_300))"},"& .MuiListItemText-primary":{fontSize:12}}},dateRangesContainer:{maxHeight:152,overflow:"auto"},yearNavigator:{height:35,borderTop:"1px solid rgba(var(--primary_500), 1)",borderBottom:"1px solid rgba(var(--primary_500), 1)",color:"rgb(var(--primary_500))","& button":{background:"transparent",padding:0,lineHeight:1}},arrowButton:{color:"rgb(var(--primary_500))",cursor:"pointer","&:disabled":{opacity:.5}},yearString:{width:70,textAlign:"center",fontSize:12,fontWeight:600},mainItemText:{"& .MuiListItemText-primary":{fontSize:"14px !important"}}}})),E=t(61447),L=function(a,e){if(!a||!a.length)return[];for(var t=[],n=0;n<a.length;n++)(e==h.AgQ.COST&&a[n].cost||e==h.AgQ.CONSUMPTION&&a[n].consumption)&&t.push(a[n]);return t},O=function(a,e){var t=[],n=[],r=[],i=[],s=a;if(0===a.length){t=(0,E.yv)();for(var o=0;o<h.LGX;o++)n.push(Math.round(400*Math.random())),i.push(null)}else{if(a.length>h.LGX)s=s.slice(a.length-h.LGX);else if(a.length<h.LGX)for(var l=0;l<h.LGX-a.length;l++)i.push(null),t.push(""),r.push(""),n.push(null);s.forEach((function(a){if(a){i.push(a),t.push("".concat(a.intervalEndDate).concat(0===a.cost?"*":"")),r.push(a.intervalStartDate);var s=e===h.AgQ.COST?a.cost:a.consumption;s=s||null,n.push(s)}else i.push(null),t.push(""),r.push(""),n.push(null)}))}return{generatedChartData:i,xAxisData:t,yAxisData:n,xStartData:r}},R=function(a,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,u.Yr)(a.intervalStartDateFormatted,h.DEY.YEAR,e,t),r=(0,u.Yr)(a.intervalEndDateFormatted,h.DEY.YEAR,e,t);return"".concat(n," - ").concat(r)},M=function(a,e){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n="",r="";(arguments.length>4?arguments[4]:void 0)||(r=a!==e?a<e?"-":"+":"");var i=a&&e?a-e:a||e||0;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""){case h.AgQ.COST:n=(0,u.xB)({cost:Math.abs(i),round:!0,showCurrency:!0});break;case h.AgQ.USAGE:n=(0,u.ub)({usage:Math.abs(i),round:!1,showUsageUnit:!0,decimalPlaces:2,fuelType:t});break;default:n=Math.abs(i)}return"".concat(r).concat(n)},P=function(a,e){var t=[];for(var n in a)t.push({id:e,category:"PEAK"===n?h.NMd.ON_PEAK.apiResponseName:h.NMd[n].apiResponseName,cons:a[n].consumption,cost:a[n].cost,hasTouData:!0});return t},Y=function(a,e,t,n,r){var i=[],s=0,o=0;if(a){var l=Object.keys(a),c=(0,u.ib)(a[l[0]].touUser)&&a[l[0]].touCostAndUsageDetail&&a[l[0]].touCostAndUsageDetail.touCost?a[l[0]].touCostAndUsageDetail.touCost:{},d=(0,u.ib)(a[l[0]].touUser)&&a[l[1]].touCostAndUsageDetail&&a[l[1]].touCostAndUsageDetail.touCost?a[l[1]].touCostAndUsageDetail.touCost:{};for(var g in c)s+=Math.round(c[g]),Object.keys(d).length>0&&(o+=Math.round(d[g])),i.push({name:"PEAK"===g?h.NMd.ON_PEAK.apiResponseName:h.NMd[g].apiResponseName,originalCost:e(null,c[g],h.AgQ.COST,t,!0),comparedCost:e(d[g],null,h.AgQ.COST,t,!0),variationValue:e(Math.round(c[g]),Math.round(d[g]),h.AgQ.COST,t),isPositive:c[g]>d[g]});var p=n.compareDate.cost-s,m=n.startDate.cost-o;i.length&&p>0&&m>0&&i.push({name:r.otherCharges,originalCost:e(null,p,h.AgQ.COST,t,!0),comparedCost:e(m,null,h.AgQ.COST,t,!0),variationValue:e(Math.round(p),Math.round(m),h.AgQ.COST,t),isPositive:p>m})}return i},H=t(11698),F=t(46417),U="previous_bill",z="same_bill_last_year",W=function(a){var e=a.seriesData,t=a.insideAdaModal,n=a.widgetStrings,r=a.widgetConfigs,i=a.currentIndex,s=_().classes,c=(0,o.useContext)(ie),d=(0,o.useState)(!1),g=(0,x.Z)(d,2),p=g[0],f=g[1],b=(0,o.useState)(),y=(0,x.Z)(b,2),j=y[0],w=y[1],N=(0,o.useState)(),B=(0,x.Z)(N,2),E=B[0],O=B[1],R=(0,o.useState)(0),M=(0,x.Z)(R,2),P=M[0],Y=M[1],W=(0,o.useState)(n.prevBill),G=(0,x.Z)(W,2),V=G[0],Q=G[1],X=c.highchartData,K=c.compareBillEndIndex,q=c.compareBillStartIndex,$=L(e,r.usageDisplayType),J=(0,o.useState)(),aa=(0,x.Z)(J,2),ea=aa[0],ta=aa[1],na=((0,l.v9)((function(a){return a.responsiveness.isMobileView})),(0,l.v9)((function(a){return a.configs.data})));(0,o.useEffect)((function(){var a=$.filter(Boolean),e=a.findIndex((function(a){return!!a&&a.intervalStart===X.generatedChartData[q].intervalStart}));a=a.slice(0,e).filter((function(a){return a.cost>0})),ta(a)}),[X]),(0,o.useEffect)((function(){if(ea){var a=[],e={};ea.map((function(t){var n=new Date(1e3*t.intervalStart).getFullYear();-1===a.findIndex((function(a){return a===n}))?(a=[].concat((0,m.Z)(a),[n]),e[n]=[t]):e[n]=[].concat((0,m.Z)(e[n]),[t])})),O(e),w(a),Y(a.length-1)}}),[ea]),(0,o.useEffect)((function(){if(e[i]){var a=X.generatedChartData[K];if(a){var t=new Date(1e3*a.intervalStart),r=new Date(1e3*e[i].intervalStart),s=t.getFullYear()===r.getFullYear()-1&&t.getMonth()===r.getMonth();if(K===h.LGX-2)Q(n.prevBill);else if(s)Q(n.lastYearBill);else{var o=X.generatedChartData[K];if(!o)return void Q("");var l=(0,u.Yr)(o.intervalStartDateFormatted,h.DEY.YEAR,na,!0),c=(0,u.Yr)(o.intervalEndDateFormatted,h.DEY.YEAR,na,!0);Q("".concat(l," - ").concat(c))}}else Q("")}}),[K]);var ra=function(a,e){if(!e||e.keyCode===h.nx.ENTER){switch(a){case U:Q(n.prevBill);break;case z:Q(n.lastYearBill);break;default:var r=(0,u.Yr)(a.intervalStartDateFormatted,h.DEY.YEAR,na,!0),i=(0,u.Yr)(a.intervalEndDateFormatted,h.DEY.YEAR,na,!0);Q("".concat(r," - ").concat(i))}f(!1),c.onChangeComparedDropdownSelect(a,t)}};return(0,F.jsxs)(v.Z,{className:s.selectorContainer,children:[(0,F.jsxs)("button",{className:s.selector,onClick:function(){f(!p)},children:[(0,F.jsx)(D.Z,{className:s.selectedRange,children:V}),p?(0,F.jsx)(T.Z,{}):(0,F.jsx)(A.Z,{})]}),(0,F.jsxs)(v.Z,{className:"".concat(s.selectorDropdown," ").concat(p&&"show"),children:[(0,F.jsx)(v.Z,{py:1,children:(0,F.jsxs)(S.Z,{component:"nav",className:s.dropdownList,children:[ea&&ea.length>=1&&(0,F.jsx)(Z.ZP,{button:!0,onClick:function(){return ra(U)},onKeyDown:function(a){return ra(U,a)},children:(0,F.jsx)(C.Z,{primary:n.prevBill,className:s.mainItemText})}),ea&&ea.length>=1&&(0,H.em)((0,H.$S)(X.generatedChartData[q].intervalStart),(0,H.$S)(ea[0].intervalStart))>=11&&(0,F.jsx)(Z.ZP,{button:!0,onClick:function(){return ra(z)},onKeyDown:function(a){return ra(z,a)},children:(0,F.jsx)(C.Z,{primary:n.lastYearBill,className:s.mainItemText})})]})}),(0,F.jsxs)(v.Z,{children:[j&&(0,F.jsxs)(v.Z,{display:"flex",alignItems:"center",justifyContent:"center",className:s.yearNavigator,children:[(0,F.jsx)("button",{"aria-label":"left",className:s.arrowButton,onClick:function(){P>0&&Y(P-1),f(!0)},disabled:0===P,"aria-disabled":0===P,children:(0,F.jsx)(k.Z,{})}),(0,F.jsx)(v.Z,{className:s.yearString,children:j[P]}),(0,F.jsx)("button",{"aria-label":"right",className:s.arrowButton,onClick:function(){P<j.length-1&&Y(P+1),f(!0)},disabled:P===j.length-1,"aria-disabled":0===P,children:(0,F.jsx)(I.Z,{})})]}),(0,F.jsx)(v.Z,{className:s.dateRangesContainer,py:1,children:(0,F.jsx)(S.Z,{className:s.dropdownList,children:j&&j.length>=1&&E&&E[j[P]].map((function(a,e){return(0,F.jsx)(Z.ZP,{button:!0,onClick:function(){return ra(a)},onKeyDown:function(e){return ra(a,e)},children:(0,F.jsx)(C.Z,{primary:"".concat(a.intervalStartDate," - ").concat(a.intervalEndDate)})},e)}))})})]})]})]})},G=function(a){var e=a.ada,t=a.seriesData,n=a.insideAdaModal,r=void 0!==n&&n,i=a.widgetStrings,s=a.widgetConfigs,o=a.currentIndex,l=_().classes;return(0,F.jsxs)(v.Z,{display:"flex",alignItems:"center",justifyContent:"center",className:e?l.rootAda:l.root,children:[(0,F.jsx)(v.Z,{marginRight:r?"0":"17.5px",children:(0,F.jsx)(D.Z,{className:l.label,children:i.comparedTo})}),(0,F.jsx)(W,{widgetStrings:i,widgetConfigs:s,seriesData:t,insideAdaModal:r,currentIndex:o})]})},V=t(14427),Q=t(10998);function X(a){var e=(0,o.useRef)();return(0,o.useEffect)((function(){e.current=a}),[a]),e.current}var K=t(19615),q=t(5845),$=t.n(q),J=t(97548),aa=t.n(J),ea=t(80767),ta=(0,B.ZL)()((function(){return{chart:{"& .highcharts-container":{"& .highcharts-xaxis-labels":{"& span":{whiteSpace:"initial !important",textAlign:"center"}}}},incompleteText:{color:"rgb(var(--foreground_500))",fontSize:12}}})),na=t(27507),ra=t(76720);ea.e.getInstance($()),t(24256)($());var ia={borderColor:"rgb(var(--background_300))",backgroundColor:"rgb(var(--primary_500))",shadow:{color:"rgb(var(--primary_500))",opacity:.45},style:{color:"rgb(var(--foreground_300))",fontWeight:600,fontSize:"8px"},borderRadius:4},sa={borderColor:"rgb(var(--primary_500))",backgroundColor:"rgb(var(--background_300))",shadow:{color:"rgb(var(--primary_500))",opacity:.45},style:{color:"rgb(var(--primary_500))",fontWeight:600,fontSize:"8px"},borderRadius:4},oa="compareStart",la="compareEnd",ca=function(a){var e=a.options,t=a.onResetChartRedraw,n=a.isChartRedrew,r=(0,ra.WS)().rc,i=(0,o.useRef)(null),s=ta().classes,c=(0,o.useContext)(ie),d=c.compareBillEndIndex,g=c.compareBillStartIndex,p=c.highchartData,m=c.onChangeComparedDropdownSelect,b=c.compareYears,D=X(d),y=X(g),j=X(p),w=(0,o.useState)(),S=(0,x.Z)(w,2),Z=S[0],C=S[1],A=(0,o.useState)(),T=(0,x.Z)(A,2),k=T[0],I=T[1],N=(0,o.useState)(),B=(0,x.Z)(N,2),_=B[0],E=B[1],L=((0,l.v9)((function(a){return a.session.userProfile.userId})),K.V.getColors().colors);e.plotOptions.series.point={events:{click:function(){!this.hideTooltip&&this.index<h.LGX-1&&m(p.generatedChartData[this.index],!1,!0)}}},$().theme=(0,na.f)(),$().setOptions($().theme);var O=function(a,e,t){var n=i.current.chart;a===la?n.xAxis[0].labelGroup.div.children[D>-1?D:h.LGX-2].style.fontWeight="normal":n.xAxis[0].labelGroup.div.children[y>-1?y:h.LGX-1].style.fontWeight="normal",n.xAxis[0].labelGroup.div.children[e]&&(n.xAxis[0].labelGroup.div.children[e].style.fontWeight=600),n.removeAnnotation(a);var r=n.series[0].points[e],s={id:a,labels:[(0,f.Z)({point:{x:e,y:r?Math.max(r.y-10,0):0,xAxis:0,yAxis:0},text:(0,u.xB)({cost:r?r.y:0,showCurrency:!0})},t)],draggable:""};n.addAnnotation(s)},R=function(a,e){var t=i.current.chart;null!==a&&void 0!==a&&a>-1&&t.series[0].points[a].update({color:"",hideTooltip:!1}),null!==e&&void 0!==e&&e>-1&&t.series[0].points[e].update({color:"rgb(".concat(L["--primary_500"],")"),hideTooltip:!0})};(0,o.useEffect)((function(){R(D,d),O(la,d,sa),R(y,g),O(oa,g,ia)}),[d,g]);(0,o.useEffect)((function(){b?Z||function(){var a=i.current.chart,e=a.series[0].data[7];C(a.renderer.path(["M",e.plotX,0,"V",1200]).attr({fill:"#FFFFEF",stroke:"gray","stroke-width":1,"stroke-dasharray":"5, 5",zIndex:4}).add()),I(a.renderer.text(b[1],e.plotX-30,a.plotHeight+55).css({zIndex:4}).add()),E(a.renderer.text(b[0],e.plotX+10,a.plotHeight+55).css({zIndex:4}).add())}():Z&&(Z.element.remove(),k.element.remove(),_.element.remove(),C(null),I(null),E(null))}),[b]),(0,o.useEffect)((function(){j&&n&&(O(oa,g,ia),O(la,d,sa),t())}),[p,n]);return(0,F.jsx)(v.Z,{className:s.chart,onMouseEnter:function(){r.analytics.trackEvent(h.FiA.INSIGHTS,{viewed:!0,shown:h.Q2X.BILL_ANALYSIS,hover:!0,version:h.zZZ.V2})},children:(0,F.jsx)(aa(),{ref:i,highcharts:$(),options:e})})},da=function(a){var e=a.highchartData,t=a.widgetConfigs,n=a.widgetStrings,r=(0,l.v9)((function(a){return a.session.userProfile.fuelType})),i=(0,o.useState)(null),s=(0,x.Z)(i,2),c=s[0],d=s[1],g=K.V.getColors().colors,p=function(a,e){switch(a.toUpperCase()){case h.oVm.ELECTRIC.toUpperCase():return e.usageHistoryElectric;case h.oVm.WATER.toUpperCase():return e.usageHistoryWater;case h.oVm.GAS.toUpperCase():return e.usageHistoryGas;default:return e.usageHistory}}(r,n),m=(0,o.useState)(!1),b=(0,x.Z)(m,2),y=b[0],j=b[1],w=(0,o.useState)(!1),S=(0,x.Z)(w,2),Z=S[0],C=S[1],A=ta().classes;(0,o.useEffect)((function(){C(e.generatedChartData.findIndex((function(a){return!!a&&0===a.cost}))>-1)}),[e]);(0,o.useEffect)((function(){var a=function(a,t,n){var r={chart:{type:"column",height:257,width:630,marginBottom:50,events:{load:function(){var a={labels:[(0,f.Z)({point:{y:Math.max(this.series[0].points[e.xAxisData.length-2].y-10,0),xAxis:0,yAxis:0}},sa)],draggable:""},t=(0,f.Z)({id:oa},a),n=(0,f.Z)({id:la},a);t.labels[0].point.x=e.xAxisData.length-1,t.labels[0].text=(0,u.xB)({cost:this.series[0].points[e.xAxisData.length-1].y,showCurrency:!0}),n.labels[0].point.y=e.xAxisData.length-2,n.labels[0].text=(0,u.xB)({cost:this.series[0].points[e.xAxisData.length-2].y,showCurrency:!0}),this.addAnnotation(t),this.addAnnotation(n),this.xAxis[0].labelGroup.div.children[e.xAxisData.length-1].style.fontWeight=600,this.xAxis[0].labelGroup.div.children[e.xAxisData.length-2].style.fontWeight=600},redraw:function(){j(!0)}}},plotOptions:{series:{pointWidth:10,minPointLength:3},column:{borderRadiusTopLeft:2,borderRadiusTopRight:2,colors:["rgb(".concat(a["--primary_400"],")")]}},xAxis:{categories:e.xAxisData,gridLineWidth:0,labels:{rotation:0,style:{fontSize:"10px",lineHeight:"12px",color:"rgb(".concat(a["--foreground_500"],")")},useHTML:!0}},yAxis:{title:{text:""},labels:{step:1,style:{fontSize:"12px",lineHeight:"22px",color:"rgb(".concat(a["--foreground_500"],")")},formatter:function(){return t.usageDisplayType===h.AgQ.COST||n===h.oVm.WATER?(0,u.xB)({cost:this.value,showCurrency:!0}):(0,u.ub)({usage:this.value,showUsageUnit:!0,fuelType:n})}},gridLineDashStyle:"shortdash"},tooltip:{formatter:function(){return(!this.point||!this.point.hideTooltip)&&!!this.y&&(t.usageDisplayType===h.AgQ.COST||n===h.oVm.WATER?(0,u.xB)({cost:this.y,showCurrency:!0}):(0,u.ub)({usage:this.y,showUsageUnit:!0,fuelType:n}))}},series:[{showInLegend:!1,data:e.yAxisData}]};return(0,u.IR)()&&(r.accessibility={enabled:!Z,point:{valueDescriptionFormat:null,descriptionFormatter:function(a){var r=a.y,i=e.xAxisData[a.index],s=t.usageDisplayType===h.AgQ.COST||n===h.oVm.WATER?(0,u.xB)({cost:r,showCurrency:!0}):(0,u.ub)({usage:r,showUsageUnit:!0,fuelType:n});return"".concat(i,", ").concat(s)}}}),r}(g,t,r);d(a)}),[e]);return(0,F.jsx)("div",{role:"region","aria-labelledby":p,children:c&&(0,F.jsxs)(v.Z,{className:"".concat((0,u.wG)()?"usage-color-accessible":""),children:[(0,F.jsx)("div",{"data-widget-name":h.wY4.INSIGHTS.BILL_ANALYSIS,children:(0,F.jsx)(ca,{options:c,onResetChartRedraw:function(){j(!1)},isChartRedrew:y})}),Z&&(0,F.jsx)(D.Z,{className:A.incompleteText,children:n.ongoingBillingCycle})]})})},ua=t(38743),ga=(0,B.ZL)()((function(a){return{rangeText:(0,N.Z)({color:"rgb(var(--foreground_500))",fontWeight:500,fontSize:"12px"},a.breakpoints.up("sm"),{fontSize:"16px",lineHeight:"20px"})}})),pa=function(a){var e=a.allSeriesForChart,t=a.insideAdaModal,n=void 0!==t&&t,r=a.selectedIntervalIndex,i=(0,ra.WS)().rc,s=((0,l.v9)((function(a){return a.session.userProfile.userId})),(0,l.v9)((function(a){return a.configs.data}))),c=(0,l.v9)((function(a){return a.responsiveness.isMobileView})),d=ga().classes,g=(0,o.useContext)(ie),p=1===r||0===r,m=!!e&&r===e.length-1;return(0,F.jsxs)(v.Z,{className:"insights-usage-interval-root",children:[(0,F.jsx)("div",{className:"insights-usage-arrow-cont",children:(0,F.jsx)(ua.Z,{onClick:function(){var a=function(a){for(var t=a;t>=0;t--)if(0!=e[t].cost)return t;return a}(r-1);g.onChangeCompareBillStart(e[a]);var t={clicked:h.YyL,shown:h.Q2X.BILL_ANALYSIS,direction:h.JYL.LEFT,intervalStart:e[a].intervalStart,intervalEnd:e[a].intervalEnd,widget:h.wY4.INSIGHTS.BILL_ANALYSIS,version:h.zZZ.V2};n&&(t=(0,f.Z)((0,f.Z)({},t),{},{type:"Accessibility"})),i.analytics.trackEvent(h.FiA.INSIGHTS,t)},disabled:p,"aria-disabled":p,className:"insights-usage-arr usage-arrow-left"})}),r&&(0,F.jsx)("div",{className:"insights-usage-range-to-show",children:(0,F.jsx)(D.Z,{className:d.rangeText,children:function(a){if(!a)return"";var e=(0,u.Yr)(a.intervalStartDateFormatted,h.DEY.YEAR,s,c),t=(0,u.Yr)(a.intervalEndDateFormatted,h.DEY.YEAR,s,c);return"".concat(e," - ").concat(t)}(e[r])})}),(0,F.jsx)("div",{className:"insights-usage-arrow-cont",children:(0,F.jsx)(ua.Z,{onClick:function(){var a=function(a){for(var t=a;t<e.length;t++)if(0!=e[t].cost)return t;return a}(r+1);g.onChangeCompareBillStart(e[a]);var t={clicked:h.YyL,shown:h.Q2X.BILL_ANALYSIS,direction:h.JYL.RIGHT,intervalStart:e[a].intervalStart,intervalEnd:e[a].intervalEnd,widget:h.wY4.INSIGHTS.BILL_ANALYSIS,version:h.zZZ.V2};n&&(t=(0,f.Z)((0,f.Z)({},t),{},{type:"Accessibility"})),i.analytics.trackEvent(h.FiA.INSIGHTS,t)},disabled:m,"aria-disabled":m,className:"insights-usage-arr usage-arrow-right"})})]})},ha=t(19536),ma=(0,B.ZL)()((function(a){return{root:(0,N.Z)({padding:"0 20px",background:"rgb(var(--primary_200))",borderRadius:2,maxHeight:257,maxwidth:630,overflow:"auto",flex:1},a.breakpoints.down("sm"),{padding:"0 15px",maxHeight:"initial"}),list:{padding:0,"& .MuiListItem-root ":{justifyContent:"space-between",alignItems:"center",padding:"14px 0"}},reason:{color:"rgb(var(--foreground_400))",marginRight:30},noData:{padding:"10px 0"},contribution:{fontWeight:600,"&.increased":{color:"rgb(var(--bgl_red_500))"},"&.decreased":{color:"rgb(var(--bgl_green_500))",whiteSpace:"nowrap"}},totalDIff:{fontWeight:600,color:"rgb(var(--foreground_500))"}}})),fa=function(a){var e=a.widgetStrings,t=ma().classes,n=(0,l.v9)((function(a){return a.insightsBillAnalysisData.billChangeReasons})),r=(0,l.v9)((function(a){return a.insightsBillAnalysisData.billAmountIncreased})),i=(0,l.v9)((function(a){return a.insightsBillAnalysisData.apiError})),s=function(a){var e="";a&&(e=a>0?"+":"-");var t=(0,u.xB)({cost:Math.abs(a),round:!0,showCurrency:!0});return"".concat(e).concat(t)},o=function(a){return a>0?"increased":"decreased"};return(0,F.jsx)(v.Z,{className:t.root,children:i?(0,F.jsx)(v.Z,{children:(0,F.jsx)(D.Z,{className:t.noData,children:e.apiError})}):(0,F.jsxs)(S.Z,{classes:{root:t.list},children:[n.map((function(a,e){return(0,F.jsxs)("div",{children:[(0,F.jsxs)(Z.ZP,{children:[(0,F.jsx)(D.Z,{variant:"body2",className:t.reason,children:a.reason}),(0,F.jsx)(D.Z,{className:"".concat(t.contribution," ").concat(o(a.contribution)),children:s(a.contribution)})]}),(0,F.jsx)(ha.Z,{})]},e)})),(0,F.jsxs)(Z.ZP,{children:[(0,F.jsx)(D.Z,{className:t.totalDIff,children:e.totalDiff}),(0,F.jsx)(D.Z,{className:"".concat(t.contribution," ").concat(o(r)),children:s(r)})]})]})})},xa=(0,B.ZL)()((function(a){var e,t;return{mainContainer:{backgroundColor:"rgba(var(--background_300))",minHeight:"600px",display:"flex",alignItems:"center",position:"relative",flexDirection:"column"},root:(e={width:"100%",background:"rgb(var(--background_300))",padding:"30px 15px"},(0,N.Z)(e,a.breakpoints.up("sm"),{padding:"30px 20px",width:"100%"}),(0,N.Z)(e,"flex",1),e),rootContShadow:{boxShadow:"0px 3px 6px rgba(68, 103, 141, 0.09), 0px -2px 6px rgba(68, 103, 141, 0.05)"},loading:{position:"relative",minHeight:"600px"},title:{padding:"10px",backgroundColor:"rgba(var(--background_300))",color:"rgba(var(--foreground_500), 1)",fontSize:"18px",fontWeight:600,margin:"0px"},contentHeader:(0,N.Z)({flexWrap:"wrap",backgroundColor:"rgba(var(--background_300))",width:"100%",minHeight:"40px",padding:"24px 40px",marginBottom:"0px"},a.breakpoints.down("sm"),{flexDirection:"column-reverse",padding:"24px 20px 0 20px",alignItems:"flex-start"}),intervalWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between"},inner:(0,N.Z)({background:"rgb(var(--background_300))",padding:"20px 6px",boxShadow:"0px -2px 6px rgba(68, 103, 141, 0.05), 0px 3px 6px rgba(68, 103, 141, 0.09)"},a.breakpoints.up("sm"),{boxShadow:"0px 3px 6px rgba(68, 103, 141, 0.09), 0px -2px 6px rgba(68, 103, 141, 0.05)",padding:24}),analysisContent:(0,N.Z)({},a.breakpoints.down("sm"),{padding:"30px 9px 0"}),banner:{padding:"0 20px",height:50,backgroundColor:"rgba(var(--primary_200), 1)"},bulbIcon:{marginRight:20},bannerText:{color:"rgba(var(--foreground_400), 1)",fontSize:14,fontWeight:500,"& span":{fontSize:16,"&.low":{color:"rgb(var(--bgl_green_500), 1)"},"&.high":{color:"rgba(var(--bgl_red_500), 1)"}}},billAmount:(0,N.Z)({fontSize:20,color:"rgb(var(--foreground_500))","& span":(0,N.Z)({fontSize:18,fontWeight:600},a.breakpoints.down("sm"),{fontSize:22})},a.breakpoints.down("sm"),{textAlign:"center",marginTop:30,fontSize:18}),insufficentDataWrapper:{height:400,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,color:"rgb(var(--foreground_500))"},desktopGraph:(t={width:"100%"},(0,N.Z)(t,a.breakpoints.only("md"),{width:"550px"}),(0,N.Z)(t,a.breakpoints.down("sm"),{display:"none"}),t),mobileGraph:(0,N.Z)({display:"none"},a.breakpoints.down("sm"),{display:"block"}),diffGraphInfo:(0,N.Z)({gap:"20px",display:"flex",flexWrap:"wrap"},a.breakpoints.down("sm"),{flexDirection:"column"}),apiFailed:{position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(var(--background_300), .95)",color:"rgba(var(--foreground_500))",fontSize:"20px"}}})),ba=t(24193),va=t(25673),Da=t(66835),ya=t(57861),ja=t(24076),wa=t(67478),Sa=(0,B.ZL)()((function(a){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},seriesTable:(0,N.Z)({width:326,flexShrink:0},a.breakpoints.down("sm"),{width:"100%"}),dialogContent:(0,N.Z)({padding:"25px 30px 40px",maxWidth:770,background:"rgb(var(--background_300))",borderRadius:4,boxShadow:"0px 1px 3px rgb(var(--background_400))",position:"relative","& .bidgely-icon-cancel-circle":(0,N.Z)({position:"absolute",paddingRight:0,top:0,right:-8,transform:"translateX(100%)",color:"rgb(var(--foreground_300))"},a.breakpoints.down("sm"),{right:0,top:-24,transform:"initial"})},a.breakpoints.down("sm"),{padding:0,margin:"0 20px"}),dialogInner:(0,N.Z)({},a.breakpoints.down("sm"),{maxHeight:550,overflow:"auto",padding:20}),dialogHeader:(0,N.Z)({marginBottom:30},a.breakpoints.down("sm"),{flexDirection:"column"}),adaContent:(0,N.Z)({maxHeight:500,overflowY:"auto"},a.breakpoints.down("sm"),{flexDirection:"column"}),tableCellText:{fontWeight:600,color:"rgb(var(--foreground_500))"},table:{border:"1px solid rgba(var(--primary_500), 0.5)",borderRadius:4,"& .MuiTableCell-root":{padding:"6px 12px",borderBottom:"1px solid rgba(var(--primary_500), 0.5)"},"& .MuiTableRow-root:last-child .MuiTableCell-root":{borderBottom:"none"}},tableDateCell:(0,N.Z)({borderRight:"1px solid rgba(var(--primary_500), 0.5)",width:227},a.breakpoints.down("sm"),{width:"100%"}),compareBanner:(0,N.Z)({position:"relative",height:"100%",maxHeight:"330px"},a.breakpoints.down("sm"),{minHeight:"330px"}),insufficentAdaDataWrapper:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,color:"rgb(var(--foreground_500))"}}})),Za=(0,B.D2)(ba.Z,(function(){return{root:{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.25)",borderRadius:100,border:"1px solid rgb(var(--primary_300))",width:54,height:36,minWidth:54,"& .bidgely-icon-accessibility":{paddingRight:0,color:"rgb(var(--primary_500))",fontSize:18}}}}));function Ca(a){var e=Sa().classes,t=(0,b.Z)(),n=(0,y.Z)(t.breakpoints.up("sm")),r=(0,o.useContext)(ie),i=a.onClose,s=a.selectedValue,c=a.open,d=a.widgetStrings,g=a.widgetConfigs,p=(0,l.v9)((function(a){return a.usageHistoryData.seriesData})),m=(0,l.v9)((function(a){return a.insightsBillAnalysisData})),f=m.isBillAnalysisLoading&&(m.apiError||m.dataNotAvailable),x=(0,l.v9)((function(a){return a.translationsData})),j=null,w=function(){i(s)},S=o.useRef(null);o.useEffect((function(){if((0,u.IR)()&&S.current&&S.current.offsetParent&&c){var a=Array.from(S.current.querySelectorAll(h.bTR));(j=a[0]).focus()}}),c);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(va.Z,{open:c,onClose:w,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",disableEnforceFocus:!0,className:e.modal,ref:S,onKeyDown:function(a){return function(a){if(27===a.keyCode)return a.preventDefault(),w();if((0,u.IR)()){var e=Array.from(S.current.querySelectorAll(h.bTR)),t=e.indexOf(j),n=e.filter((function(a){return!a.disabled&&-1!==a.tabIndex}));if(S.current&&c&&9===a.keyCode&&!a.shiftKey){if(a.target===e[e.length-1])return a.preventDefault(),(j=j===e[e.length-1]?n[0]:e[t+1])&&j.focus();j=n[n.indexOf(a.target)+1]}if(S.current&&c&&9===a.keyCode&&a.shiftKey&&(a.target===e[0]||0===n.indexOf(a.target)))return a.preventDefault(),(j=e[e.length-1])&&j.focus()}}(a)},children:(0,F.jsxs)(v.Z,{className:e.dialogContent,children:[(0,F.jsxs)(v.Z,{className:e.dialogInner,children:[(0,F.jsxs)(v.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",className:e.dialogHeader,children:[(0,F.jsx)(se,{widgetStrings:d,highchartData:r.highchartData}),(0,F.jsx)(pa,{widgetStrings:d,allSeriesForChart:r.allSeriesForChart,insideAdaModal:!0,selectedIntervalIndex:a.selectedIntervalIndex})]}),(0,F.jsxs)(v.Z,{display:"flex",justifyContent:"space-between",className:e.adaContent,children:[f?(0,F.jsx)(D.Z,{className:e.insufficentAdaDataWrapper,children:d.dataNotAvailable}):(0,F.jsx)(v.Z,{className:e.seriesTable,children:(0,F.jsx)(Da.Z,{className:e.table,"aria-label":"simple table",tabIndex:"0",children:(0,F.jsx)(ya.Z,{children:p&&p.map((function(a,t){return(0,F.jsxs)(ja.Z,{children:[(0,F.jsx)(wa.Z,{component:"th",scope:"row",className:"".concat(e.tableDateCell," ada-focus-wo-offset"),"aria-label":"".concat(a.intervalEndDate),children:(0,F.jsx)(D.Z,{variant:"body2",className:e.tableCellText,children:a.intervalEndDate})}),(0,F.jsx)(wa.Z,{align:"center",className:"ada-focus-wo-offset","aria-label":"".concat(a.cost),children:(0,F.jsx)(D.Z,{variant:"body2",className:e.tableCellText,children:(0,u.xB)({cost:a.cost,round:!0,showCurrency:!0,lessThanOne:!1})})})]},t)}))})})}),(0,F.jsxs)(v.Z,{pl:n?3:0,mt:n?0:3,children:[(0,F.jsx)(G,{ada:!0,widgetStrings:d,widgetConfigs:g,seriesData:p,insideAdaModal:!0,currentIndex:a.selectedIntervalIndex}),(0,F.jsx)("div",{className:e.compareBanner,children:a.loading?(0,F.jsx)(V.Z,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(v.Z,{mb:"10px",mt:3,children:(0,F.jsx)(oe,{widgetStrings:d})}),(0,F.jsx)(fa,{widgetStrings:d})]})})]})]})]}),(0,F.jsx)("a",{"aria-label":x.data["DASHBOARD.LABEL.CLOSE"],href:"javascript:void(0)",className:"bidgely-icon-cancel-circle",onClick:function(){return w()}})]})})})}var Aa=function(a){var e=a.compareDates,t=a.loading,n=a.widgetStrings,r=a.widgetConfigs,i=a.selectedIntervalIndex,s=(0,ra.WS)().rc,c=o.useState(!1),d=(0,x.Z)(c,2),u=d[0],g=d[1],p=(0,l.v9)((function(a){return a.translationsData}));return(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(Za,{tabIndex:"0","aria-label":p.data["HBA.ADA.LABEL"],onClick:function(){g(!0),s.analytics.trackEvent(h.FiA.INSIGHTS,{clicked:"Accessibility",intervalStart:e.startDate.intervalStart,intervalEnd:e.startDate.intervalEnd,shown:h.Q2X.BILL_ANALYSIS,version:h.zZZ.V2})},children:(0,F.jsx)("span",{className:"bidgely-icon-accessibility"})}),(0,F.jsx)(Ca,{widgetStrings:n,widgetConfigs:r,open:u,onClose:function(){g(!1)},loading:t,selectedIntervalIndex:i})]})},Ta=t(74165),ka=t(15861),Ia=t(9019),Na=t(81419),Ba=function(a,e,t){return a.apiClient.get("/2.1/call-center/users/"+e+"/compare",{params:t})},_a=t(45987),Ea=t(28485),La=t(65280),Oa=(0,B.D2)(Ea.Z,(function(){return{root:{borderBottom:"1px solid rgb(var(--background_400))"},indicator:{backgroundColor:"rgb(var(--primary_500))"}}})),Ra=(0,B.D2)((function(a){return(0,F.jsx)(La.Z,(0,f.Z)({disableRipple:!0},a))}),(function(a){return{root:{textTransform:"uppercase",minWidth:52,padding:"6px 10px",fontSize:12,color:"rgb(var(--foreground_500))","&:hover":{color:"rgb(var(--primary_500))",opacity:1},"&$selected":{color:"rgb(var(--foreground_500))"},"&:focus":{color:"rgb(var(--primary_500))"}},selected:{}}})),Ma=function(a){var e=a.tabs,t=a.onChangeTab,n=o.useState(e[0].value),r=(0,x.Z)(n,2),i=r[0],s=r[1];return(0,F.jsx)(Oa,{value:i,onChange:function(a,e){s(e),t(e)},"aria-label":"ant example",scrollButtons:"auto",variant:"scrollable",children:e.map((function(a,e){return(0,F.jsx)(Ra,{label:a.label,value:a.value},e)}))})},Pa=["children","value","index"],Ya=(0,B.ZL)()((function(){return{compareTable:{},tableRow:{padding:"0 10px",height:32,alignItems:"center",display:"flex",justifyContent:"space-between",fontSize:12,color:"rgb(var(--foreground_500))",borderBottom:"1px solid rgb(var(--background_400))","& p":{fontSize:12,color:"rgb(var(--foreground_500))"},"&:nth-child(odd)":{backgroundColor:"rgb(var(--primary_300))"},"& .plus":{color:"rgb(var(--bgl_red_500))"},"& .minus":{color:"rgb(var(--bgl_green_500))"}},arrow:{color:"rgba(var(--primary_500), 1)"},arrowDown:{transform:"rotate(180deg)"},tableHeader:{marginTop:7,padding:"0 10px",height:32,alignItems:"center",display:"flex","& p":{fontSize:13,fontWeight:"bold",color:"rgb(var(--foreground_500))"},"&.toggle":{justifyContent:"space-between","& p":{color:"rgba(var(--primary_500), 1)",fontSize:14,fontWeight:"400"}},"&.bill-detail":{alignItems:"center",justifyContent:"flex-start"},".bidgely-icon-arrow-down":{paddingRight:0},".marker":{display:"flex",borderRadius:"5px",marginRight:"5px",width:"10px",height:"10px","&.off-peak":{backgroundColor:"rgba(var(--data_colors_off_peak), 1)"},"&.mid-peak":{backgroundColor:"rgba(var(--data_colors_mid_peak), 1)"},"&.on-peak":{backgroundColor:"rgba(var(--data_colors_on_peak), 1)"}},variation:{"&.plus p, & .plus":{color:"rgb(var(--bgl_red_500))"},"&.minus, & .minus":{color:"rgb(var(--bgl_green_500))"}}}}}));function Ha(a){var e=a.children,t=a.value,n=a.index,r=(0,_a.Z)(a,Pa);return(0,F.jsx)("div",(0,f.Z)((0,f.Z)({role:"tabpanel",hidden:t!==n,id:"wrapped-tabpanel-".concat(n),"aria-labelledby":"wrapped-tab-".concat(n)},r),{},{children:t===n&&(0,F.jsx)(v.Z,{children:e})}))}var Fa=function(a){var e=a.label,t=a.bclValue1,n=a.bclValue2,r=a.variation,i=a.widgetStrings,s=a.billDetails,c=a.isApplianceTab,d=a.touData,u=a.showAppDetail,g=(0,o.useContext)(ie).compareDates,p=Ya().classes,h=(0,l.v9)((function(a){return a.configs.data})),m=(0,l.v9)((function(a){return a.appliances.appliancesList}));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(v.Z,{className:p.compareTable,children:[(0,F.jsxs)(v.Z,{className:"".concat(p.tableHeader),children:[d&&d.hasTouData?(0,F.jsx)("div",{className:"marker ".concat(e.toLowerCase()),"aria-hidden":"true"}):"",(0,F.jsxs)(D.Z,{children:[d&&d.hasTouData?m[d.id]:""," ",e]})]}),(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)(v.Z,{className:p.tableRow,children:[(0,F.jsx)(D.Z,{children:R(g.compareDate,h,!0)}),(0,F.jsx)(D.Z,{className:"ada-focus-wo-offset",tabIndex:"0","aria-label":"".concat(e,", ").concat(g.compareDate.intervalStartDate," - ").concat(g.compareDate.intervalEndDate,", ").concat(t),children:t})]}),(0,F.jsxs)(v.Z,{className:p.tableRow,children:[(0,F.jsx)(D.Z,{children:R(g.startDate,h,!0)}),(0,F.jsx)(D.Z,{className:"ada-focus-wo-offset",tabIndex:"0","aria-label":"".concat(e,", ").concat(g.startDate.intervalStartDate," - ").concat(g.startDate.intervalEndDate,", ").concat(n),children:n})]}),(0,F.jsxs)(v.Z,{className:p.tableRow,children:[(0,F.jsx)(D.Z,{children:i.variations}),r]})]})]}),c&&d&&d.isExpandable&&(0,F.jsxs)(v.Z,{className:"".concat(p.tableHeader," toggle"),tabIndex:"0",onClick:function(){return u(d.id)},children:[(0,F.jsxs)(D.Z,{children:[m[d.id]," ",i.timeOfUse]}),d.hasTouData?"":(0,F.jsx)("div",{"aria-label":"".concat(m[d.id]," ").concat(i.timeOfUse," ").concat(d.toggleTouUsage?i.lessDetails:i.moreDetails),className:p.arrow+(d.toggleTouUsage?" bidgely-icon-arrow-down":" bidgely-icon-arrow-down "+p.arrowDown)})]}),s&&s.length?s.map((function(a,t){return(0,F.jsxs)(v.Z,{className:p.compareTable,children:[(0,F.jsxs)(v.Z,{className:"".concat(p.tableHeader,' "bill-detail"'),children:[(0,F.jsx)("div",{className:"marker ".concat(a.name.toLowerCase()),"aria-hidden":"true"}),(0,F.jsx)(D.Z,{children:a.name})]}),(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)(v.Z,{className:p.tableRow,children:[(0,F.jsx)(D.Z,{children:R(g.compareDate,h,!0)}),(0,F.jsx)(D.Z,{className:"ada-focus-wo-offset",tabIndex:"0","aria-label":"".concat(a.name,", ").concat(e," ").concat(g.compareDate.intervalStartDate," - ").concat(g.compareDate.intervalEndDate,", ").concat(a.originalCost),children:a.originalCost})]}),(0,F.jsxs)(v.Z,{className:p.tableRow,children:[(0,F.jsx)(D.Z,{children:R(g.startDate,h,!0)}),(0,F.jsx)(D.Z,{className:"ada-focus-wo-offset",tabIndex:"0","aria-label":"".concat(a.name,", ").concat(e," ").concat(g.startDate.intervalStartDate," - ").concat(g.startDate.intervalEndDate,", ").concat(a.comparedCost),children:a.comparedCost})]}),(0,F.jsxs)(v.Z,{className:"".concat(p.tableRow),"aria-label":"".concat(a.name,", ").concat(e," ").concat(i.variations,", ").concat(a.variationValue),children:[(0,F.jsx)(D.Z,{children:i.variations}),(0,F.jsx)(D.Z,{className:"".concat(p.variation," ").concat(a.isPositive?"plus":"minus"),children:a.variationValue})]})]})]},a.name+t)})):""]})},Ua=function(a){var e=a.compareBillsData,t=a.widgetStrings,n=a.widgetConfigs,r=(0,o.useContext)(ie).compareDates,i=(0,o.useState)("totals"),s=(0,x.Z)(i,2),c=s[0],d=s[1],g=[{label:t.totals,value:"totals"},{label:t.applianceUsage,value:"appliance_usage"},{label:t.otherDiffs,value:"others"}],p=(0,l.v9)((function(a){return a.session.userProfile})).fuelType,m=Y(e,M,p,r,t);return(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(Ma,{tabs:g,onChangeTab:function(a){d(a)}}),(0,F.jsxs)(Ha,{value:c,index:"totals",children:[(0,F.jsx)(Fa,{widgetStrings:t,label:t.billAmount,bclValue1:(0,u.xB)({cost:r.compareDate.cost,round:!0,showCurrency:!0}),bclValue2:(0,u.xB)({cost:r.startDate.cost,round:!0,showCurrency:!0}),variation:(0,F.jsx)(v.Z,{className:"".concat(r.startDate.cost>r.compareDate.cost&&"plus"," ").concat(r.startDate.cost<r.compareDate.cost&&"minus"," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t.variations,", ").concat(M(r.startDate.cost,r.compareDate.cost,h.AgQ.COST)),children:M(r.startDate.cost,r.compareDate.cost,h.AgQ.COST)}),billDetails:m}),(0,F.jsx)(Fa,{widgetStrings:t,label:t.consumption,bclValue1:(0,u.ub)({usage:r.compareDate.consumption,round:!0,showUsageUnit:!0,fuelType:p}),bclValue2:(0,u.ub)({usage:r.startDate.consumption,round:!0,showUsageUnit:!0,fuelType:p}),variation:(0,F.jsx)(v.Z,{className:"".concat(r.startDate.consumption>r.compareDate.consumption&&"plus"," ").concat(r.startDate.consumption<r.compareDate.consumption&&"minus"," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t.variations,", ").concat(M(r.startDate.consumption,r.compareDate.consumption,h.AgQ.USAGE,p)),children:M(r.startDate.consumption,r.compareDate.consumption,h.AgQ.USAGE,p)})}),(0,F.jsx)(Fa,{widgetStrings:t,label:t.consumptionPerDay,bclValue1:(0,u.ub)({usage:Ga(r.compareDate),round:!1,showUsageUnit:!0,fuelType:p}),bclValue2:(0,u.ub)({usage:Ga(r.startDate),round:!1,showUsageUnit:!0,fuelType:p}),variation:(0,F.jsx)(v.Z,{className:"".concat(Ga(r.startDate)>Ga(r.compareDate)&&"plus"," ").concat(Ga(r.startDate)<Ga(r.compareDate)&&"minus"," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t.variations,", ").concat(M(Ga(r.startDate),Ga(r.compareDate),h.AgQ.USAGE,p)),children:M(Ga(r.startDate),Ga(r.compareDate),h.AgQ.USAGE,p)})})]}),(0,F.jsx)(Ha,{value:c,index:"appliance_usage",children:(0,F.jsx)(Wa,{widgetStrings:t,compareDates:r,compareBillsData:e})}),(0,F.jsxs)(Ha,{value:c,index:"others",children:[(0,F.jsx)(Fa,{widgetStrings:t,label:t.averageTemp,bclValue1:"".concat(Object.values(e)[0].avgMaxTemp.value?Object.values(e)[0].avgMaxTemp.value.toFixed(1):0,"\n          ").concat(n.weatherUnit,"/\n          ").concat(Object.values(e)[0].avgMinTemp.value?Object.values(e)[0].avgMinTemp.value.toFixed(1):0,"\n          ").concat(n.weatherUnit),bclValue2:"".concat(Object.values(e)[1].avgMaxTemp.value?Object.values(e)[1].avgMaxTemp.value.toFixed(1):0,"\n          ").concat(n.weatherUnit,"/\n          ").concat(Object.values(e)[1].avgMinTemp.value?Object.values(e)[1].avgMinTemp.value.toFixed(1):0,"\n          ").concat(n.weatherUnit),variation:(0,F.jsxs)(D.Z,{tabIndex:"0","aria-label":"".concat(t.variations,", ").concat((Object.values(e)[1].avgMaxTemp.value-Object.values(e)[0].avgMaxTemp.value).toFixed(1)).concat(n.weatherUnit,"/").concat((Object.values(e)[1].avgMinTemp.value-Object.values(e)[0].avgMinTemp.value).toFixed(1)).concat(n.weatherUnit),className:"ada-focus-wo-offset",children:[(0,F.jsxs)("span",{className:"".concat(Object.values(e)[1].avgMaxTemp.value>Object.values(e)[0].avgMaxTemp.value&&"plus"," ").concat(Object.values(e)[1].avgMaxTemp.value<Object.values(e)[0].avgMaxTemp.value&&"minus"),children:[(Object.values(e)[1].avgMaxTemp.value-Object.values(e)[0].avgMaxTemp.value).toFixed(1)," ",n.weatherUnit]}),"/"," ",(0,F.jsxs)("span",{className:"".concat(Object.values(e)[1].avgMinTemp.value>Object.values(e)[0].avgMinTemp.value&&"plus"," ").concat(Object.values(e)[1].avgMinTemp.value<Object.values(e)[0].avgMinTemp.value&&"minus"),children:[(Object.values(e)[1].avgMinTemp.value-Object.values(e)[0].avgMinTemp.value).toFixed(1),n.weatherUnit]})]})}),(0,F.jsx)(Fa,{widgetStrings:t,label:t.billingCycleDays,bclValue1:Va(r.compareDate),bclValue2:Va(r.startDate),variation:(0,F.jsx)(v.Z,{className:"".concat(Va(r.startDate)>Va(r.compareDate)&&"plus"," ").concat(Va(r.startDate)>Va(r.compareDate)&&"minus"," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t.variations,", ").concat(M(Va(r.startDate),Va(r.compareDate))),children:M(Va(r.startDate),Va(r.compareDate))})}),(0,F.jsx)(Fa,{widgetStrings:t,label:t.consumptionDayLow,bclValue1:Object.keys(Object.values(e)[0].vacationDays.value).length,bclValue2:Object.keys(Object.values(e)[1].vacationDays.value).length,variation:(0,F.jsx)(v.Z,{className:"".concat(Object.keys(Object.values(e)[1].vacationDays.value).length>Object.keys(Object.values(e)[0].vacationDays.value).length&&"plus"," ").concat(Object.keys(Object.values(e)[1].vacationDays.value).length<Object.keys(Object.values(e)[0].vacationDays.value).length&&"minus"," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t.variations,", ").concat(M(Object.keys(Object.values(e)[1].vacationDays.value).length,Object.keys(Object.values(e)[0].vacationDays.value).length)),children:M(Object.keys(Object.values(e)[1].vacationDays.value).length,Object.keys(Object.values(e)[0].vacationDays.value).length)})})]})]})},za=(0,B.ZL)()((function(a){return{root:{width:"100%",padding:0,marginBottom:12,background:"transparent",cursor:"pointer"},title:{color:"rgba(var(--primary_500), 1)"},arrow:{color:"rgba(var(--primary_500), 1)"},arrowDown:{transform:"rotate(180deg)"},detailTable:(0,N.Z)({borderTop:"1px solid rgb(var(--background_500))",borderBottom:"1px solid rgb(var(--background_500))",paddingTop:30},a.breakpoints.down("sm"),{paddingTop:20}),tableCell:{minHeight:36,padding:"0 10px",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgb(var(--background_500))","& p":{fontSize:14,color:"rgb(var(--foreground_500))"},"&:nth-of-type(even)":{background:"rgb(var(--background_400))"}},emptyResult:(0,N.Z)({background:"rgb(var(--background_300)) !important"},a.breakpoints.down("sm"),{padding:10,height:"auto"}),tableHeaderCell:{background:"transparent !important","& p":{fontWeight:600}},detailSection:{background:"rgb(var(--primary_200))",textTransform:"uppercase",justifyContent:"flex-start",borderBottom:"none","& p":{fontWeight:"bold",color:"rgba(var(--primary_500), 1)"}},compareTitle:{justifyContent:"flex-start","& p":{fontWeight:"bold"},"&.expand":{cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"space-between",".name":{fontWeight:"400"},"&.peak-label":{alignItems:"center",cursor:"default",justifyContent:"flex-start",paddingLeft:"20px"},".bidgely-icon-arrow-down":{paddingRight:0},".marker":{display:"flex",borderRadius:"5px",height:"10px",marginRight:"12px",width:"10px","&.off-peak":{backgroundColor:"rgba(var(--data_colors_off_peak), 1)"},"&.mid-peak":{backgroundColor:"rgba(var(--data_colors_mid_peak), 1)"},"&.on-peak":{backgroundColor:"rgba(var(--data_colors_on_peak), 1)"}}}},variation:{"&.plus p, & .plus":{color:"rgb(var(--bgl_red_500))"},"&.minus p, & .minus":{color:"rgb(var(--bgl_green_500))"}}}})),Wa=function(a){var e=a.compareDates,t=a.compareBillsData,n=a.widgetStrings,r=(0,b.Z)(),i=(0,y.Z)(r.breakpoints.up("sm")),s=za().classes,c=(0,o.useState)(),d=(0,x.Z)(c,2),g=d[0],p=d[1],f=(0,o.useState)([]),j=(0,x.Z)(f,2),w=j[0],S=j[1],Z=(0,l.v9)((function(a){return a.appliances.appliancesList})),C=(0,l.v9)((function(a){return a.session.userProfile})).fuelType;C=C.toLowerCase(),(0,o.useEffect)((function(){if(t){var a=Object.values(t);if(p(a),a&&a[0].itemization.itemizationWithCost&&a[0].itemization.itemizationWithCost["".concat(C)]){var e=a[0].itemization.itemizationWithCost["".concat(C)].filter((function(a){return"other"!==a.category&&"total"!==a.category})).slice(0,5);if((0,u.ib)(a[0].touUser))for(var n=0;n<e.length;n++)e[n].toggleTouUsage=!0,e[n].isExpandable=!(!a[0].applianceTouCostAndUsageDetail||!a[0].applianceTouCostAndUsageDetail[e[n].id]);S(e)}}}),[t]);var A=function(a,e){if(!e&&g[1].itemization.itemizationWithCost)return g[1].itemization.itemizationWithCost["".concat(C)].find((function(e){return e.id===a}))?Math.round(g[1].itemization.itemizationWithCost["".concat(C)].find((function(e){return e.id===a})).cost):0;if(e&&e.hasTouData&&g[1]&&g[1].applianceTouCostAndUsageDetail){var t=P(g[1].applianceTouCostAndUsageDetail[e.id],e.id).find((function(a){return a.category===e.category}));return t?Math.round(t.cost):0}return 0},T=function(a){var e=(0,m.Z)(w),t=e.findIndex((function(e){return e.id===a}));if(-1!==t){var n,r=[];n=e[t].toggleTouUsage,e[t].toggleTouUsage=!e[t].toggleTouUsage,g&&g[0]&&g[0].applianceTouCostAndUsageDetail&&(r=P(g[0].applianceTouCostAndUsageDetail[a],a));for(var i=0;i<r.length;i++)n?e.splice(t+1,0,r[i]):e.splice(t+1,1)}S(e)};return(0,F.jsxs)(v.Z,{children:[i&&(0,F.jsx)(v.Z,{className:"".concat(s.tableCell," ").concat(s.detailSection),children:(0,F.jsx)(D.Z,{variant:"body2",children:n.applianceUsage})}),!w||w&&!w.length&&(0,F.jsx)(v.Z,{className:"".concat(s.tableCell," ").concat(s.emptyResult),children:(0,F.jsx)(D.Z,{children:n.appDataNotAvailable})}),g&&g[0].itemization.itemizationWithCost&&w.map((function(a,t){return(0,F.jsx)(v.Z,{children:i?(0,F.jsxs)(Ia.ZP,{container:!0,children:[(0,F.jsx)(Ia.ZP,{item:!0,xs:3,onClick:function(){return T(a.id)},className:"".concat(s.tableCell," ").concat(s.compareTitle," ").concat(a.isExpandable||a.hasTouData?"expand":"","\n                    ").concat(a.hasTouData?"peak-label":""),children:a.isExpandable||a.hasTouData?(0,F.jsxs)(F.Fragment,{children:[a.hasTouData?(0,F.jsx)("div",{className:"marker ".concat(a.category.toLowerCase()),"aria-hidden":"true"}):"",(0,F.jsx)(D.Z,{className:"".concat(a.hasTouData?"name":""),children:a.hasTouData?a.category:Z[a.id]}),a.hasTouData?"":(0,F.jsx)("div",{"aria-label":"".concat(a.category," ").concat(a.toggleTouUsage?n.lessDetails:n.moreDetails),className:s.arrow+(a.toggleTouUsage?" bidgely-icon-arrow-down":" bidgely-icon-arrow-down "+s.arrowDown)})]}):(0,F.jsx)(D.Z,{children:Z[a.id]})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(Z[a.id],", ").concat(e.compareDate.intervalStartDate," - ").concat(e.compareDate.intervalEndDate,", ").concat((0,u.xB)({cost:a.cost,round:!0,showCurrency:!0})),children:(0,F.jsx)(D.Z,{children:(0,u.xB)({cost:a.cost,round:!0,showCurrency:!0})})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(Z[a.id],", ").concat(e.startDate.intervalStartDate," - ").concat(e.startDate.intervalEndDate,", ").concat((0,u.xB)({cost:A(a.id,a.hasTouData?a:""),round:!0,showCurrency:!0})),children:(0,F.jsx)(D.Z,{children:(0,u.xB)({cost:A(a.id,a.hasTouData?a:""),round:!0,showCurrency:!0})})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ada-focus-wo-offset ").concat(s.variation," ").concat(A(a.id,a.hasTouData?a:"")>a.cost?"plus":"minus"),tabIndex:"0","aria-label":"".concat(Z[a.id],", ").concat(n.variations,", ").concat(M(A(a.id,a.hasTouData?a:""),a.cost,h.AgQ.COST)),children:(0,F.jsx)(D.Z,{children:M(A(a.id,a.hasTouData?a:""),a.cost,h.AgQ.COST)})})]}):(0,F.jsx)(Fa,{widgetStrings:n,label:a.hasTouData?a.category:Z[a.id],bclValue1:(0,u.xB)({cost:a.cost,round:!0,showCurrency:!0}),bclValue2:(0,u.xB)({cost:A(a.id,a.hasTouData?a:""),round:!0,showCurrency:!0}),variation:(0,F.jsx)(v.Z,{className:"".concat(A(a.id,a.hasTouData?a:"")>a.cost&&"plus"," ").concat(A(a.id,a.hasTouData?a:"")<a.cost&&"minus"," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(n.variations,", ").concat(M(A(a.id,a.hasTouData?a:""),Math.round(a.cost),h.AgQ.COST)),children:M(A(a.id,a.hasTouData?a:""),Math.round(a.cost),h.AgQ.COST)}),billDetails:[],isApplianceTab:!0,touData:a,showAppDetail:T})},t)}))]})},Ga=function(a){var e=Va(a);return a.consumption/e},Va=function(a){var e=new Date(1e3*a.intervalStart),t=new Date(1e3*a.intervalEnd);return(0,Na.Z)(t,e)},Qa=function(a){var e=a.compareDates,t=a.title,n=a.startDatePropertyValue,r=a.compareDatePropertyValue,i=a.valueType,s=void 0===i?"":i,o=a.widgetStrings,c=a.billDetails,d=(0,l.v9)((function(a){return a.session.userProfile})).fuelType,u=za().classes,g=M(null,r,s,d,!0),p=M(n,null,s,d,!0),h=M(n,r,s,d);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(v.Z,{children:(0,F.jsxs)(Ia.ZP,{container:!0,children:[(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ").concat(u.compareTitle),children:(0,F.jsx)(D.Z,{children:t})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t,", ").concat(e.compareDate.intervalStartDate," - ").concat(e.compareDate.intervalEndDate,", ").concat(g),children:(0,F.jsx)(D.Z,{children:g})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(t,", ").concat(e.startDate.intervalStartDate," - ").concat(e.startDate.intervalEndDate,", ").concat(p),children:(0,F.jsx)(D.Z,{children:p})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ada-focus-wo-offset ").concat(u.variation," ").concat(n>r&&"plus"," ").concat(n<r&&"minus"),tabIndex:"0","aria-label":"".concat(t,", ").concat(o.variations,", ").concat(h),children:(0,F.jsx)(D.Z,{children:h})})]})}),c&&c.length?c.map((function(a,t){return(0,F.jsx)(v.Z,{children:(0,F.jsxs)(Ia.ZP,{container:!0,children:[(0,F.jsxs)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ").concat(u.compareTitle," expand peak-label "),children:[(0,F.jsx)("div",{className:"marker ".concat(a.name.toLowerCase()),"aria-hidden":"true"}),(0,F.jsx)(D.Z,{className:"name",children:a.name})]}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(a.name,", ").concat(e.compareDate.intervalStartDate," - ").concat(e.compareDate.intervalEndDate,", ").concat(a.originalCost),children:(0,F.jsx)(D.Z,{children:a.originalCost})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(a.name,", ").concat(e.startDate.intervalStartDate," - ").concat(e.startDate.intervalEndDate,", ").concat(a.comparedCost),children:(0,F.jsx)(D.Z,{children:a.comparedCost})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(u.tableCell," ada-focus-wo-offset ").concat(u.variation," ").concat(a.isPositive?"plus":"minus"),tabIndex:"0","aria-label":"".concat(a.name,", ").concat(o.variations,", ").concat(a.variationValue),children:(0,F.jsx)(D.Z,{children:a.variationValue})})]})},a.name+t)})):""]})},Xa=function(a){var e=a.compareDates,t=a.widgetConfigs,n=a.widgetStrings,r=(0,ra.WS)().rc,i=(0,b.Z)(),s=za().classes,c=(0,o.useState)(!1),d=(0,x.Z)(c,2),g=d[0],p=d[1],m=(0,l.v9)((function(a){return a.session.userProfile.userId})),f=(0,l.v9)((function(a){return a.session.userProfile})),j=(0,o.useState)(),w=(0,x.Z)(j,2),S=w[0],Z=w[1],C=(0,y.Z)(i.breakpoints.up("sm")),A=(0,l.v9)((function(a){return a.configs.data})),T=(0,l.v9)((function(a){return a.session.userProfile})).fuelType,k=function(){var a=(0,ka.Z)((0,Ta.Z)().mark((function a(){var t,n;return(0,Ta.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t={firstBillStart:e.startDate.intervalStart,secondBillStart:e.compareDate.intervalStart,measurementType:(0,u.nY)(f.fuelType),overrideActualDiff:!0},a.next=3,Ba(r,m,t);case 3:n=a.sent,Z(n.data);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();(0,o.useEffect)((function(){e.startDate&&e.compareDate&&k()}),[e]);var I=function(a){return"".concat(Object.values(S)[a].avgMaxTemp.value?Object.values(S)[a].avgMaxTemp.value.toFixed(1):0).concat(t.weatherUnit," / ").concat(Object.values(S)[a].avgMinTemp.value?Object.values(S)[a].avgMinTemp.value.toFixed(1):0).concat(t.weatherUnit)},N=function(a){return"".concat(Object.values(S)[1][a].value>Object.values(S)[0][a].value&&"plus"," ").concat(Object.values(S)[1][a].value<Object.values(S)[0][a].value&&"minus")},B=function(a){var e=Object.values(S);return"\n       ".concat((e[1][a].value-e[0][a].value).toFixed(1),"\n       ").concat(t.weatherUnit,"\n       ")},_=g?n.lessDetails:n.moreDetails,E=n.averageTemp,L=f.userType===h.$AG.AMI?t.hideApplianceGB:t.hideApplianceGBMonth,O=Y(S,M,T,e,n);return(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)(v.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",onClick:function(){r.analytics.trackEvent(h.FiA.INSIGHTS,{clicked:g?"Less Details":"More Details",intervalStart:e.startDate.intervalStart,intervalEnd:e.startDate.intervalEnd,shown:h.Q2X.BILL_ANALYSIS,version:"v2"}),p(!g)},className:s.root,component:"button",tabIndex:"0","aria-label":_,children:[(0,F.jsx)(D.Z,{className:s.title,children:_}),(0,F.jsx)("div",{"aria-label":_,className:s.arrow+(g?" bidgely-icon-arrow-down "+s.arrowDown:" bidgely-icon-arrow-down")})]}),g&&e.startDate&&e.compareDate&&(0,F.jsx)(v.Z,{className:s.detailTable,children:C?(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(v.Z,{className:s.tableHeader,children:(0,F.jsxs)(Ia.ZP,{container:!0,children:[(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ").concat(s.tableHeaderCell)}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ").concat(s.tableHeaderCell),children:(0,F.jsx)(D.Z,{children:R(e.compareDate,A)})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ").concat(s.tableHeaderCell),children:(0,F.jsx)(D.Z,{children:R(e.startDate,A)})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ").concat(s.tableHeaderCell),children:(0,F.jsx)(D.Z,{children:n.variations})})]})}),(0,F.jsxs)(v.Z,{className:s.tableBody,children:[(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(v.Z,{className:"".concat(s.tableCell," ").concat(s.detailSection),children:(0,F.jsx)(D.Z,{variant:"body2",children:n.totals})}),(0,F.jsx)(Qa,{widgetStrings:n,compareDates:e,title:n.billAmount,startDatePropertyValue:e.startDate.cost,compareDatePropertyValue:e.compareDate.cost,valueType:h.AgQ.COST,billDetails:O}),(0,F.jsx)(Qa,{widgetStrings:n,compareDates:e,title:n.consumption,startDatePropertyValue:e.startDate.consumption,compareDatePropertyValue:e.compareDate.consumption,valueType:h.AgQ.USAGE}),(0,F.jsx)(Qa,{widgetStrings:n,compareDates:e,title:n.consumptionPerDay,startDatePropertyValue:Ga(e.startDate),compareDatePropertyValue:Ga(e.compareDate),valueType:h.AgQ.USAGE})]}),S&&!L&&(0,F.jsx)(Wa,{widgetStrings:n,compareBillsData:S,compareDates:e}),S&&(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(v.Z,{className:"".concat(s.tableCell," ").concat(s.detailSection),children:(0,F.jsx)(D.Z,{variant:"body2",children:n.otherDiffs})}),(0,F.jsx)(v.Z,{children:(0,F.jsxs)(Ia.ZP,{container:!0,children:[(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ").concat(s.compareTitle),children:(0,F.jsx)(D.Z,{children:E})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(E,", ").concat(e.compareDate.intervalStartDate," - ").concat(e.compareDate.intervalEndDate,", ").concat(I(0)),children:(0,F.jsx)(D.Z,{children:I(0)})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(E,", ").concat(e.startDate.intervalStartDate," - ").concat(e.startDate.intervalEndDate,", ").concat(I(1)),children:(0,F.jsx)(D.Z,{children:I(1)})}),(0,F.jsx)(Ia.ZP,{item:!0,xs:3,className:"".concat(s.tableCell," ").concat(s.variation," ada-focus-wo-offset"),tabIndex:"0","aria-label":"".concat(E,", ").concat(n.variations,", ").concat(B("avgMaxTemp"),"/").concat(B("avgMinTemp")),children:(0,F.jsxs)(D.Z,{children:[(0,F.jsxs)("span",{className:N("avgMaxTemp"),children:[B("avgMaxTemp")," "," / "]}),(0,F.jsx)("span",{className:N("avgMinTemp"),children:B("avgMinTemp")})]})})]})}),(0,F.jsx)(Qa,{widgetStrings:n,compareDates:e,title:n.billingCycleDays,startDatePropertyValue:Va(e.startDate),compareDatePropertyValue:Va(e.compareDate)}),(0,F.jsx)(Qa,{widgetStrings:n,compareDates:e,title:n.consumptionDayLow,startDatePropertyValue:Object.keys(Object.values(S)[1].vacationDays.value).length,compareDatePropertyValue:Object.keys(Object.values(S)[0].vacationDays.value).length})]})]})]}):S&&(0,F.jsx)(Ua,{widgetConfigs:t,widgetStrings:n,compareBillsData:S})})]})},Ka=t(44021),qa=t(69140),$a=(0,B.ZL)()((function(a){var e;return{root:{width:"100%",borderRadius:8,overflow:"hidden",marginTop:10,background:"rgb(var(--background_300))"},title:(0,N.Z)({padding:"11px 40px",background:"rgb(var(--primary_500))","& p":(0,N.Z)({fontSize:20,fontWeight:600,color:"rgb(var(--foreground_300))"},a.breakpoints.down("sm"),{fontSize:18})},a.breakpoints.down("sm"),{padding:"11px 15px"}),body:(0,N.Z)({padding:"35px 40px 30px"},a.breakpoints.down("sm"),{padding:"20px 15px 60px"}),actions:(0,N.Z)({marginTop:44,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:35,overflowX:"scroll"},a.breakpoints.down("md"),{display:"none"}),action:(0,N.Z)({textAlign:"center",padding:"30px 25px 20px",boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",borderRadius:10,"& p":(0,N.Z)({marginBottom:20,fontSize:18,color:"rgb(var(--foreground_500))"},a.breakpoints.down("sm"),{fontSize:14,padding:"0 40px"})},a.breakpoints.down("sm"),{boxShadow:"none"}),image:{width:200,height:200,background:"#EBF6F5",borderRadius:"50%",margin:"0 auto",display:"flex",alignItems:"flex-end",justifyContent:"center",marginBottom:30},subTitle:(0,N.Z)({fontSize:18,color:"rgb(var(--foreground_500))"},a.breakpoints.down("sm"),{fontSize:14}),mobileSlider:(e={display:"none","& .slick-list":{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",border:"1px solid #DFE8F1",borderRadius:4}},(0,N.Z)(e,a.breakpoints.down("md"),{display:"block",marginTop:20}),(0,N.Z)(e,"& .slick-dots",{"& li":{width:"auto","& button:before":{fontSize:8,color:"rgb(var(--background_600))"}},"& li.slick-active":{"& button:before":{fontSize:10,color:"rgb(var(--background_600))"}}}),e),viewItemizationBtn:{maxWidth:300}}})),Ja=function(a){var e=a.image,t=a.title,n=a.buttonLabel,r=a.buttonLink,i=(0,ra.WS)().rc,s=$a().classes,l=(0,o.useContext)(ie).compareDates,c=K.V.getColors().colors;return(0,F.jsxs)(v.Z,{className:s.action,children:[(0,F.jsx)(v.Z,{className:s.image,children:(0,F.jsx)("img",{src:e,alt:t})}),(0,F.jsx)(D.Z,{children:t}),(0,F.jsx)(qa.Z,{btnVariant:"contained",btnText:n,fullWidth:!0,btnBackground:"rgb(".concat(c["--primary_500"],")"),hoverColor:"rgb(".concat(c["--primary_500"],")"),textColor:"rgb(".concat(c["--foreground_300"],")"),btnBoxShadow:"none",btnTextTransform:"none",onClick:function(a){return e=r,i.analytics.trackEvent(h.FiA.INSIGHTS,{clicked:n,intervalStart:l.startDate.intervalStart,intervalEnd:l.startDate.intervalEnd,shown:h.Q2X.BILL_ANALYSIS,version:h.zZZ.V2}),void((0,u.yp)()||(0,g.K2)(e)?window.open(e):window.location.href=e);var e},className:s.viewItemizationBtn})]})},ae=function(a){var e=a.widgetStrings,t=(0,l.v9)((function(a){return a.translationsData})),n=(0,l.v9)((function(a){return a.configs})),r=$a().classes,i=n.data["DASHBOARD.INSIGHTS.BILL_ANALYSIS.FURTHER_ACTIONS.ACTION_CARDS"]?JSON.parse(n.data["DASHBOARD.INSIGHTS.BILL_ANALYSIS.FURTHER_ACTIONS.ACTION_CARDS"]):[];return(0,F.jsxs)(v.Z,{className:r.root,children:[(0,F.jsx)(v.Z,{className:r.title,children:(0,F.jsx)(D.Z,{children:e.furtherActionsTitle})}),(0,F.jsxs)(v.Z,{className:r.body,children:[(0,F.jsx)(D.Z,{className:r.subTitle,children:e.furtherActionsSubTitle}),(0,F.jsx)(v.Z,{className:r.actions,children:i.length>0&&i.map((function(a,e){return(0,F.jsx)(Ja,{image:a.image,title:t.data[a.text],buttonLabel:t.data[a.ctaText],buttonLink:a.ctaLink},e)}))}),(0,F.jsx)(v.Z,{className:r.mobileSlider,children:i.length>0&&(0,F.jsx)(Ka.Z,(0,f.Z)((0,f.Z)({},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,arrows:!1}),{},{children:i.map((function(a,e){return(0,F.jsx)(Ja,{image:a.image,title:t.data[a.text],buttonLabel:t.data[a.ctaText],buttonLink:a.ctaLink},e)}))}))})]})]})},ee=(0,B.ZL)()((function(){return{root:{color:"rgb(var(--foreground_500))","& p":{fontSize:12,marginBottom:6,fontWeight:500,lineHeight:"15px"}},bar:{height:8,background:"rgb(var(--primary_200))",width:"100%",borderRadius:2,overflow:"hidden"},percentageBar:{background:"rgb(var(--primary_500))",height:8}}})),te=function(a){var e=a.intervalData,t=a.percentage,n=a.configs,r=ee().classes,i=(0,u.Yr)(e.intervalStartDateFormatted,h.DEY.YEAR,n,!0);return(0,F.jsxs)(v.Z,{className:r.root,children:[(0,F.jsxs)(v.Z,{display:"flex",justifyContent:"space-between",children:[(0,F.jsx)(D.Z,{children:i}),(0,F.jsx)(D.Z,{children:(0,u.xB)({cost:e.cost,showCurrency:!0})})]}),(0,F.jsx)(v.Z,{className:r.bar,children:(0,F.jsx)(v.Z,{className:r.percentageBar,style:{width:"".concat(t,"%")}})})]})},ne=function(a){var e=a.compareDates,t=a.configs,n=function(a){return"compareDate"===a?e.startDate.cost<=e.compareDate.cost?100:e.compareDate.cost/e.startDate.cost*100:e.startDate.cost>=e.compareDate.cost?100:e.startDate.cost/e.compareDate.cost*100};return(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(v.Z,{mb:2,children:(0,F.jsx)(te,{intervalData:e.compareDate,percentage:n("compareDate"),configs:t.data})}),(0,F.jsx)(te,{intervalData:e.startDate,percentage:n("startDate"),configs:t.data})]})},re=function(a){(0,i.Z)(t,a);var e=(0,s.Z)(t);function t(a){var r;return(0,n.Z)(this,t),(r=e.call(this,a)).state={componentError:!1},r}return(0,r.Z)(t,[{key:"componentDidCatch",value:function(a,e){this.props.errorCallback&&this.props.errorCallback(a),this.setState({componentError:!0})}},{key:"render",value:function(){return this.state.componentError?this.props.errorCallback?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(a){return{componentError:!0}}}]),t}(o.Component),ie=(0,o.createContext)();function se(a){var e=a.highchartData,t=a.widgetStrings,n=xa().classes,r=e&&e.generatedChartData[h.LGX-1];return(r?r.cost:null)&&(0,F.jsx)(v.Z,{children:(0,F.jsxs)(D.Z,{className:n.billAmount,children:[e&&"".concat(t.billAmount," : "),(0,F.jsx)("span",{children:e&&"".concat((0,u.xB)({cost:e.generatedChartData[h.LGX-1].cost,round:!0,showCurrency:!0,lessThanOne:!1}))})]})})}function oe(a){var e=a.widgetStrings,t=xa().classes,n=(0,l.v9)((function(a){return a.insightsBillAnalysisData})),r=K.V.getConfiguration(),i=n.billAmountIncreasedPercentage,s=0===i?e.comparedBillSame:i>0?e.prevBillHigher:e.prevBillLower;return!isNaN(i)&&(0,F.jsxs)(v.Z,{className:t.banner,display:"flex",alignItems:"center",borderRadius:"4px",children:[(0,F.jsx)("img",{src:"".concat(r.assetsUrl,"/images/insight_bulb.svg"),alt:"icon",className:t.bulbIcon}),(0,F.jsx)("p",{className:t.bannerText,dangerouslySetInnerHTML:{__html:(0,u.Z7)(s,{billDiffPercent:"".concat(Math.abs(i),"%")})}})]})}var le=function(a){var e=a.updateBillAnalysisData,t=a.widgetConfigs,n=a.widgetStrings,r=(0,o.useContext)(ra.zO),i=(0,b.Z)(),s=(0,y.Z)(i.breakpoints.up("sm")),c=xa().classes,d=(0,l.I0)(),g=(0,l.v9)((function(a){return a.session.userProfile.userId})),p=(0,l.v9)((function(a){return a.configs})),j=(0,l.v9)((function(a){return a.session})),S=(0,l.v9)((function(a){return a.usageHistoryData})),Z=(0,l.v9)((function(a){return a.usageHistoryData.seriesData})),C=(0,l.v9)((function(a){return a.insightsBillAnalysisData})),A=X(C),T=(0,o.useState)(),k=(0,x.Z)(T,2),I=k[0],N=k[1],B=(0,o.useState)({startDate:null,compareDate:null}),_=(0,x.Z)(B,2),E=_[0],R=_[1],M=(0,o.useState)(),P=(0,x.Z)(M,2),Y=P[0],W=P[1],K=(0,o.useState)(-1),q=(0,x.Z)(K,2),$=q[0],J=q[1],aa=(0,o.useState)(-1),ea=(0,x.Z)(aa,2),ta=ea[0],na=ea[1],ia=(0,o.useState)(!1),sa=(0,x.Z)(ia,2),oa=sa[0],la=sa[1],ca=(0,o.useState)(-1),ua=(0,x.Z)(ca,2),ga=ua[0],ha=ua[1],ma=(0,o.useState)(),ba=(0,x.Z)(ma,2),va=ba[0],Da=ba[1],ya=(0,o.useState)(),ja=(0,x.Z)(ya,2),wa=ja[0],Sa=ja[1],Za=(0,o.useState)(),Ca=(0,x.Z)(Za,2),Ta=Ca[0],ka=Ca[1],Ia=t.showMoreDetails,Na=t.showTitle,Ba=t.actionCards,_a=r.runMode===h.K8z,Ea=!Ba||0===JSON.parse(Ba).length,La=C.apiError,Oa=C.isBillAnalysisLoading&&(La||C.dataNotAvailable);(0,o.useEffect)((function(){if(Z&&Z.length){var a=L(Z,t.usageDisplayType);a.length&&a.length>1?(N(a),la(!1)):la(!1===S.fetchingData)}else la(!1===S.fetchingData)}),[Z]),(0,o.useEffect)((function(){var a;I&&I.length&&(ha(I.length-1),I.length>=1&&(a=O(I,t.usageDisplayType),W(a)),I.length>=2&&(J(a.generatedChartData.length-1),na(a.generatedChartData.length-2),Sa(U),R({startDate:a.generatedChartData[a.generatedChartData.length-1],compareDate:a.generatedChartData[a.generatedChartData.length-2]})))}),[I]),(0,o.useEffect)((function(){if(!Z){var a={"measurement-type":(0,u.nY)(j.userProfile.fuelType),mode:h.DEY.YEAR.toLowerCase(),start:0,"skip-itemization":!0,"skip-ongoing-cycle":!0,"date-format":t.dateFormatChartXAxis,"override-invoice":!0,locale:p.locale};d((0,Q.BO)()),d((0,Q.bM)(r.rc,g,a))}}),[]),(0,o.useEffect)((function(){E.startDate&&E.compareDate&&e(E.startDate.intervalStart,E.compareDate.intervalStart)}),[E]),(0,o.useEffect)((function(){Ta&&!C.isBillAnalysisLoading&&A.isBillAnalysisLoading&&(r.rc.analytics.trackEvent(h.FiA.INSIGHTS,(0,f.Z)((0,f.Z)({},Ta),{},{billAmoundDifference:"".concat(C.billAmountIncreasedPercentage,"%")})),ka())}),[Ta,C,A]);var Ra=function(a,e){return a[e].cost>0?e:w()(a.slice(0,e+1),(function(a){return a.cost>0}))},Ma=function(a){var e=Y.generatedChartData[$],t=I.findIndex((function(a){return!!a&&a.intervalStart===e.intervalStart})),n=new Date(1e3*e.intervalStart).getFullYear(),r=new Date(1e3*I[a].intervalStart).getFullYear();return Da(a<t-12?[n,r]:null),a<t-12};return(0,F.jsxs)(ie.Provider,{value:{onChangeComparedDropdownSelect:function(a){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={shown:h.Q2X.BILL_ANALYSIS,version:"v2"};switch(r&&(s=(0,f.Z)((0,f.Z)({},s),{},{type:"Accessibility"})),a){case U:e=Ra(Y.generatedChartData,$-1),n=Y.generatedChartData[e],s=(0,f.Z)((0,f.Z)({},s),{},{clicked:"Date Dropdown-Previous Month"});break;case z:var o=I[ga],l=(0,H.qc)(new Date(1e3*o.intervalStart),1);e=(e=Y.generatedChartData.findIndex((function(a){if(a){var e=new Date(1e3*a.intervalStart);return e.getFullYear()===l.getFullYear()&&e.getMonth()===l.getMonth()}return!1})))>=0?e:Y.generatedChartData.length-2,n=Y.generatedChartData[e],s=(0,f.Z)((0,f.Z)({},s),{},{clicked:"Date Dropdown-Same bill last year"});break;default:e=Y.generatedChartData.findIndex((function(e){return!!e&&e.intervalStart===a.intervalStart})),n=a,s=i?e===$-1?(0,f.Z)((0,f.Z)({},s),{},{clicked:"Bar Chart-Previous Month"}):e===$-12?(0,f.Z)((0,f.Z)({},s),{},{clicked:"Bar Chart-Same bill last year"}):(0,f.Z)((0,f.Z)({},s),{},{clicked:"Bar Chart"}):(0,f.Z)((0,f.Z)({},s),{},{clicked:"Date Dropdown"})}e<0?function(a){var e,n=Y.generatedChartData[$],r=I.findIndex((function(a){return!!a&&a.intervalStart===n.intervalStart}));switch(a){case U:e=Ra(I,r-1);break;case z:e=Ra(I,r-12);break;default:e=I.findIndex((function(e){return!!e&&e.intervalStart===a.intervalStart}))}var i=I[e],s=new Date(1e3*i.intervalStart).getFullYear();Ma(e);var o=[],l={};I.map((function(a){var e=new Date(1e3*a.intervalStart).getFullYear();-1===o.findIndex((function(a){return a===e}))?(o=[].concat((0,m.Z)(o),[e]),l[e]=[a]):l[e]=[].concat((0,m.Z)(l[e]),[a])}));var c,d=l[s].findIndex((function(a){return!!a&&a.intervalStart===i.intervalStart})),u=Y.generatedChartData.slice(-7),g=[];d<=5?(g=l[s].slice(0,6),l[s].length<6?na(d+6-l[s].length):na(d)):(g=l[s].slice(5,11),na(d-5)),c=[].concat((0,m.Z)(g),(0,m.Z)(u)),W(O(L(c,t.usageDisplayType),t.usageDisplayType))}(a):function(a){var e=null,n=Y,r=a;if(va){e=Y.generatedChartData[a];var i=I.findIndex((function(a){return!!a&&a.intervalStart===e.intervalStart}));if(!Ma(i)){var s,o=Y.generatedChartData[$],l=I.findIndex((function(a){return!!a&&a.intervalStart===o.intervalStart})),c=Y.generatedChartData.slice(-7),d=I.slice(l-12,l-6);s=[].concat((0,m.Z)(d),(0,m.Z)(c)),n=O(L(s,t.usageDisplayType),t.usageDisplayType),W(n),r=n.generatedChartData.findIndex((function(a){return a.intervalStart===e.intervalStart}))}}na(r)}(e),s=(0,f.Z)((0,f.Z)({},s),{},{intervalStart:n.intervalStart,intervalEnd:n.intervalEnd}),ka(s),Sa(a),R((0,f.Z)((0,f.Z)({},E),{},{compareDate:n}))},onChangeCompareBillStart:function(a){var e=I.findIndex((function(e){return!!e&&e.intervalStart===a.intervalStart}));ha(e),Da(null);var n=I.slice(0,e+1),r=O(n,t.usageDisplayType),i=r.generatedChartData.findIndex((function(a){return!!a&&(a.intervalStart===Y.generatedChartData[$].intervalStart&&a.intervalEnd===Y.generatedChartData[$].intervalEnd)})),s=0;if(wa===z){var o=I[e],l=(0,H.qc)(new Date(1e3*o.intervalStart),1);s=r.generatedChartData.findIndex((function(a){if(a){var e=new Date(1e3*a.intervalStart);return e.getFullYear()===l.getFullYear()&&e.getMonth()===l.getMonth()}return!1}))}else s=i===h.LGX-1||-1===i?h.LGX-2:i;if(r.generatedChartData[s].cost>0)na(s);else{var c=w()(r.generatedChartData.slice(0,s+1),(function(a){return a.cost>0}));na(c)}W(r),R({startDate:a,compareDate:r.generatedChartData[s]})},compareBillEndIndex:ta,compareBillStartIndex:$,highchartData:Y,compareYears:va,allSeriesForChart:I,seriesData:Z,compareDates:E},children:[Na&&(0,F.jsx)(v.Z,{children:(0,F.jsx)("div",{className:_a?"widget-header-cont":"".concat(c.title," ").concat(Na?null:c.rootContShadow),children:(0,F.jsx)("span",{role:"heading","aria-level":"2","data-widget-name":h.wY4.HIGH_BILL_ANALYSER,"data-text-color":"foreground_400",children:n.title})})}),!oa&&(0,F.jsxs)(v.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3.75,className:c.contentHeader,children:[Y&&(0,F.jsx)(se,{widgetStrings:n,highchartData:Y}),(0,F.jsxs)(v.Z,{className:c.intervalWrapper,children:[I&&(0,F.jsx)(pa,{allSeriesForChart:I,selectedIntervalIndex:ga}),(0,u.IR)()&&E&&(0,F.jsx)(v.Z,{ml:2.5,children:(0,F.jsx)(Aa,{widgetStrings:n,widgetConfigs:t,compareDates:E,loading:C.isBillAnalysisLoading,selectedIntervalIndex:ga})})]})]}),(0,F.jsxs)("div",{className:c.mainContainer,children:[C.isBillAnalysisLoading&&!oa&&(0,F.jsx)(V.Z,{className:c.loading}),!C.isBillAnalysisLoading&&!oa&&(0,F.jsxs)(re,{children:[(0,F.jsxs)(v.Z,{className:c.root,borderRadius:Na?0:8,"aria-hidden":La,children:[!Oa&&(0,F.jsxs)(v.Z,{className:c.inner,children:[Y&&Z&&(0,F.jsx)(G,{widgetStrings:n,widgetConfigs:t,seriesData:Z,currentIndex:ga}),(0,F.jsxs)(v.Z,{className:c.analysisContent,children:[!Oa&&(0,F.jsx)(v.Z,{mb:s?2.5:3,mt:s?"10px":0,children:(0,F.jsx)(oe,{widgetStrings:n})}),(0,F.jsxs)(v.Z,{className:c.diffGraphInfo,children:[(0,F.jsx)(v.Z,{className:c.chart,children:E&&Y&&(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(v.Z,{className:c.desktopGraph,children:(0,F.jsx)(da,{widgetConfigs:t,widgetStrings:n,highchartData:Y})}),(0,F.jsx)(v.Z,{className:c.mobileGraph,children:(0,F.jsx)(ne,{compareDates:E,configs:p})})]})}),!Oa&&(0,F.jsx)(v.Z,{flex:1,children:(0,F.jsx)(fa,{widgetStrings:n})})]}),Ia&&E&&(0,F.jsx)(v.Z,{mt:5,children:(0,F.jsx)(Xa,{widgetConfigs:t,widgetStrings:n,compareDates:E})})]})]}),Oa&&(0,F.jsxs)(v.Z,{className:c.inner,children:[Y&&Z&&(0,F.jsx)(G,{widgetStrings:n,widgetConfigs:t,seriesData:Z,currentIndex:ga}),(0,F.jsx)(v.Z,{className:c.insufficentDataWrapper,children:(0,F.jsx)(D.Z,{variant:"h6",children:n.dataNotAvailable})})]})]}),!Ea&&(0,F.jsx)(ae,{widgetStrings:n})]}),oa&&(0,F.jsx)("div",{className:c.apiFailed,"data-widget-name":h.wY4.HIGH_BILL_ANALYSER,children:n.apiFailed})]})]})},ce=t(74813),de=t(61939),ue=t(21629),ge=t(21911),pe=function(a){(0,i.Z)(t,a);var e=(0,s.Z)(t);function t(){var a;(0,n.Z)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=e.call.apply(e,[this].concat(i))).widgetTrackingInfo=void 0,a}return(0,r.Z)(t,[{key:"componentDidMount",value:function(){this.widgetTrackingInfo=this.context.rc.analytics.createWidgetInfo(h.xDZ.INSIGHTS_HBA),this.context.rc.analytics.trackEvent(h.FiA.INSIGHTS,{viewed:!0,shown:h.Q2X.BILL_ANALYSIS,version:"v2"},this.props)}},{key:"componentDidUpdate",value:function(a){if(this.widgetTrackingInfo&&a.insightsBillAnalysisData&&a.insightsBillAnalysisData.fetchingData&&!this.props.insightsBillAnalysisData.fetchingData){var e=this.props.insightsBillAnalysisData.dataNotAvailable?h.WW8.DATA_NOT_AVAILABLE:this.props.insightsBillAnalysisData.apiError?h.WW8.ERROR:h.WW8.SUCCESS,t=this.props.insightsBillAnalysisData.errorInfo;this.context.rc.analytics.logWidgetInfo(this.widgetTrackingInfo,e,t),this.widgetTrackingInfo=null}this.props.insightsBillAnalysisData.billStart&&this.props.insightsBillAnalysisData.compareBillStart&&(this.props.insightsBillAnalysisData.billStart!==a.insightsBillAnalysisData.billStart||this.props.insightsBillAnalysisData.compareBillStart!==a.insightsBillAnalysisData.compareBillStart)&&this.props.widgetConfigs.enableQueryParams&&(this.context.runMode!==h.K8z&&this.props.history.push((0,g.UM)(this.props.location,[{name:"bill-start",value:this.props.insightsBillAnalysisData.billStart},{name:"compare-bill-start",value:this.props.insightsBillAnalysisData.compareBillStart}])),this.props.updateQueryParams({billStart:this.props.insightsBillAnalysisData.billStart,compareBillStart:this.props.insightsBillAnalysisData.compareBillStart}))}},{key:"fetchBillAnalysisData",value:function(a,e){var t={"measurement-type":(0,u.nY)(this.props.session.userProfile.fuelType),"date-format":this.props.widgetConfigs.dateFormat,locale:this.props.configs.locale};a&&(t["bill-start"]=a),e&&(t["compare-bill-start"]=e),(0,ce.JF)()&&(t.templateName="".concat(h.wY4.INSIGHTS.BILL_ANALYSIS,".FETCH_BILL_ANALYSIS")),this.props.fetchingBillAnalysisData(),this.props.fetchBillAnalysisData(this.context.rc,t,this.props.session.userProfile.userId)}},{key:"getBillCycleDataByDate",value:function(a){if(a&&this.props.usageHistoryData&&this.props.usageHistoryData.seriesData)return this.props.usageHistoryData.seriesData.filter((function(e){return e.intervalStart==a}))[0]}},{key:"updateBillAnalysisData",value:function(a,e){var t=this.getBillCycleDataByDate(a),n=this.getBillCycleDataByDate(e),r=t&&t.cost&&n&&n.cost,i=r?t.cost:0,s=r?n.cost:0,o=Math.round((i-s)/s*100);this.props.changeBillAnalysisData({billStart:a,compareBillStart:e,isBillAnalysisLoading:!0,billAmountIncreasedPercentage:o}),this.fetchBillAnalysisData(a,e)}},{key:"render",value:function(){var a=this;return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(le,{widgetConfigs:this.props.widgetConfigs,widgetStrings:this.props.widgetStrings,updateBillAnalysisData:function(e,t){return a.updateBillAnalysisData(e,t)}})})}}]),t}(o.Component);pe.contextType=ra.zO;var he=(0,de.$)(ue.Z$.HIGH_BILL_ANALYSER,(0,ge.EN)((0,l.$j)((function(a){return{session:a.session,insightsBillAnalysisData:a.insightsBillAnalysisData,configs:a.configs,translations:a.translationsData,queryParams:a.queryParams,responsiveness:a.responsiveness,usageHistoryData:a.usageHistoryData}}),(function(a){return{fetchingBillAnalysisData:function(){return a((0,c.Fj)())},fetchBillAnalysisData:function(e,t,n){a((0,c.bt)(e,t,n))},changeBillAnalysisData:function(e){a((0,d.q)(e))},updateQueryParams:function(e){a((0,p.Vb)(e))}}}))(pe)))}}]);